!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(k){"use strict";function l(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(i).remove()}function h(i){var t=i.parent(),o=t.find(".minicolors-panel"),s=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(d(),t.addClass("minicolors-focus"),o.stop(!0,!0).fadeIn(s.showSpeed,function(){s.show&&s.show.call(i.get(0))}))}function d(){k(".minicolors-focus").each(function(){var i=k(this),t=i.find(".minicolors-input"),o=i.find(".minicolors-panel"),s=t.data("minicolors-settings");o.fadeOut(s.hideSpeed,function(){s.hide&&s.hide.call(t.get(0)),i.removeClass("minicolors-focus")})})}function o(i,t,o){var s,a,n,e,r=i.parents(".minicolors").find(".minicolors-input"),c=r.data("minicolors-settings"),l=i.find("[class$=-picker]"),h=i.offset().left,d=i.offset().top,p=Math.round(t.pageX-h),u=Math.round(t.pageY-d),g=o?c.animationSpeed:0;t.originalEvent.changedTouches&&(p=t.originalEvent.changedTouches[0].pageX-h,u=t.originalEvent.changedTouches[0].pageY-d),p<0&&(p=0),u<0&&(u=0),p>i.width()&&(p=i.width()),u>i.height()&&(u=i.height()),i.parent().is(".minicolors-slider-wheel")&&l.parent().is(".minicolors-grid")&&(s=75-p,a=75-u,n=Math.sqrt(s*s+a*a),(e=Math.atan2(a,s))<0&&(e+=2*Math.PI),75<n&&(p=(n=75)-75*Math.cos(e),u=75-75*Math.sin(e)),p=Math.round(p),u=Math.round(u)),i.is(".minicolors-grid")?l.stop(!0).animate({top:u+"px",left:p+"px"},g,c.animationEasing,function(){m(r,i)}):l.stop(!0).animate({top:u+"px"},g,c.animationEasing,function(){m(r,i)})}function m(i,t){function o(i,t){var o,s;return i.length&&t?(o=i.offset().left,s=i.offset().top,{x:o-t.offset().left+i.outerWidth()/2,y:s-t.offset().top+i.outerHeight()/2}):null}var s,a,n,e,r,c,l,h=i.val(),d=i.attr("data-opacity"),p=i.parent(),u=i.data("minicolors-settings"),g=p.find(".minicolors-input-swatch"),m=p.find(".minicolors-grid"),f=p.find(".minicolors-slider"),v=p.find(".minicolors-opacity-slider"),b=m.find("[class$=-picker]"),w=f.find("[class$=-picker]"),y=v.find("[class$=-picker]"),C=o(b,m),k=o(w,f),M=o(y,v);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(u.control){case"wheel":e=m.width()/2-C.x,r=m.height()/2-C.y,c=Math.sqrt(e*e+r*r),(l=Math.atan2(r,e))<0&&(l+=2*Math.PI),75<c&&(c=75,C.x=69-75*Math.cos(l),C.y=69-75*Math.sin(l)),a=T(c/.75,0,100),h=L({h:s=T(180*l/Math.PI,0,360),s:a,b:n=T(100-Math.floor(k.y*(100/f.height())),0,100)}),f.css("backgroundColor",L({h:s,s:a,b:100}));break;case"saturation":h=L({h:s=T(parseInt(C.x*(360/m.width()),10),0,360),s:a=T(100-Math.floor(k.y*(100/f.height())),0,100),b:n=T(100-Math.floor(C.y*(100/m.height())),0,100)}),f.css("backgroundColor",L({h:s,s:100,b:n})),p.find(".minicolors-grid-inner").css("opacity",a/100);break;case"brightness":h=L({h:s=T(parseInt(C.x*(360/m.width()),10),0,360),s:a=T(100-Math.floor(C.y*(100/m.height())),0,100),b:n=T(100-Math.floor(k.y*(100/f.height())),0,100)}),f.css("backgroundColor",L({h:s,s:a,b:100})),p.find(".minicolors-grid-inner").css("opacity",1-n/100);break;default:h=L({h:s=T(360-parseInt(k.y*(360/f.height()),10),0,360),s:a=T(Math.floor(C.x*(100/m.width())),0,100),b:n=T(100-Math.floor(C.y*(100/m.height())),0,100)}),m.css("backgroundColor",L({h:s,s:100,b:100}))}x(i,h,d=u.opacity?parseFloat(1-M.y/v.height()).toFixed(2):1)}else g.find("span").css({backgroundColor:h,opacity:d}),I(i,h,d)}function x(i,t,o){var s,a=i.parent(),n=i.data("minicolors-settings"),e=a.find(".minicolors-input-swatch");n.opacity&&i.attr("data-opacity",o),t="rgb"===n.format?(s=D(t)?z(t,!0):$(S(t,!0)),o=""===i.attr("data-opacity")?1:T(parseFloat(i.attr("data-opacity")).toFixed(2),0,1),!isNaN(o)&&n.opacity||(o=1),i.minicolors("rgbObject").a<=1&&s&&n.opacity?"rgba("+s.r+", "+s.g+", "+s.b+", "+parseFloat(o)+")":"rgb("+s.r+", "+s.g+", "+s.b+")"):(D(t)&&(t=q(t)),M(t,n.letterCase)),i.val(t),e.find("span").css({backgroundColor:t,opacity:o}),I(i,t,o)}function p(i,t){var o,s,a,n,e,r,c,l,h,d,p,u=i.parent(),g=i.data("minicolors-settings"),m=u.find(".minicolors-input-swatch"),f=u.find(".minicolors-grid"),v=u.find(".minicolors-slider"),b=u.find(".minicolors-opacity-slider"),w=f.find("[class$=-picker]"),y=v.find("[class$=-picker]"),C=b.find("[class$=-picker]");switch(D(i.val())?(o=q(i.val()),(e=T(parseFloat(j(i.val())).toFixed(2),0,1))&&i.attr("data-opacity",e)):o=M(S(i.val(),!0),g.letterCase),o=o||M(F(g.defaultValue,!0),g.letterCase),0===(p=function(i){var t={h:0,s:0,b:0},o=Math.min(i.r,i.g,i.b),s=Math.max(i.r,i.g,i.b),a=s-o;return t.b=s,t.s=0!==s?255*a/s:0,0!==t.s?i.r===s?t.h=(i.g-i.b)/a:i.g===s?t.h=2+(i.b-i.r)/a:t.h=4+(i.r-i.g)/a:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}($(o))).s&&(p.h=360),s=p,n=g.keywords?k.map(g.keywords.split(","),function(i){return k.trim(i.toLowerCase())}):[],r=""!==i.val()&&-1<k.inArray(i.val().toLowerCase(),n)?M(i.val()):D(i.val())?z(i.val()):o,t||i.val(r),g.opacity&&(a=""===i.attr("data-opacity")?1:T(parseFloat(i.attr("data-opacity")).toFixed(2),0,1),isNaN(a)&&(a=1),i.attr("data-opacity",a),m.find("span").css("opacity",a),l=T(b.height()-b.height()*a,0,b.height()),C.css("top",l+"px")),"transparent"===i.val().toLowerCase()&&m.find("span").css("opacity",0),m.find("span").css("backgroundColor",o),g.control){case"wheel":h=T(Math.ceil(.75*s.s),0,f.height()/2),d=s.h*Math.PI/180,c=T(75-Math.cos(d)*h,0,f.width()),l=T(75-Math.sin(d)*h,0,f.height()),w.css({top:l+"px",left:c+"px"}),l=150-s.b/(100/f.height()),""===o&&(l=0),y.css("top",l+"px"),v.css("backgroundColor",L({h:s.h,s:s.s,b:100}));break;case"saturation":c=T(5*s.h/12,0,150),l=T(f.height()-Math.ceil(s.b/(100/f.height())),0,f.height()),w.css({top:l+"px",left:c+"px"}),l=T(v.height()-s.s*(v.height()/100),0,v.height()),y.css("top",l+"px"),v.css("backgroundColor",L({h:s.h,s:100,b:s.b})),u.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":c=T(5*s.h/12,0,150),l=T(f.height()-Math.ceil(s.s/(100/f.height())),0,f.height()),w.css({top:l+"px",left:c+"px"}),l=T(v.height()-s.b*(v.height()/100),0,v.height()),y.css("top",l+"px"),v.css("backgroundColor",L({h:s.h,s:s.s,b:100})),u.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:c=T(Math.ceil(s.s/(100/f.width())),0,f.width()),l=T(f.height()-Math.ceil(s.b/(100/f.height())),0,f.height()),w.css({top:l+"px",left:c+"px"}),l=T(v.height()-s.h/(360/v.height()),0,v.height()),y.css("top",l+"px"),f.css("backgroundColor",L({h:s.h,s:100,b:100}))}i.data("minicolors-initialized")&&I(i,r,a)}function I(i,t,o){var s,a,n,e=i.data("minicolors-settings"),r=i.data("minicolors-lastChange");if(!r||r.value!==t||r.opacity!==o){if(i.data("minicolors-lastChange",{value:t,opacity:o}),e.swatches&&0!==e.swatches.length){for(s=D(t)?z(t,!0):$(t),a=-1,n=0;n<e.swatches.length;++n)if(s.r===e.swatches[n].r&&s.g===e.swatches[n].g&&s.b===e.swatches[n].b&&s.a===e.swatches[n].a){a=n;break}i.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==a&&i.parent().find(".minicolors-swatches .minicolors-swatch").eq(n).addClass("selected")}e.change&&(e.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout(function(){e.change.call(i.get(0),t,o)},e.changeDelay))):e.change.call(i.get(0),t,o)),i.trigger("change").trigger("input")}}function M(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function S(i,t){return!(i=i.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/gi)||3!==i.length&&6!==i.length?"":(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i)}function z(i,t){var o=i.replace(/[^\d,.]/g,"").split(",");return o[0]=T(parseInt(o[0],10),0,255),o[1]=T(parseInt(o[1],10),0,255),o[2]=T(parseInt(o[2],10),0,255),o[3]&&(o[3]=T(parseFloat(o[3],10),0,1)),t?o[3]?{r:o[0],g:o[1],b:o[2],a:o[3]}:{r:o[0],g:o[1],b:o[2]}:void 0!==o[3]&&o[3]<=1?"rgba("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+")":"rgb("+o[0]+", "+o[1]+", "+o[2]+")"}function F(i,t){return D(i)?z(i):S(i,t)}function T(i,t,o){return i<t&&(i=t),o<i&&(i=o),i}function D(i){var t=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&4===t.length}function j(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===i.length?i[4]:"1"}function q(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}function u(i){var o=[i.r.toString(16),i.g.toString(16),i.b.toString(16)];return k.each(o,function(i,t){1===t.length&&(o[i]="0"+t)}),"#"+o.join("")}function L(i){return u((t=i,n={},e=Math.round(t.h),r=Math.round(255*t.s/100),c=Math.round(255*t.b/100),0===r?n.r=n.g=n.b=c:(a=e%60*((o=c)-(s=(255-r)*c/255))/60,360===e&&(e=0),e<60?(n.r=o,n.b=s,n.g=s+a):e<120?(n.g=o,n.b=s,n.r=o-a):e<180?(n.g=o,n.r=s,n.b=s+a):e<240?(n.b=o,n.r=s,n.g=o-a):e<300?(n.b=o,n.g=s,n.r=s+a):e<360?(n.r=o,n.g=s,n.b=o-a):(n.r=0,n.g=0,n.b=0)),{r:Math.round(n.r),g:Math.round(n.g),b:Math.round(n.b)}));var t,o,s,a,n,e,r,c}function $(i){return{r:(i=parseInt(-1<i.indexOf("#")?i.substring(1):i,16))>>16,g:(65280&i)>>8,b:255&i}}k.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},k.extend(k.fn,{minicolors:function(i,t){switch(i){case"destroy":return k(this).each(function(){l(k(this))}),k(this);case"hide":return d(),k(this);case"opacity":return void 0===t?k(this).attr("data-opacity"):(k(this).each(function(){p(k(this).attr("data-opacity",t))}),k(this));case"rgbObject":return e=k(this),c=k(e).attr("data-opacity"),(r=D(k(e).val())?z(k(e).val(),!0):$(S(k(e).val(),!0)))?(void 0!==c&&k.extend(r,{a:parseFloat(c)}),r):null;case"rgbString":case"rgbaString":return o=k(this),s="rgbaString"===i,n=k(o).attr("data-opacity"),(a=D(k(o).val())?z(k(o).val(),!0):$(S(k(o).val(),!0)))?(void 0===n&&(n=1),s?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(n)+")":"rgb("+a.r+", "+a.g+", "+a.b+")"):null;case"settings":return void 0===t?k(this).data("minicolors-settings"):(k(this).each(function(){var i=k(this).data("minicolors-settings")||{};l(k(this)),k(this).minicolors(k.extend(!0,i,t))}),k(this));case"show":return h(k(this).eq(0)),k(this);case"value":return void 0===t?k(this).val():(k(this).each(function(){"object"==typeof t&&"null"!==t?(t.opacity&&k(this).attr("data-opacity",T(t.opacity,0,1)),t.color&&k(this).val(t.color)):k(this).val(t),p(k(this))}),k(this));default:return"create"!==i&&(t=i),k(this).each(function(){!function(t,i){var o,s,a,n,e,r=k('<div class="minicolors" />'),c=k.minicolors.defaults;if(!t.data("minicolors-initialized")){if(i=k.extend(!0,{},c,i),r.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity),void 0!==i.position&&k.each(i.position.split(" "),function(){r.addClass("minicolors-position-"+this)}),o="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7",t.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",o).wrap(r).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(t.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),t.next(".minicolors-input-swatch").on("click",function(i){i.preventDefault(),t.focus()})),(n=t.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(n.addClass("minicolors-with-swatches"),s=k('<ul class="minicolors-swatches"></ul>').appendTo(n),e=0;e<i.swatches.length;++e)a=D(a=i.swatches[e])?z(a,!0):$(S(a,!0)),k('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(s).data("swatch-color",i.swatches[e]).find(".minicolors-swatch-color").css({backgroundColor:u(a),opacity:a.a}),i.swatches[e]=a;i.inline&&t.parent().addClass("minicolors-inline"),p(t,!1),t.data("minicolors-initialized",!0)}}(k(this),t)}),k(this)}var o,s,a,n,e,r,c}}),k([document,top.document]).on("mousedown.minicolors touchstart.minicolors",function(i){k(i.target).parents().add(i.target).hasClass("minicolors")||d()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(i){var t=k(this);i.preventDefault(),k(i.delegateTarget).data("minicolors-target",t),o(t,i,!0)}).on("mousemove.minicolors touchmove.minicolors",function(i){var t=k(i.delegateTarget).data("minicolors-target");t&&o(t,i)}).on("mouseup.minicolors touchend.minicolors",function(){k(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(i){i.preventDefault();var t=k(this),o=t.parents(".minicolors").find(".minicolors-input"),s=t.data("swatch-color");x(o,s,j(s)),p(o)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(i){var t=k(this).parent().find(".minicolors-input");i.preventDefault(),h(t)}).on("focus.minicolors",".minicolors-input",function(){var i=k(this);i.data("minicolors-initialized")&&h(i)}).on("blur.minicolors",".minicolors-input",function(){var i,t,o,s,a,n=k(this),e=n.data("minicolors-settings");n.data("minicolors-initialized")&&(i=e.keywords?k.map(e.keywords.split(","),function(i){return k.trim(i.toLowerCase())}):[],a=""!==n.val()&&-1<k.inArray(n.val().toLowerCase(),i)?n.val():null===(o=D(n.val())?z(n.val(),!0):(t=S(n.val(),!0))?$(t):null)?e.defaultValue:"rgb"===e.format?z(e.opacity?"rgba("+o.r+","+o.g+","+o.b+","+n.attr("data-opacity")+")":"rgb("+o.r+","+o.g+","+o.b+")"):u(o),s=e.opacity?n.attr("data-opacity"):1,"transparent"===a.toLowerCase()&&(s=0),n.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",s),n.val(a),""===n.val()&&n.val(F(e.defaultValue,!0)),n.val(M(n.val(),e.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(i){var t=k(this);if(t.data("minicolors-initialized"))switch(i.keyCode){case 9:d();break;case 13:case 27:d(),t.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var i=k(this);i.data("minicolors-initialized")&&p(i,!0)}).on("paste.minicolors",".minicolors-input",function(){var i=k(this);i.data("minicolors-initialized")&&setTimeout(function(){p(i,!0)},1)})});