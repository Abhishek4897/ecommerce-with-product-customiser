!function(e){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t=t||window,n&&n.fn.dataTable||(n=require("datatables.net")(t,n).$),e(n,t,t.document)}:e(jQuery,window,document)}(function(b,r,s,l){var i,p=b.fn.dataTable,e=0,c=0,u=p.ext.buttons,d=function(t,n){!0===n&&(n={}),b.isArray(n)&&(n={buttons:n}),this.c=b.extend(!0,{},d.defaults,n),n.buttons&&(this.c.buttons=n.buttons),this.s={dt:new p.Api(t),buttons:[],listenKeys:"",namespace:"dtb"+e++},this.dom={container:b("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};b.extend(d.prototype,{action:function(t,n){var e=this._nodeToButton(t);return n===l?e.conf.action:(e.conf.action=n,this)},active:function(t,n){var e=this._nodeToButton(t),o=this.c.dom.button.active,e=b(e.node);return n===l?e.hasClass(o):(e.toggleClass(o,n===l||n),this)},add:function(t,n){var e=this.s.buttons;if("string"==typeof n){for(var o=n.split("-"),e=this.s,i=0,s=o.length-1;i<s;i++)e=e.buttons[+o[i]];e=e.buttons,n=+o[o.length-1]}return this._expandButton(e,t,!1,n),this._draw(),this},container:function(){return this.dom.container},disable:function(t){return t=this._nodeToButton(t),b(t.node).addClass(this.c.dom.button.disabled),this},destroy:function(){b("body").off("keyup."+this.s.namespace);for(var t=this.s.buttons.slice(),n=0,e=t.length;n<e;n++)this.remove(t[n].node);for(this.dom.container.remove(),n=0,e=(t=this.s.dt.settings()[0]).length;n<e;n++)if(t.inst===this){t.splice(n,1);break}return this},enable:function(t,n){if(!1===n)return this.disable(t);var e=this._nodeToButton(t);return b(e.node).removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(t){return t=this._nodeToButton(t),b(t.node)},remove:function(t){var n=this._nodeToButton(t),e=this._nodeToHost(t),o=this.s.dt;if(n.buttons.length)for(var i=n.buttons.length-1;0<=i;i--)this.remove(n.buttons[i].node);return n.conf.destroy&&n.conf.destroy.call(o.button(t),o,b(t),n.conf),this._removeKey(n.conf),b(n.node).remove(),t=b.inArray(n,e),e.splice(t,1),this},text:function(t,n){function e(t){return"function"==typeof t?t(s,a,o.conf):t}var o=this._nodeToButton(t),i=this.c.dom.collection.buttonLiner,i=o.inCollection&&i&&i.tag?i.tag:this.c.dom.buttonLiner.tag,s=this.s.dt,a=b(o.node);return n===l?e(o.conf.text):(o.conf.text=n,i?a.children(i).html(e(n)):a.html(e(n)),this)},_constructor:function(){var e=this,t=this.s.dt,n=t.settings()[0],o=this.c.buttons;n._buttons||(n._buttons=[]),n._buttons.push({inst:this,name:this.c.name});for(var n=0,i=o.length;n<i;n++)this.add(o[n]);t.on("destroy",function(){e.destroy()}),b("body").on("keyup."+this.s.namespace,function(t){var n;s.activeElement&&s.activeElement!==s.body||(n=String.fromCharCode(t.keyCode).toLowerCase(),-1!==e.s.listenKeys.toLowerCase().indexOf(n)&&e._keypress(n,t))})},_addKey:function(t){t.key&&(this.s.listenKeys+=b.isPlainObject(t.key)?t.key.key:t.key)},_draw:function(t,n){t||(t=this.dom.container,n=this.s.buttons),t.children().detach();for(var e=0,o=n.length;e<o;e++)t.append(n[e].inserter),n[e].buttons&&n[e].buttons.length&&this._draw(n[e].collection,n[e].buttons)},_expandButton:function(t,n,e,o){for(var i=this.s.dt,s=0,a=(n=b.isArray(n)?n:[n]).length;s<a;s++){var r,u,c=this._resolveExtends(n[s]);c&&(b.isArray(c)?this._expandButton(t,c,e,o):(r=this._buildButton(c,e))&&(o!==l?(t.splice(o,0,r),o++):t.push(r),r.conf.buttons&&(u=this.c.dom.collection,r.collection=b("<"+u.tag+"/>").addClass(u.className),r.conf._collection=r.collection,this._expandButton(r.buttons,r.conf.buttons,!0,o)),c.init&&c.init.call(i.button(r.node),i,b(r.node),c),0))}},_buildButton:function(n,t){function e(t){return"function"==typeof t?t(a,u,n):t}var o=this.c.dom.button,i=this.c.dom.buttonLiner,s=this.c.dom.collection,a=this.s.dt;if(t&&s.button&&(o=s.button),t&&s.buttonLiner&&(i=s.buttonLiner),n.available&&!n.available(a,n))return!1;function r(t,n,e,o){o.action.call(n.button(e),t,n,e,o),b(n.table().node()).triggerHandler("buttons-action.dt",[n.button(e),n,e,o])}var u=b("<"+o.tag+"/>").addClass(o.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(t){t.preventDefault(),!u.hasClass(o.disabled)&&n.action&&r(t,a,u,n),u.blur()}).on("keyup.dtb",function(t){13===t.keyCode&&!u.hasClass(o.disabled)&&n.action&&r(t,a,u,n)});return"a"===o.tag.toLowerCase()&&u.attr("href","#"),i.tag?(s=b("<"+i.tag+"/>").html(e(n.text)).addClass(i.className),"a"===i.tag.toLowerCase()&&s.attr("href","#"),u.append(s)):u.html(e(n.text)),!1===n.enabled&&u.addClass(o.disabled),n.className&&u.addClass(n.className),n.titleAttr&&u.attr("title",n.titleAttr),n.namespace||(n.namespace=".dt-button-"+c++),i=(i=this.c.dom.buttonContainer)&&i.tag?b("<"+i.tag+"/>").addClass(i.className).append(u):u,this._addKey(n),{conf:n,node:u.get(0),inserter:i,buttons:[],inCollection:t,collection:null}},_nodeToButton:function(t,n){for(var e=0,o=(n=n||this.s.buttons).length;e<o;e++){if(n[e].node===t)return n[e];if(n[e].buttons.length){var i=this._nodeToButton(t,n[e].buttons);if(i)return i}}},_nodeToHost:function(t,n){for(var e=0,o=(n=n||this.s.buttons).length;e<o;e++){if(n[e].node===t)return n;if(n[e].buttons.length){var i=this._nodeToHost(t,n[e].buttons);if(i)return i}}},_keypress:function(s,a){var r=function(t){for(var n=0,e=t.length;n<e;n++){var o=t[n].conf,i=t[n].node;o.key&&(o.key!==s&&(!b.isPlainObject(o.key)||o.key.key!==s||o.key.shiftKey&&!a.shiftKey||o.key.altKey&&!a.altKey||o.key.ctrlKey&&!a.ctrlKey||o.key.metaKey&&!a.metaKey)||b(i).click()),t[n].buttons.length&&r(t[n].buttons)}};r(this.s.buttons)},_removeKey:function(t){var n;t.key&&(n=b.isPlainObject(t.key)?t.key.key:t.key,t=this.s.listenKeys.split(""),n=b.inArray(n,t),t.splice(n,1),this.s.listenKeys=t.join(""))},_resolveExtends:function(e){function t(t){for(var n=0;!b.isPlainObject(t)&&!b.isArray(t);){if(t===l)return;if("function"==typeof t){if(!(t=t(i,e)))return!1}else if("string"==typeof t){if(!u[t])throw"Unknown button type: "+t;t=u[t]}if(30<++n)throw"Buttons: Too many iterations"}return b.isArray(t)?t:b.extend({},t)}for(var n,o,i=this.s.dt,e=t(e);e&&e.extend;){if(!u[e.extend])throw"Cannot extend unknown button type: "+e.extend;var s=t(u[e.extend]);if(b.isArray(s))return s;if(!s)return!1;n=s.className,e=b.extend({},s,e),n&&e.className!==n&&(e.className=n+" "+e.className);var a=e.postfixButtons;if(a){for(e.buttons||(e.buttons=[]),n=0,o=a.length;n<o;n++)e.buttons.push(a[n]);e.postfixButtons=null}if(a=e.prefixButtons){for(e.buttons||(e.buttons=[]),n=0,o=a.length;n<o;n++)e.buttons.splice(n,0,a[n]);e.prefixButtons=null}e.extend=s.extend}return e}}),d.background=function(t,n,e){e===l&&(e=400),t?b("<div/>").addClass(n).css("display","none").appendTo("body").fadeIn(e):b("body > div."+n).fadeOut(e,function(){b(this).removeClass(n).remove()})},d.instanceSelector=function(t,o){if(!t)return b.map(o,function(t){return t.inst});var i=[],s=b.map(o,function(t){return t.name}),a=function(t){if(b.isArray(t))for(var n=0,e=t.length;n<e;n++)a(t[n]);else"string"==typeof t?-1!==t.indexOf(",")?a(t.split(",")):-1!==(t=b.inArray(b.trim(t),s))&&i.push(o[t].inst):"number"==typeof t&&i.push(o[t].inst)};return a(t),i},d.buttonSelector=function(t,n){for(var a=[],r=function(t,n,e){for(var o,i,s=0,a=n.length;s<a;s++)(o=n[s])&&(i=e!==l?e+s:s+"",t.push({node:o.node,name:o.conf.name,idx:i}),o.buttons&&r(t,o.buttons,i+"-"))},u=function(t,n){var e=[];if(r(e,n.s.buttons),i=b.map(e,function(t){return t.node}),b.isArray(t)||t instanceof b)for(i=0,s=t.length;i<s;i++)u(t[i],n);else if(null===t||t===l||"*"===t)for(i=0,s=e.length;i<s;i++)a.push({inst:n,node:e[i].node});else if("number"==typeof t)a.push({inst:n,node:n.s.buttons[t].node});else if("string"==typeof t)if(-1!==t.indexOf(","))for(i=0,s=(e=t.split(",")).length;i<s;i++)u(b.trim(e[i]),n);else if(t.match(/^\d+(\-\d+)*$/))i=b.map(e,function(t){return t.idx}),a.push({inst:n,node:e[b.inArray(t,i)].node});else if(-1!==t.indexOf(":name"))for(var o=t.replace(":name",""),i=0,s=e.length;i<s;i++)e[i].name===o&&a.push({inst:n,node:e[i].node});else b(i).filter(t).each(function(){a.push({inst:n,node:this})});else"object"==typeof t&&t.nodeName&&(-1!==(e=b.inArray(t,i))&&a.push({inst:n,node:i[e]}))},e=0,o=t.length;e<o;e++)u(n,t[e]);return a},d.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},d.version="1.2.4",b.extend(u,{collection:{text:function(t){return t.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(t,e,n,o){var t=n.offset(),i=b(e.table().container()),s=!1;b("div.dt-button-background").length&&(s=b(".dt-button-collection").offset(),b("body").trigger("click.dtb-collection")),o._collection.addClass(o.collectionLayout).css("display","none").appendTo("body").fadeIn(o.fade);var a=o._collection.css("position");s&&"absolute"===a?o._collection.css({top:s.top,left:s.left}):"absolute"===a?(o._collection.css({top:t.top+n.outerHeight(),left:t.left}),n=t.left+o._collection.outerWidth(),(i=i.offset().left+i.width())<n&&o._collection.css("left",t.left-(n-i))):((t=o._collection.height()/2)>b(r).height()/2&&(t=b(r).height()/2),o._collection.css("marginTop",-1*t)),o.background&&d.background(!0,o.backgroundClassName,o.fade),setTimeout(function(){b("div.dt-button-background").on("click.dtb-collection",function(){}),b("body").on("click.dtb-collection",function(t){var n=b.fn.addBack?"addBack":"andSelf";b(t.target).parents()[n]().filter(o._collection).length||(o._collection.fadeOut(o.fade,function(){o._collection.detach()}),b("div.dt-button-background").off("click.dtb-collection"),d.background(!1,o.backgroundClassName,o.fade),b("body").off("click.dtb-collection"),e.off("buttons-action.b-internal"))})},10),o.autoClose&&e.on("buttons-action.b-internal",function(){b("div.dt-button-background").click()})},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(t,n){return u.copyHtml5?"copyHtml5":u.copyFlash&&u.copyFlash.available(t,n)?"copyFlash":void 0},csv:function(t,n){return u.csvHtml5&&u.csvHtml5.available(t,n)?"csvHtml5":u.csvFlash&&u.csvFlash.available(t,n)?"csvFlash":void 0},excel:function(t,n){return u.excelHtml5&&u.excelHtml5.available(t,n)?"excelHtml5":u.excelFlash&&u.excelFlash.available(t,n)?"excelFlash":void 0},pdf:function(t,n){return u.pdfHtml5&&u.pdfHtml5.available(t,n)?"pdfHtml5":u.pdfFlash&&u.pdfFlash.available(t,n)?"pdfFlash":void 0},pageLength:function(t){function i(t){return t.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},t.page.len())}var t=t.settings()[0].aLengthMenu,n=b.isArray(t[0])?t[0]:t,e=b.isArray(t[0])?t[1]:t;return{extend:"collection",text:i,className:"buttons-page-length",autoClose:!0,buttons:b.map(n,function(i,t){return{text:e[t],className:"button-page-length",action:function(t,n){n.page.len(i).draw()},init:function(t,n,e){var o=this,n=function(){o.active(t.page.len()===i)};t.on("length.dt"+e.namespace,n),n()},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}}),init:function(t,n,e){var o=this;t.on("length.dt"+e.namespace,function(){o.text(i(t))})},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}}}),p.Api.register("buttons()",function(n,e){e===l&&(e=n,n=l),this.selector.buttonGroup=n;var t=this.iterator(!0,"table",function(t){if(t._buttons)return d.buttonSelector(d.instanceSelector(n,t._buttons),e)},!0);return t._groupSelector=n,t}),p.Api.register("button()",function(t,n){var e=this.buttons(t,n);return 1<e.length&&e.splice(1,e.length),e}),p.Api.registerPlural("buttons().active()","button().active()",function(n){return n===l?this.map(function(t){return t.inst.active(t.node)}):this.each(function(t){t.inst.active(t.node,n)})}),p.Api.registerPlural("buttons().action()","button().action()",function(n){return n===l?this.map(function(t){return t.inst.action(t.node)}):this.each(function(t){t.inst.action(t.node,n)})}),p.Api.register(["buttons().enable()","button().enable()"],function(n){return this.each(function(t){t.inst.enable(t.node,n)})}),p.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(t){t.inst.disable(t.node)})}),p.Api.registerPlural("buttons().nodes()","button().node()",function(){var n=b();return b(this.each(function(t){n=n.add(t.inst.node(t.node))})),n}),p.Api.registerPlural("buttons().text()","button().text()",function(n){return n===l?this.map(function(t){return t.inst.text(t.node)}):this.each(function(t){t.inst.text(t.node,n)})}),p.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(t){t.inst.node(t.node).trigger("click")})}),p.Api.registerPlural("buttons().containers()","buttons().container()",function(){var o=b(),i=this._groupSelector;return this.iterator(!0,"table",function(t){if(t._buttons)for(var n=0,e=(t=d.instanceSelector(i,t._buttons)).length;n<e;n++)o=o.add(t[n].container())}),o}),p.Api.register("button().add()",function(t,n){var e=this.context;return e.length&&((e=d.instanceSelector(this._groupSelector,e[0]._buttons)).length&&e[0].add(n,t)),this.button(this._groupSelector,t)}),p.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(t){t.destroy()}),this}),p.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(t){t.inst.remove(t.node)}),this}),p.Api.register("buttons.info()",function(t,n,e){var o=this;return!1===t?(b("#datatables_buttons_info").fadeOut(function(){b(this).remove()}),clearTimeout(i),i=null):(i&&clearTimeout(i),b("#datatables_buttons_info").length&&b("#datatables_buttons_info").remove(),b('<div id="datatables_buttons_info" class="dt-button-info"/>').html(t?"<h2>"+t+"</h2>":"").append(b("<div/>")["string"==typeof n?"html":"append"](n)).css("display","none").appendTo("body").fadeIn(),e!==l&&0!==e&&(i=setTimeout(function(){o.buttons.info(!1)},e))),this}),p.Api.register("buttons.exportData()",function(t){if(this.context.length){for(var e=new p.Api(this.context[0]),o=b.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(t){return n(t)},footer:function(t){return n(t)},body:function(t){return n(t)}}},t),n=function(t){return"string"!=typeof t||(o.stripHtml&&(t=t.replace(/<[^>]*>/g,"")),o.trim&&(t=t.replace(/^\s+|\s+$/g,"")),o.stripNewlines&&(t=t.replace(/\n/g," ")),o.decodeEntities&&(m.innerHTML=t,t=m.value)),t},t=e.columns(o.columns).indexes().map(function(t){var n=e.column(t).header();return o.format.header(n.innerHTML,t,n)}).toArray(),i=e.table().footer()?e.columns(o.columns).indexes().map(function(t){var n=e.column(t).footer();return o.format.footer(n?n.innerHTML:"",t,n)}).toArray():null,s=e.rows(o.rows,o.modifier).indexes().toArray(),s=(a=e.cells(s,o.columns)).render(o.orthogonal).toArray(),a=a.nodes().toArray(),r=t.length,u=0<r?s.length/r:0,c=Array(u),l=0,d=0;d<u;d++){for(var f=Array(r),h=0;h<r;h++)f[h]=o.format.body(s[l],d,h,a[l]),l++;c[d]=f}return{header:t,footer:i,body:c}}});var m=b("<textarea/>")[0];return b.fn.dataTable.Buttons=d,b.fn.DataTable.Buttons=d,b(s).on("init.dt plugin-init.dt",function(t,n){var e;"dt"!==t.namespace||(e=n.oInit.buttons||p.defaults.buttons)&&!n._buttons&&new d(n,e).container()}),p.ext.feature.push({fnInit:function(t){var n=(t=new p.Api(t)).init().buttons||p.defaults.buttons;return new d(t,n).container()},cFeature:"B"}),d});