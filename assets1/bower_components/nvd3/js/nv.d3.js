!function(){var pt={dev:!1};pt.tooltip=pt.tooltip||{},pt.utils=pt.utils||{},pt.models=pt.models||{},pt.charts={},pt.logs={},pt.dom={},"undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"==typeof d3&&(d3=require("d3")),pt.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return i.apply(this instanceof e&&t?this:t,r.concat(Array.prototype.slice.call(arguments)))}var r=Array.prototype.slice.call(arguments,1),i=this;return e.prototype=this.prototype,n.prototype=new e,n}),pt.dev&&(pt.dispatch.on("render_start",function(t){pt.logs.startTime=+new Date}),pt.dispatch.on("render_end",function(t){pt.logs.endTime=+new Date,pt.logs.totalTime=pt.logs.endTime-pt.logs.startTime,pt.log("total",pt.logs.totalTime)})),pt.log=function(){return pt.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):pt.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments),arguments[arguments.length-1]},pt.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},pt.render=function(r){r=r||1,pt.render.active=!0,pt.dispatch.render_start();var i=function(){for(var t,e,n=0;n<r&&(e=pt.render.queue[n]);n++)t=e.generate(),typeof e.callback==typeof Function&&e.callback(t);pt.render.queue.splice(0,n),pt.render.queue.length?setTimeout(i):(pt.dispatch.render_end(),pt.render.active=!1)};setTimeout(i)},pt.render.active=!1,pt.render.queue=[],pt.addGraph=function(t){typeof t==typeof Function&&(t={generate:t,callback:arguments[1]}),pt.render.queue.push(t),pt.render.active||pt.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=pt),"undefined"!=typeof window&&(window.nv=pt),pt.dom.write=function(t){return void 0!==window.fastdom?fastdom.mutate(t):t()},pt.dom.read=function(t){return void 0!==window.fastdom?fastdom.measure(t):t()},pt.interactiveGuideline=function(){"use strict";var u={left:0,top:0},i=null,o=null,c=d3.scale.linear(),d=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),a=!0,f=null,p=pt.models.tooltip(),h=window.ActiveXObject;function g(t){t.each(function(t){var e=d3.select(this),s=i||960,l=o||400,n=e.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([t]);function r(){var t=d3.mouse(this),e=t[0],n=t[1],r=!0,i=!1;if(h&&(e=d3.event.offsetX,n=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(r=!1),d3.event.target.className.baseVal.match("nv-legend")&&(i=!0)),r&&(e-=u.left,n-=u.top),"mouseout"===d3.event.type||e<0||n<0||s<e||l<n||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||i){if(h&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(p.nvPointerEventsClass)))return;return d.elementMouseout({mouseX:e,mouseY:n}),g.renderGuideLine(null),void p.hidden(!0)}p.hidden(!1);var o=void 0;if("function"==typeof c.rangeBands){var a=d3.bisect(c.range(),e)-1;if(!(c.range()[a]+c.rangeBand()>=e))return d.elementMouseout({mouseX:e,mouseY:n}),g.renderGuideLine(null),void p.hidden(!0);o=c.domain()[d3.bisect(c.range(),e)-1]}else o=c.invert(e);d.elementMousemove({mouseX:e,mouseY:n,pointXValue:o}),"dblclick"===d3.event.type&&d.elementDblclick({mouseX:e,mouseY:n,pointXValue:o}),"click"===d3.event.type&&d.elementClick({mouseX:e,mouseY:n,pointXValue:o}),"mousedown"===d3.event.type&&d.elementMouseDown({mouseX:e,mouseY:n,pointXValue:o}),"mouseup"===d3.event.type&&d.elementMouseUp({mouseX:e,mouseY:n,pointXValue:o})}n.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),f&&(f.on("touchmove",r).on("mousemove",r,!0).on("mouseout",r,!0).on("mousedown",r,!0).on("mouseup",r,!0).on("dblclick",r).on("click",r),g.guideLine=null,g.renderGuideLine=function(e){a&&(g.guideLine&&g.guideLine.attr("x1")===e||pt.dom.write(function(){var t=n.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[pt.utils.NaNtoZero(e)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",l).attr("y2",0),t.exit().remove()}))})})}return p.duration(0).hideDelay(0).hidden(!1),g.dispatch=d,g.tooltip=p,g.margin=function(t){return arguments.length?(u.top=void 0!==t.top?t.top:u.top,u.left=void 0!==t.left?t.left:u.left,g):u},g.width=function(t){return arguments.length?(i=t,g):i},g.height=function(t){return arguments.length?(o=t,g):o},g.xScale=function(t){return arguments.length?(c=t,g):c},g.showGuideLine=function(t){return arguments.length?(a=t,g):a},g.svgContainer=function(t){return arguments.length?(f=t,g):f},g},pt.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r="function"!=typeof n?function(t){return t.x}:n,i=d3.bisector(function(t,e){return r(t)-e}).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var s=d3.min([o+1,t.length-1]),l=r(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(a-e)?o:s},pt.nearestValueIndex=function(t,r,i){"use strict";var o=1/0,a=null;return t.forEach(function(t,e){var n=Math.abs(r-t);null!=t&&n<=o&&n<i&&(o=n,a=e)}),a},pt.models.tooltip=function(){"use strict";var e="nvtooltip-"+Math.floor(1e5*Math.random()),n=null,l="w",u=25,r=0,i=null,c=!0,d=200,f=null,p={left:null,top:null},o=!0,h=100,a=!0,s="nv-pointer-events-none",g=function(t,e){return t},v=function(t){return t},m=function(t,e){return t},y=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));a&&e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(v(t.value));var n=e.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),n.append("td").classed("key",!0).classed("total",function(t){return!!t.total}).html(function(t,e){return m(t.key,e)}),n.append("td").classed("value",!0).html(function(t,e){return g(t.value,e)}),n.filter(function(t,e){return void 0!==t.percent}).append("td").classed("percent",!0).html(function(t,e){return"("+d3.format("%")(t.percent)+")"}),n.selectAll("td").each(function(t){var e;t.highlight&&(e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6)))});var r=e.node().outerHTML;return void 0!==t.footer&&(r+="<div class='footer'>"+t.footer+"</div>"),r},x=function(){var t,e={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};return"none"!=getComputedStyle(document.body).transform&&(t=document.body.getBoundingClientRect(),e.left-=t.left,e.top-=t.top),e},t=function(t){if(t&&t.series){if(pt.utils.isArray(t.series))return!0;if(pt.utils.isObject(t.series))return t.series=[t.series],!0}return!1},b=function(){pt.dom.read(function(){var t,e,n,r,i=x(),o=function(t){var e,n,r,i=f.node().offsetHeight,o=f.node().offsetWidth,a=document.documentElement.clientWidth,s=document.documentElement.clientHeight;switch(l){case"e":e=-o-u,n=-i/2,t.left+e<0&&(e=u),(r=t.top+n)<0&&(n-=r),(r=t.top+n+i)>s&&(n-=r-s);break;case"w":e=u,n=-i/2,t.left+e+o>a&&(e=-o-u),(r=t.top+n)<0&&(n-=r),(r=t.top+n+i)>s&&(n-=r-s);break;case"n":e=-o/2-5,n=u,t.top+n+i>s&&(n=-i-u),(r=t.left+e)<0&&(e-=r),(r=t.left+e+o)>a&&(e-=r-a);break;case"s":e=-o/2,n=-i-u,t.top+n<0&&(n=u),(r=t.left+e)<0&&(e-=r),(r=t.left+e+o)>a&&(e-=r-a);break;case"center":e=-o/2,n=-i/2;break;default:n=e=0}return{left:e,top:n}}(i),a=i.left+o.left,s=i.top+o.top;c?f.interrupt().transition().delay(d).duration(0).style("opacity",0):(t="translate("+p.left+"px, "+p.top+"px)",e="translate("+Math.round(a)+"px, "+Math.round(s)+"px)",n=d3.interpolateString(t,e),r=f.style("opacity")<.1,f.interrupt().transition().duration(r?0:h).styleTween("transform",function(t){return n},"important").styleTween("-webkit-transform",function(t){return n}).style("-ms-transform",e).style("opacity",1)),p.left=a,p.top=s})};function k(){if(o&&t(n))return pt.dom.write(function(){f&&f.node()||((f=d3.select(document.body).select("#"+e).data([1])).enter().append("div").attr("class","nvtooltip "+(i||"xy-tooltip")).attr("id",e).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(s,!0).classed(s,!0),f.exit().remove());var t=y(n);t&&(f.node().innerHTML=t),b()}),k}return k.nvPointerEventsClass=s,k.options=pt.utils.optionsFunc.bind(k),k._options=Object.create({},{duration:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return l},set:function(t){l=t}},distance:{get:function(){return u},set:function(t){u=t}},snapDistance:{get:function(){return r},set:function(t){r=t}},classes:{get:function(){return i},set:function(t){i=t}},enabled:{get:function(){return o},set:function(t){o=t}},hideDelay:{get:function(){return d},set:function(t){d=t}},contentGenerator:{get:function(){return y},set:function(t){y=t}},valueFormatter:{get:function(){return g},set:function(t){g=t}},headerFormatter:{get:function(){return v},set:function(t){v=t}},keyFormatter:{get:function(){return m},set:function(t){m=t}},headerEnabled:{get:function(){return a},set:function(t){a=t}},position:{get:function(){return x},set:function(t){x=t}},chartContainer:{get:function(){return document.body},set:function(t){pt.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(t){pt.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){pt.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return c},set:function(t){c!=t&&(c=!!t,k())}},data:{get:function(){return n},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),n=t}},node:{get:function(){return f.node()},set:function(t){}},id:{get:function(){return e},set:function(t){}}}),pt.utils.initOptions(k),k},pt.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight):document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),t},pt.utils.isArray=Array.isArray,pt.utils.isObject=function(t){return null!==t&&"object"==typeof t},pt.utils.isFunction=function(t){return"function"==typeof t},pt.utils.isDate=function(t){return"[object Date]"===toString.call(t)},pt.utils.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},pt.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):pt.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},pt.utils.getColor=function(t){if(void 0===t)return pt.utils.defaultColor();if(pt.utils.isArray(t)){var r=d3.scale.ordinal().range(t);return function(t,e){var n=void 0===e?t:e;return t.color||r(n)}}return t},pt.utils.defaultColor=function(){return pt.utils.getColor(d3.scale.category20().range())},pt.utils.customTheme=function(r,i,o){i=i||function(t){return t.key};var a=(o=o||d3.scale.category20().range()).length;return function(t,e){var n=i(t);return pt.utils.isFunction(r[n])?r[n]():void 0!==r[n]?r[n]:(a=a||o.length,o[--a])}},pt.utils.pjax=function(n,r){function t(t){d3.html(t,function(t){var e=d3.select(r).node();e.parentNode.replaceChild(d3.select(t).select(r).node(),e),pt.utils.pjax(n,r)})}d3.selectAll(n).on("click",function(){history.pushState(this.href,this.textContent,this.href),t(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&t(d3.event.state)})},pt.utils.calcApproxTextWidth=function(t){if(pt.utils.isFunction(t.style)&&pt.utils.isFunction(t.text)){var e=parseInt(t.style("font-size").replace("px",""),10),n=t.text().length;return pt.utils.NaNtoZero(n*e*.5)}return 0},pt.utils.NaNtoZero=function(t){return!pt.utils.isNumber(t)||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},pt.utils.renderWatch=function(t,e){if(!(this instanceof pt.utils.renderWatch))return new pt.utils.renderWatch(t,e);var o=void 0!==e?e:250,a=[],s=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach(function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",function(t){e.__rendered=!0,s.renderEnd("model")}),a.indexOf(t)<0&&a.push(t)}),this},this.reset=function(t){void 0!==t&&(o=t),a=[]},this.transition=function(n,r,t){if(t=1<(r=1<arguments.length?[].slice.call(arguments,1):[]).length?r.pop():void 0!==o?o:250,n.__rendered=!1,a.indexOf(n)<0&&a.push(n),0===t)return n.__rendered=!0,n.delay=function(){return this},n.duration=function(){return this},n;0===n.length||n.every(function(t){return!t.length})?n.__rendered=!0:n.__rendered=!1;var i=0;return n.transition().duration(t).each(function(){++i}).each("end",function(t,e){0==--i&&(n.__rendered=!0,s.renderEnd.apply(this,r))})},this.renderEnd=function(){a.every(function(t){return t.__rendered})&&(a.forEach(function(t){t.__rendered=!1}),t.renderEnd.apply(this,arguments))}},pt.utils.deepExtend=function(o){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(t){for(var e in t){var n=pt.utils.isArray(o[e]),r=pt.utils.isObject(o[e]),i=pt.utils.isObject(t[e]);r&&!n&&i?pt.utils.deepExtend(o[e],t[e]):o[e]=t[e]}})},pt.utils.state=function(){if(!(this instanceof pt.utils.state))return new pt.utils.state;var n={},e=function(){},r=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){e(t,!0)}),this.getter=function(t){return r=t,this},this.setter=function(n,r){return r=r||function(){},e=function(t,e){n(t),e&&r()},this},this.init=function(t){i=i||{},pt.utils.deepExtend(i,t)};this.update=function(){i&&(e(i,!1),i=null),function(){var t=r();if(JSON.stringify(t)===JSON.stringify(n))return!1;for(var e in t)void 0===n[e]&&(n[e]={}),n[e]=t[e],0;return!0}.call(this)&&this.dispatch.change(n)}},pt.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){pt.utils.isFunction(this[t])&&this[t](e)}.bind(this)),this},pt.utils.calcTicksX=function(t,e){for(var n=1,r=0;r<e.length;r+=1)var i=e[r]&&e[r].values?e[r].values.length:0,n=n<i?i:n;return pt.log("Requested number of ticks: ",t),pt.log("Calculated max values to be: ",n),t=(t=n<t?t=n-1:t)<1?1:t,t=Math.floor(t),pt.log("Calculating tick count as: ",t),t},pt.utils.calcTicksY=function(t,e){return pt.utils.calcTicksX(t,e)},pt.utils.initOption=function(e,n){e._calls&&e._calls[n]?e[n]=e._calls[n]:(e[n]=function(t){return arguments.length?(e._overrides[n]=!0,e._options[n]=t,e):e._options[n]},e["_"+n]=function(t){return arguments.length?(e._overrides[n]||(e._options[n]=t),e):e._options[n]})},pt.utils.initOptions=function(t){t._overrides=t._overrides||{};var e=Object.getOwnPropertyNames(t._options||{}),n=Object.getOwnPropertyNames(t._calls||{}),e=e.concat(n);for(var r in e)pt.utils.initOption(t,e[r])},pt.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},pt.utils.arrayUnique=function(n){return n.sort().filter(function(t,e){return!e||t!=n[e-1]})},pt.utils.symbolMap=d3.map(),pt.utils.symbol=function(){var i,o=64;function e(t,e){var n=i.call(this,t,e),r=o.call(this,t,e);return-1!==d3.svg.symbolTypes.indexOf(n)?d3.svg.symbol().type(n).size(r)():pt.utils.symbolMap.get(n)(r)}return e.type=function(t){return arguments.length?(i=d3.functor(t),e):i},e.size=function(t){return arguments.length?(o=d3.functor(t),e):o},e},pt.utils.inheritOptions=function(t,e){var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{}),i=e._inherited||[],o=e._d3options||[],a=n.concat(r).concat(i).concat(o);a.unshift(e),a.unshift(t),d3.rebind.apply(this,a),t._inherited=pt.utils.arrayUnique(n.concat(r).concat(i).concat(n).concat(t._inherited||[])),t._d3options=pt.utils.arrayUnique(o.concat(t._d3options||[]))},pt.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},pt.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},pt.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},pt.utils.availableHeight=function(t,e,n){return Math.max(0,pt.utils.sanitizeHeight(t,e)-n.top-n.bottom)},pt.utils.availableWidth=function(t,e,n){return Math.max(0,pt.utils.sanitizeWidth(t,e)-n.left-n.right)},pt.utils.noData=function(t,e){var n=t.options(),r=n.margin(),i=n.noData(),o=null==i?["No Data Available."]:[i],a=pt.utils.availableHeight(null,e,r),s=pt.utils.availableWidth(null,e,r),l=r.left+s/2,u=r.top+a/2;e.selectAll("g").remove();var c=e.selectAll(".nv-noData").data(o);c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),c.attr("x",l).attr("y",u).text(function(t){return t})},pt.utils.wrapTicks=function(t,l){t.each(function(){for(var t,e=d3.select(this),n=e.text().split(/\s+/).reverse(),r=[],i=0,o=e.attr("y"),a=parseFloat(e.attr("dy")),s=e.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em");t=n.pop();)r.push(t),s.text(r.join(" ")),s.node().getComputedTextLength()>l&&(r.pop(),s.text(r.join(" ")),r=[t],s=e.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++i+a+"em").text(t))})},pt.utils.arrayEquals=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!pt.arrayEquals(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0},pt.models.axis=function(){"use strict";var g,v=d3.svg.axis(),m=d3.scale.linear(),y={top:0,right:0,bottom:0,left:0},x=75,e=60,b=null,k=!0,w=0,M=!0,A=!1,C=!1,S=null,E=0,W=void 0,n=250,t=d3.dispatch("renderEnd");v.scale(m).orient("bottom").tickFormat(function(t){return t});var F=pt.utils.renderWatch(t,n);function r(t){return F.reset(),t.each(function(t){var e=d3.select(this);pt.utils.initSVG(e);var n=e.selectAll("g.nv-wrap.nv-axis").data([t]),r=(n.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),n.select("g"));null!==S?v.ticks(S):"top"!=v.orient()&&"bottom"!=v.orient()||v.ticks(Math.abs(m.range()[1]-m.range()[0])/100),r.watchTransition(F,"axis").call(v),g=g||v.scale();var i=v.tickFormat();null==i&&(i=g.tickFormat());var o,a,s,l=r.selectAll("text.nv-axislabel").data([b||null]);switch(l.exit().remove(),void 0!==W&&r.selectAll("g").select("text").style("font-size",W),v.orient()){case"top":l.enter().append("text").attr("class","nv-axislabel"),a=0,1===m.range().length?a=C?2*m.range()[0]+m.rangeBand():0:2===m.range().length?a=C?m.range()[0]+m.range()[1]+m.rangeBand():m.range()[1]:2<m.range().length&&(a=m.range()[m.range().length-1]+(m.range()[1]-m.range()[0])),l.attr("text-anchor","middle").attr("y",0).attr("x",a/2),k&&((o=n.selectAll("g.nv-axisMaxMin").data(m.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),o.exit().remove(),o.attr("transform",function(t,e){return"translate("+pt.utils.NaNtoZero(m(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-v.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=i(t);return(""+n).match("NaN")?"":n}),o.watchTransition(F,"min-max top").attr("transform",function(t,e){return"translate("+pt.utils.NaNtoZero(m.range()[e])+",0)"}));break;case"bottom":c=E+36;var u,c,d=30,f=0,p=r.selectAll("g").select("text"),h="";w%360?(p.attr("transform",""),p.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;f=n.height,d<r&&(d=r)}),h="rotate("+w+" 0,"+(f/2+v.tickPadding())+")",c=((u=Math.abs(Math.sin(w*Math.PI/180)))?u*d:d)+30,p.attr("transform",h).style("text-anchor",0<w%360?"start":"end")):A?p.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"}):p.attr("transform","translate(0,0)"),l.enter().append("text").attr("class","nv-axislabel"),a=0,1===m.range().length?a=C?2*m.range()[0]+m.rangeBand():0:2===m.range().length?a=C?m.range()[0]+m.range()[1]+m.rangeBand():m.range()[1]:2<m.range().length&&(a=m.range()[m.range().length-1]+(m.range()[1]-m.range()[0])),l.attr("text-anchor","middle").attr("y",c).attr("x",a/2),k&&((o=n.selectAll("g.nv-axisMaxMin").data([m.domain()[0],m.domain()[m.domain().length-1]])).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),o.exit().remove(),o.attr("transform",function(t,e){return"translate("+pt.utils.NaNtoZero(m(t)+(C?m.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",v.tickPadding()).attr("transform",h).style("text-anchor",w?0<w%360?"start":"end":"middle").text(function(t,e){var n=i(t);return(""+n).match("NaN")?"":n}),o.watchTransition(F,"min-max bottom").attr("transform",function(t,e){return"translate("+pt.utils.NaNtoZero(m(t)+(C?m.rangeBand()/2:0))+",0)"}));break;case"right":l.enter().append("text").attr("class","nv-axislabel"),l.style("text-anchor",M?"middle":"begin").attr("transform",M?"rotate(90)":"").attr("y",M?12-Math.max(y.right,x)-(E||0):-10).attr("x",M?d3.max(m.range())/2:v.tickPadding()),k&&((o=n.selectAll("g.nv-axisMaxMin").data(m.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),o.exit().remove(),o.attr("transform",function(t,e){return"translate(0,"+pt.utils.NaNtoZero(m(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",v.tickPadding()).style("text-anchor","start").text(function(t,e){var n=i(t);return(""+n).match("NaN")?"":n}),o.watchTransition(F,"min-max right").attr("transform",function(t,e){return"translate(0,"+pt.utils.NaNtoZero(m.range()[e])+")"}).select("text").style("opacity",1));break;case"left":l.enter().append("text").attr("class","nv-axislabel"),l.style("text-anchor",M?"middle":"end").attr("transform",M?"rotate(-90)":"").attr("y",M?25-Math.max(y.left,x)-(E||0):-10).attr("x",M?-d3.max(m.range())/2:-v.tickPadding()),k&&((o=n.selectAll("g.nv-axisMaxMin").data(m.domain())).enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),o.exit().remove(),o.attr("transform",function(t,e){return"translate(0,"+pt.utils.NaNtoZero(g(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-v.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=i(t);return(""+n).match("NaN")?"":n}),o.watchTransition(F,"min-max right").attr("transform",function(t,e){return"translate(0,"+pt.utils.NaNtoZero(m.range()[e])+")"}).select("text").style("opacity",1))}l.text(function(t){return t}),!k||"left"!==v.orient()&&"right"!==v.orient()||(r.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(m(t)<m.range()[1]+10||m(t)>m.range()[0]-10)&&((1e-10<t||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),m.domain()[0]==m.domain()[1]&&0==m.domain()[0]&&n.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),!k||"top"!==v.orient()&&"bottom"!==v.orient()||(s=[],n.selectAll("g.nv-axisMaxMin").each(function(e,n){try{n?s.push(m(e)-this.getBoundingClientRect().width-4):s.push(m(e)+this.getBoundingClientRect().width+4)}catch(t){n?s.push(m(e)-4):s.push(m(e)+4)}}),r.selectAll("g").each(function(t,e){(m(t)<s[0]||m(t)>s[1])&&(1e-10<t||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})),r.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),g=m.copy()}),F.renderEnd("axis immediate"),r}return r.axis=v,r.dispatch=t,r.options=pt.utils.optionsFunc.bind(r),r._options=Object.create({},{axisLabelDistance:{get:function(){return E},set:function(t){E=t}},staggerLabels:{get:function(){return A},set:function(t){A=t}},rotateLabels:{get:function(){return w},set:function(t){w=t}},rotateYLabel:{get:function(){return M},set:function(t){M=t}},showMaxMin:{get:function(){return k},set:function(t){k=t}},axisLabel:{get:function(){return b},set:function(t){b=t}},height:{get:function(){return e},set:function(t){e=t}},ticks:{get:function(){return S},set:function(t){S=t}},width:{get:function(){return x},set:function(t){x=t}},fontSize:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return y},set:function(t){y.top=void 0!==t.top?t.top:y.top,y.right=void 0!==t.right?t.right:y.right,y.bottom=void 0!==t.bottom?t.bottom:y.bottom,y.left=void 0!==t.left?t.left:y.left}},duration:{get:function(){return n},set:function(t){n=t,F.reset(n)}},scale:{get:function(){return m},set:function(t){m=t,v.scale(m),C="function"==typeof m.rangeBands,pt.utils.inheritOptionsD3(r,m,["domain","range","rangeBand","rangeBands"])}}}),pt.utils.initOptions(r),pt.utils.inheritOptionsD3(r,v,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),pt.utils.inheritOptionsD3(r,m,["domain","range","rangeBand","rangeBands"]),r},pt.models.boxPlot=function(){"use strict";var f,p,h,g,v,m={top:0,right:0,bottom:0,left:0},y=960,x=500,e=Math.floor(1e4*Math.random()),b=d3.scale.ordinal(),k=d3.scale.linear(),w=function(t){return t.label},M=function(t){return t.values.Q1},A=function(t){return t.values.Q2},C=function(t){return t.values.Q3},S=function(t){return t.values.whisker_low},E=function(t){return t.values.whisker_high},W=function(t){return t.color},F=function(t){return t.values.outliers},N=function(t,e,n){return t},D=function(t,e,n){return t},O=function(t,e,n){},L=pt.utils.defaultColor(),_=null,B=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=250,P=null,I=pt.utils.renderWatch(B,T);function n(t){return I.reset(),t.each(function(n){var t=y-m.left-m.right,e=x-m.top-m.bottom;_=d3.select(this),pt.utils.initSVG(_),b.domain(f||n.map(function(t,e){return w(t,e)})).rangeBands(p||[0,t],.1);var s,r=[];h||(s=[],n.forEach(function(t,e){var n=M(t),r=C(t),i=S(t),o=E(t),a=F(t);a&&a.forEach(function(t,e){s.push(N(t,e,void 0))}),i&&s.push(i),n&&s.push(n),r&&s.push(r),o&&s.push(o)}),r=[d3.min(s),d3.max(s)]),k.domain(h||r),k.range(g||[e,0]),v=v||k.copy().range([k(0),k(0)]);var i=_.selectAll("g.nv-wrap").data([n]);i.enter().append("g").attr("class","nvd3 nv-wrap");i.attr("transform","translate("+m.left+","+m.top+")");var o=i.selectAll(".nv-boxplot").data(function(t){return t}),a=o.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);o.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(b(w(t,e))+.05*b.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),o.watchTransition(I,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,e){return e*T/n.length}).attr("transform",function(t,e){return"translate("+(b(w(t,e))+.05*b.rangeBand())+", 0)"}),o.exit().remove(),a.each(function(n,r){var i=d3.select(this);[S,E].forEach(function(t){var e;void 0!==t(n)&&null!==t(n)&&(e=t===S?"low":"high",i.append("line").style("stroke",W(n)||L(n,r)).attr("class","nv-boxplot-whisker nv-boxplot-"+e),i.append("line").style("stroke",W(n)||L(n,r)).attr("class","nv-boxplot-tick nv-boxplot-"+e))})});function l(){return null===P?.9*b.rangeBand():Math.min(75,.9*b.rangeBand())}function u(){return.45*b.rangeBand()-l()/2}function c(){return.45*b.rangeBand()+l()/2}[S,E].forEach(function(n){var t=n===S?"low":"high",r=n===S?M:C;o.select("line.nv-boxplot-whisker.nv-boxplot-"+t).watchTransition(I,"nv-boxplot: boxplots").attr("x1",.45*b.rangeBand()).attr("y1",function(t,e){return k(n(t))}).attr("x2",.45*b.rangeBand()).attr("y2",function(t,e){return k(r(t))}),o.select("line.nv-boxplot-tick.nv-boxplot-"+t).watchTransition(I,"nv-boxplot: boxplots").attr("x1",u).attr("y1",function(t,e){return k(n(t))}).attr("x2",c).attr("y2",function(t,e){return k(n(t))})}),[S,E].forEach(function(r){var t=r===S?"low":"high";a.selectAll(".nv-boxplot-"+t).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),B.elementMouseover({series:{key:r(t),color:W(t)||L(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),B.elementMouseout({series:{key:r(t),color:W(t)||L(t,n)},e:d3.event})}).on("mousemove",function(t,e){B.elementMousemove({e:d3.event})})}),a.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),B.elementMouseover({key:w(t),value:w(t),series:[{key:"Q3",value:C(t),color:W(t)||L(t,e)},{key:"Q2",value:A(t),color:W(t)||L(t,e)},{key:"Q1",value:M(t),color:W(t)||L(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),B.elementMouseout({key:w(t),value:w(t),series:[{key:"Q3",value:C(t),color:W(t)||L(t,e)},{key:"Q2",value:A(t),color:W(t)||L(t,e)},{key:"Q1",value:M(t),color:W(t)||L(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){B.elementMousemove({e:d3.event})}),o.select("rect.nv-boxplot-box").watchTransition(I,"nv-boxplot: boxes").attr("y",function(t,e){return k(C(t))}).attr("width",l).attr("x",u).attr("height",function(t,e){return Math.abs(k(C(t))-k(M(t)))||1}).style("fill",function(t,e){return W(t)||L(t,e)}).style("stroke",function(t,e){return W(t)||L(t,e)}),a.append("line").attr("class","nv-boxplot-median"),o.select("line.nv-boxplot-median").watchTransition(I,"nv-boxplot: boxplots line").attr("x1",u).attr("y1",function(t,e){return k(A(t))}).attr("x2",c).attr("y2",function(t,e){return k(A(t))});var d=o.selectAll(".nv-boxplot-outlier").data(function(t){return F(t)||[]});d.enter().append("circle").style("fill",function(t,e,n){return O(t,e,n)||L(t,n)}).style("stroke",function(t,e,n){return O(t,e,n)||L(t,n)}).style("z-index",9e3).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),B.elementMouseover({series:{key:D(t,e,n),color:O(t,e,n)||L(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),B.elementMouseout({series:{key:D(t,e,n),color:O(t,e,n)||L(t,n)},e:d3.event})}).on("mousemove",function(t,e){B.elementMousemove({e:d3.event})}),d.attr("class","nv-boxplot-outlier"),d.watchTransition(I,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*b.rangeBand()).attr("cy",function(t,e,n){return k(N(t,e,n))}).attr("r","3"),d.exit().remove(),b.copy(),v=k.copy()}),I.renderEnd("nv-boxplot immediate"),n}return n.dispatch=B,n.options=pt.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return y},set:function(t){y=t}},height:{get:function(){return x},set:function(t){x=t}},maxBoxWidth:{get:function(){return P},set:function(t){P=t}},x:{get:function(){return w},set:function(t){w=t}},q1:{get:function(){return M},set:function(t){M=t}},q2:{get:function(){return A},set:function(t){A=t}},q3:{get:function(){return C},set:function(t){C=t}},wl:{get:function(){return S},set:function(t){S=t}},wh:{get:function(){return E},set:function(t){E=t}},itemColor:{get:function(){return W},set:function(t){W=t}},outliers:{get:function(){return F},set:function(t){F=t}},outlierValue:{get:function(){return N},set:function(t){N=t}},outlierLabel:{get:function(){return D},set:function(t){D=t}},outlierColor:{get:function(){return O},set:function(t){O=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return k},set:function(t){k=t}},xDomain:{get:function(){return f},set:function(t){f=t}},yDomain:{get:function(){return h},set:function(t){h=t}},xRange:{get:function(){return p},set:function(t){p=t}},yRange:{get:function(){return g},set:function(t){g=t}},id:{get:function(){return e},set:function(t){e=t}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(t){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return m},set:function(t){m.top=void 0!==t.top?t.top:m.top,m.right=void 0!==t.right?t.right:m.right,m.bottom=void 0!==t.bottom?t.bottom:m.bottom,m.left=void 0!==t.left?t.left:m.left}},color:{get:function(){return L},set:function(t){L=pt.utils.getColor(t)}},duration:{get:function(){return T},set:function(t){T=t,I.reset(T)}}}),pt.utils.initOptions(n),n},pt.models.boxPlotChart=function(){"use strict";var c,d,f=pt.models.boxPlot(),p=pt.models.axis(),h=pt.models.axis(),g={top:15,right:10,bottom:50,left:60},v=null,m=null,e=pt.utils.getColor(),y=!0,x=!0,b=!1,k=!1,n=pt.models.tooltip(),w="No Data Available.",M=d3.dispatch("beforeUpdate","renderEnd"),A=250;p.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),h.orient(b?"right":"left").tickFormat(d3.format(",.1f")),n.duration(0);var r=pt.utils.renderWatch(M,A);function C(t){return r.reset(),r.models(f),y&&r.models(p),x&&r.models(h),t.each(function(t){var e=d3.select(this);pt.utils.initSVG(e);var n=(v||parseInt(e.style("width"))||960)-g.left-g.right,r=(m||parseInt(e.style("height"))||400)-g.top-g.bottom;if(C.update=function(){M.beforeUpdate(),e.transition().duration(A).call(C)},C.container=this,!t||!t.length){var i=e.selectAll(".nv-noData").data([w]);return i.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),i.attr("x",g.left+n/2).attr("y",g.top+r/2).text(function(t){return t}),C}e.selectAll(".nv-noData").remove(),c=f.xScale(),d=f.yScale().clamp(!0);var o,a=e.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([t]),s=a.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),l=s.append("defs"),u=a.select("g");s.append("g").attr("class","nv-x nv-axis"),s.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),s.append("g").attr("class","nv-barsWrap"),u.attr("transform","translate("+g.left+","+g.top+")"),b&&u.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),f.width(n).height(r),u.select(".nv-barsWrap").datum(t.filter(function(t){return!t.disabled})).transition().call(f),l.append("clipPath").attr("id","nv-x-label-clip-"+f.id()).append("rect"),u.select("#nv-x-label-clip-"+f.id()+" rect").attr("width",c.rangeBand()*(k?2:1)).attr("height",16).attr("x",-c.rangeBand()/(k?1:2)),y&&(p.scale(c).ticks(pt.utils.calcTicksX(n/100,t)).tickSize(-r,0),u.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),u.select(".nv-x.nv-axis").call(p),o=u.select(".nv-x.nv-axis").selectAll("g"),k&&o.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})),x&&(h.scale(d).ticks(Math.floor(r/36)).tickSize(-n,0),u.select(".nv-y.nv-axis").call(h)),u.select(".nv-zeroLine line").attr("x1",0).attr("x2",n).attr("y1",d(0)).attr("y2",d(0))}),r.renderEnd("nv-boxplot chart immediate"),C}return f.dispatch.on("elementMouseover.tooltip",function(t){n.data(t).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(t){n.data(t).hidden(!0)}),f.dispatch.on("elementMousemove.tooltip",function(t){n()}),C.dispatch=M,C.boxplot=f,C.xAxis=p,C.yAxis=h,C.tooltip=n,C.options=pt.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},staggerLabels:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},tooltipContent:{get:function(){return n},set:function(t){n=t}},noData:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},duration:{get:function(){return A},set:function(t){A=t,r.reset(A),f.duration(A),p.duration(A),h.duration(A)}},color:{get:function(){return e},set:function(t){e=pt.utils.getColor(t),f.color(e)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,h.orient(t?"right":"left")}}}),pt.utils.inheritOptions(C,f),pt.utils.initOptions(C),C},pt.models.bullet=function(){"use strict";var A={top:0,right:0,bottom:0,left:0},e="left",C=!1,S=function(t){return t.ranges},E=function(t){return t.markers?t.markers:[]},W=function(t){return t.markerLines?t.markerLines:[0]},F=function(t){return t.measures},N=function(t){return t.rangeLabels?t.rangeLabels:[]},D=function(t){return t.markerLabels?t.markerLabels:[]},O=function(t){return t.markerLineLabels?t.markerLineLabels:[]},L=function(t){return t.measureLabels?t.measureLabels:[]},_=[0],B=380,T=30,P=null,n=null,I=pt.utils.getColor(["#1f77b4"]),z=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),V=["Maximum","Mean","Minimum"],H=["Max","Avg","Min"],Y=1e3;function G(t,i){var o=t.slice();t.sort(function(t,e){var n=o.indexOf(t),r=o.indexOf(e);return d3.descending(i[n],i[r])})}function r(t){return t.each(function(t,e){var n=B-A.left-A.right,r=T-A.top-A.bottom;P=d3.select(this),pt.utils.initSVG(P);var i=S.call(this,t,e).slice(),o=E.call(this,t,e).slice(),a=W.call(this,t,e).slice(),s=F.call(this,t,e).slice(),l=N.call(this,t,e).slice(),u=D.call(this,t,e).slice(),c=O.call(this,t,e).slice(),d=L.call(this,t,e).slice();G(l,i),G(u,o),G(c,a),G(d,s),i.sort(d3.descending),o.sort(d3.descending),a.sort(d3.descending),s.sort(d3.descending);var f=d3.scale.linear().domain(d3.extent(d3.merge([_,i]))).range(C?[n,0]:[0,n]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(f.range());this.__chart__=f;d3.min(i),d3.max(i),i[1];for(var p=P.selectAll("g.nv-wrap.nv-bullet").data([t]),h=p.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),g=p.select("g"),e=0,v=i.length;e<v;e++){var m="nv-range nv-range"+e;e<=2&&(m=m+" nv-range"+H[e]),h.append("rect").attr("class",m)}h.append("rect").attr("class","nv-measure"),p.attr("transform","translate("+A.left+","+A.top+")");for(var y,x=function(t){return f(t<0?t:0)},e=0,v=i.length;e<v;e++){var b=i[e];g.select("rect.nv-range"+e).datum(b).attr("height",r).transition().duration(Y).attr("width",(y=b,Math.abs(f(y)-f(0)))).attr("x",x(b))}g.select("rect.nv-measure").style("fill",I).attr("height",r/3).attr("y",r/3).on("mouseover",function(){z.elementMouseover({value:s[0],label:d[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){z.elementMousemove({value:s[0],label:d[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){z.elementMouseout({value:s[0],label:d[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(Y).attr("width",s<0?f(0)-f(s[0]):f(s[0])-f(0)).attr("x",x(s));var k=r/6,w=o.map(function(t,e){return{value:t,label:u[e]}});h.selectAll("path.nv-markerTriangle").data(w).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+k+"L"+k+","+-k+" "+-k+","+-k+"Z").on("mouseover",function(t){z.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[f(t.value),r/2]})}).on("mousemove",function(t){z.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){z.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),g.selectAll("path.nv-markerTriangle").data(w).transition().duration(Y).attr("transform",function(t){return"translate("+f(t.value)+","+r/2+")"});var M=a.map(function(t,e){return{value:t,label:c[e]}});h.selectAll("line.nv-markerLine").data(M).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(t){return f(t.value)}).attr("y1","2").attr("x2",function(t){return f(t.value)}).attr("y2",r-2).on("mouseover",function(t){z.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[f(t.value),r/2]})}).on("mousemove",function(t){z.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){z.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),g.selectAll("line.nv-markerLine").data(M).transition().duration(Y).attr("x1",function(t){return f(t.value)}).attr("x2",function(t){return f(t.value)}),p.selectAll(".nv-range").on("mouseover",function(t,e){var n=l[e]||V[e];z.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})}).on("mousemove",function(){z.elementMousemove({value:s[0],label:d[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){var n=l[e]||V[e];z.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})})}),r}return r.dispatch=z,r.options=pt.utils.optionsFunc.bind(r),r._options=Object.create({},{ranges:{get:function(){return S},set:function(t){S=t}},markers:{get:function(){return E},set:function(t){E=t}},measures:{get:function(){return F},set:function(t){F=t}},forceX:{get:function(){return _},set:function(t){_=t}},width:{get:function(){return B},set:function(t){B=t}},height:{get:function(){return T},set:function(t){T=t}},tickFormat:{get:function(){return n},set:function(t){n=t}},duration:{get:function(){return Y},set:function(t){Y=t}},margin:{get:function(){return A},set:function(t){A.top=void 0!==t.top?t.top:A.top,A.right=void 0!==t.right?t.right:A.right,A.bottom=void 0!==t.bottom?t.bottom:A.bottom,A.left=void 0!==t.left?t.left:A.left}},orient:{get:function(){return e},set:function(t){C="right"==(e=t)||"bottom"==e}},color:{get:function(){return I},set:function(t){I=pt.utils.getColor(t)}}}),pt.utils.initOptions(r),r},pt.models.bulletChart=function(){"use strict";var b=pt.models.bullet(),e=pt.models.tooltip(),n="left",k=!1,w={top:5,right:40,bottom:20,left:120},M=function(t){return t.ranges},A=function(t){return t.markers?t.markers:[]},C=function(t){return t.measures},S=null,E=55,W=null,F=null,r=null,t=d3.dispatch();function N(x){return x.each(function(t,e){var n=d3.select(this);pt.utils.initSVG(n);var r=pt.utils.availableWidth(S,n,w),i=E-w.top-w.bottom;if(N.update=function(){N(x)},N.container=this,!t||!M.call(this,t,e))return pt.utils.noData(N,n),N;n.selectAll(".nv-noData").remove();var o=M.call(this,t,e).slice().sort(d3.descending),a=A.call(this,t,e).slice().sort(d3.descending),s=C.call(this,t,e).slice().sort(d3.descending),l=n.selectAll("g.nv-wrap.nv-bulletChart").data([t]),u=l.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),c=l.select("g");u.append("g").attr("class","nv-bulletWrap"),u.append("g").attr("class","nv-titles"),l.attr("transform","translate("+w.left+","+w.top+")");var d=d3.scale.linear().domain([0,Math.max(o[0],a[0]||0,s[0])]).range(k?[r,0]:[0,r]),f=this.__chart__||d3.scale.linear().domain([0,1/0]).range(d.range());this.__chart__=d;var p=u.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(E-w.top-w.bottom)/2+")");p.append("text").attr("class","nv-title").text(function(t){return t.title}),p.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),b.width(r).height(i);var h=c.select(".nv-bulletWrap");d3.transition(h).call(b);var g=W||d.tickFormat(r/100),v=c.selectAll("g.nv-tick").data(d.ticks(F||r/50),function(t){return this.textContent||g(t)}),m=v.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+f(t)+",0)"}).style("opacity",1e-6);m.append("line").attr("y1",i).attr("y2",7*i/6),m.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*i/6).text(g);var y=d3.transition(v).transition().duration(b.duration()).attr("transform",function(t){return"translate("+d(t)+",0)"}).style("opacity",1);y.select("line").attr("y1",i).attr("y2",7*i/6),y.select("text").attr("y",7*i/6),d3.transition(v.exit()).transition().duration(b.duration()).attr("transform",function(t){return"translate("+d(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),N}return e.duration(0).headerEnabled(!1),b.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},e.data(t).hidden(!1)}),b.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),b.dispatch.on("elementMousemove.tooltip",function(t){e()}),N.bullet=b,N.dispatch=t,N.tooltip=e,N.options=pt.utils.optionsFunc.bind(N),N._options=Object.create({},{ranges:{get:function(){return M},set:function(t){M=t}},markers:{get:function(){return A},set:function(t){A=t}},measures:{get:function(){return C},set:function(t){C=t}},width:{get:function(){return S},set:function(t){S=t}},height:{get:function(){return E},set:function(t){E=t}},tickFormat:{get:function(){return W},set:function(t){W=t}},ticks:{get:function(){return F},set:function(t){F=t}},noData:{get:function(){return r},set:function(t){r=t}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},orient:{get:function(){return n},set:function(t){k="right"==(n=t)||"bottom"==n}}}),pt.utils.inheritOptions(N,b),pt.utils.initOptions(N),N},pt.models.candlestickBar=function(){"use strict";var d,f,p,h,g,v={top:0,right:0,bottom:0,left:0},m=null,y=null,x=Math.floor(1e4*Math.random()),b=d3.scale.linear(),k=d3.scale.linear(),w=function(t){return t.x},M=function(t){return t.y},A=function(t){return t.open},C=function(t){return t.close},S=function(t){return t.high},E=function(t){return t.low},W=[],F=[],N=!1,D=!0,e=pt.utils.defaultColor(),n=!1,O=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function r(t){return t.each(function(t){d=d3.select(this);var e=pt.utils.availableWidth(m,d,v),n=pt.utils.availableHeight(y,d,v);pt.utils.initSVG(d);var r=e/t[0].values.length*.45;b.domain(f||d3.extent(t[0].values.map(w).concat(W))),N?b.range(h||[.5*e/t[0].values.length,e*(t[0].values.length-.5)/t[0].values.length]):b.range(h||[5+r/2,e-r/2-5]),k.domain(p||[d3.min(t[0].values.map(E).concat(F)),d3.max(t[0].values.map(S).concat(F))]).range(g||[n,0]),b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]-.01*b.domain()[0],b.domain()[1]+.01*b.domain()[1]]):b.domain([-1,1])),k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var i=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([t[0].values]),o=i.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),a=o.append("defs"),s=o.append("g"),l=i.select("g");s.append("g").attr("class","nv-ticks"),i.attr("transform","translate("+v.left+","+v.top+")"),d.on("click",function(t,e){O.chartClick({data:t,index:e,pos:d3.event,id:x})}),a.append("clipPath").attr("id","nv-chart-clip-path-"+x).append("rect"),i.select("#nv-chart-clip-path-"+x+" rect").attr("width",e).attr("height",n),l.attr("clip-path",D?"url(#nv-chart-clip-path-"+x+")":"");var u=i.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});u.exit().remove();var c=u.enter().append("g");u.attr("class",function(t,e,n){return(A(t,e)>C(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});c.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+b(w(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return k(S(t,e))}).attr("x2",0).attr("y2",function(t,e){return k(E(t,e))}),c.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(b(w(t,e))-r/2)+","+(k(M(t,e))-(A(t,e)>C(t,e)?k(C(t,e))-k(A(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",r).attr("height",function(t,e){var n=A(t,e),r=C(t,e);return r<n?k(r)-k(n):k(n)-k(r)});u.select(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+b(w(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return k(S(t,e))}).attr("x2",0).attr("y2",function(t,e){return k(E(t,e))}),u.select(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(b(w(t,e))-r/2)+","+(k(M(t,e))-(A(t,e)>C(t,e)?k(C(t,e))-k(A(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",r).attr("height",function(t,e){var n=A(t,e),r=C(t,e);return r<n?k(r)-k(n):k(n)-k(r)})}),r}return r.highlightPoint=function(t,e){r.clearHighlights(),d.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",e)},r.clearHighlights=function(){d.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},r.dispatch=O,r.options=pt.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return y},set:function(t){y=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return k},set:function(t){k=t}},xDomain:{get:function(){return f},set:function(t){f=t}},yDomain:{get:function(){return p},set:function(t){p=t}},xRange:{get:function(){return h},set:function(t){h=t}},yRange:{get:function(){return g},set:function(t){g=t}},forceX:{get:function(){return W},set:function(t){W=t}},forceY:{get:function(){return F},set:function(t){F=t}},padData:{get:function(){return N},set:function(t){N=t}},clipEdge:{get:function(){return D},set:function(t){D=t}},id:{get:function(){return x},set:function(t){x=t}},interactive:{get:function(){return n},set:function(t){n=t}},x:{get:function(){return w},set:function(t){w=t}},y:{get:function(){return M},set:function(t){M=t}},open:{get:function(){return A()},set:function(t){A=t}},close:{get:function(){return C()},set:function(t){C=t}},high:{get:function(){return S},set:function(t){S=t}},low:{get:function(){return E},set:function(t){E=t}},margin:{get:function(){return v},set:function(t){v.top=null!=t.top?t.top:v.top,v.right=null!=t.right?t.right:v.right,v.bottom=null!=t.bottom?t.bottom:v.bottom,v.left=null!=t.left?t.left:v.left}},color:{get:function(){return e},set:function(t){e=pt.utils.getColor(t)}}}),pt.utils.initOptions(r),r},pt.models.cumulativeLineChart=function(){"use strict";var b,k,w=pt.models.line(),M=pt.models.axis(),A=pt.models.axis(),C=pt.models.legend(),S=pt.models.legend(),E=pt.interactiveGuideline(),n=pt.models.tooltip(),W={top:30,right:30,bottom:50,left:60},F=null,N=pt.utils.defaultColor(),D=null,O=null,L=!0,_=!0,B=!0,T=!1,P=!0,I=!1,z=!0,V=w.id(),H=pt.utils.state(),Y=null,e=null,G=function(t){return t.average},X=d3.dispatch("stateChange","changeState","renderEnd"),j=250,R=!1;H.index=0,H.rescaleY=z,M.orient("bottom").tickPadding(7),A.orient(T?"right":"left"),n.valueFormatter(function(t,e){return A.tickFormat()(t,e)}).headerFormatter(function(t,e){return M.tickFormat()(t,e)}),S.updateState(!1);var Z=d3.scale.linear(),q={i:0,x:0},r=pt.utils.renderWatch(X,j),K=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:q.i,rescaleY:z}}},U=function(t){return function(n){void 0!==n.index&&(q.i=n.index),void 0!==n.rescaleY&&(z=n.rescaleY),void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function Q(t){return r.reset(),r.models(w),_&&r.models(M),B&&r.models(A),t.each(function(u){var t=d3.select(this);pt.utils.initSVG(t),t.classed("nv-chart-"+V,!0);var e,n=pt.utils.availableWidth(D,t,W),r=pt.utils.availableHeight(O,t,W);if(Q.update=function(){0===j?t.call(Q):t.transition().duration(j).call(Q)},Q.container=this,H.setter(U(u),Q.update).getter(K(u)).update(),H.disabled=u.map(function(t){return!!t.disabled}),!Y)for(e in Y={},H)H[e]instanceof Array?Y[e]=H[e].slice(0):Y[e]=H[e];var i,o,a=d3.behavior.drag().on("dragstart",function(t,e){d3.select(Q.container).style("cursor","ew-resize")}).on("drag",function(t,e){q.x=d3.event.x,q.i=Math.round(Z.invert(q.x)),x()}).on("dragend",function(t,e){d3.select(Q.container).style("cursor","auto"),H.index=q.i,X.stateChange(H)});if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return pt.utils.noData(Q,t),Q;t.selectAll(".nv-noData").remove(),b=w.xScale(),k=w.yScale(),z?w.yDomain(null):(i=u.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,w.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),o=[d3.min(i,function(t){return t[0]}),d3.max(i,function(t){return t[1]})],w.yDomain(o)),Z.domain([0,u[0].values.length-1]).range([0,n]).clamp(!0);var s,u=function(i,t){J=J||w.y();return t.map(function(t,e){if(!t.values)return t;var n=t.values[i];if(null==n)return t;var r=J(n,i);return r<-.95&&!R?t.tempDisabled=!0:(t.tempDisabled=!1,t.values=t.values.map(function(t,e){return t.display={y:(J(t,e)-r)/(1+r)},t})),t})}(q.i,u),l=I?"none":"all",c=t.selectAll("g.nv-wrap.nv-cumulativeLine").data([u]),d=c.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),f=c.select("g");d.append("g").attr("class","nv-interactive"),d.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),d.append("g").attr("class","nv-y nv-axis"),d.append("g").attr("class","nv-background"),d.append("g").attr("class","nv-linesWrap").style("pointer-events",l),d.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),d.append("g").attr("class","nv-legendWrap"),d.append("g").attr("class","nv-controlsWrap"),L?(C.width(n),f.select(".nv-legendWrap").datum(u).call(C),F||C.height()===W.top||(W.top=C.height(),r=pt.utils.availableHeight(O,t,W)),f.select(".nv-legendWrap").attr("transform","translate(0,"+-W.top+")")):f.select(".nv-legendWrap").selectAll("*").remove(),P?(s=[{key:"Re-scale y-axis",disabled:!z}],S.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),f.select(".nv-controlsWrap").datum(s).attr("transform","translate(0,"+-W.top+")").call(S)):f.select(".nv-controlsWrap").selectAll("*").remove(),c.attr("transform","translate("+W.left+","+W.top+")"),T&&f.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)");var p=u.filter(function(t){return t.tempDisabled});c.select(".tempDisabled").remove(),p.length&&c.append("text").attr("class","tempDisabled").attr("x",n/2).attr("y","-.71em").style("text-anchor","end").text(p.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),I&&(E.width(n).height(r).margin({left:W.left,top:W.top}).svgContainer(t).xScale(b),c.select(".nv-interactive").call(E)),d.select(".nv-background").append("rect"),f.select(".nv-background rect").attr("width",n).attr("height",r),w.y(function(t){return t.display.y}).width(n).height(r).color(u.map(function(t,e){return t.color||N(t,e)}).filter(function(t,e){return!u[e].disabled&&!u[e].tempDisabled}));var h=f.select(".nv-linesWrap").datum(u.filter(function(t){return!t.disabled&&!t.tempDisabled}));h.call(w),u.forEach(function(t,e){t.seriesIndex=e});function g(t){var e=k(G(t));return e<0?0:r<e?r:e}var v=u.filter(function(t){return!t.disabled&&!!G(t)}),m=f.select(".nv-avgLinesWrap").selectAll("line").data(v,function(t){return t.key});m.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return w.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",n).attr("y1",g).attr("y2",g),m.style("stroke-opacity",function(t){var e=k(G(t));return e<0||r<e?0:1}).attr("x1",0).attr("x2",n).attr("y1",g).attr("y2",g),m.exit().remove();var y=h.selectAll(".nv-indexLine").data([q]);function x(){y.data([q]);var t=Q.duration();Q.duration(0),Q.update(),Q.duration(t)}y.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(a),y.attr("transform",function(t){return"translate("+Z(t.i)+",0)"}).attr("height",r),_&&(M.scale(b)._ticks(pt.utils.calcTicksX(n/70,u)).tickSize(-r,0),f.select(".nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")"),f.select(".nv-x.nv-axis").call(M)),B&&(A.scale(k)._ticks(pt.utils.calcTicksY(r/36,u)).tickSize(-n,0),f.select(".nv-y.nv-axis").call(A)),f.select(".nv-background rect").on("click",function(){q.x=d3.mouse(this)[0],q.i=Math.round(Z.invert(q.x)),H.index=q.i,X.stateChange(H),x()}),w.dispatch.on("elementClick",function(t){q.i=t.pointIndex,q.x=Z(q.i),H.index=q.i,X.stateChange(H),x()}),S.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,z=!t.disabled,H.rescaleY=z,X.stateChange(H),Q.update()}),C.dispatch.on("stateChange",function(t){for(var e in t)H[e]=t[e];X.stateChange(H),Q.update()}),E.dispatch.on("elementMousemove",function(r){w.clearHighlights();var i,o,a,t,e,n,s=[];u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){o=pt.interactiveBisect(t.values,r.pointXValue,Q.x()),w.highlightPoint(e,o,!0);var n=t.values[o];void 0!==n&&(void 0===i&&(i=n),void 0===a&&(a=Q.xScale()(Q.x()(n,o))),s.push({key:t.key,value:Q.y()(n,o),color:N(t,t.seriesIndex)}))}),2<s.length&&(t=Q.yScale().invert(r.mouseY),e=.03*Math.abs(Q.yScale().domain()[0]-Q.yScale().domain()[1]),null!==(n=pt.nearestValueIndex(s.map(function(t){return t.value}),t,e))&&(s[n].highlight=!0));var l=M.tickFormat()(Q.x()(i,o),o);E.tooltip.valueFormatter(function(t,e){return A.tickFormat()(t)}).data({value:l,series:s})(),E.renderGuideLine(a)}),E.dispatch.on("elementMouseout",function(t){w.clearHighlights()}),X.on("changeState",function(n){void 0!==n.disabled&&(u.forEach(function(t,e){t.disabled=n.disabled[e]}),H.disabled=n.disabled),void 0!==n.index&&(q.i=n.index,q.x=Z(q.i),H.index=n.index,y.data([q])),void 0!==n.rescaleY&&(z=n.rescaleY),Q.update()})}),r.renderEnd("cumulativeLineChart immediate"),Q}w.dispatch.on("elementMouseover.tooltip",function(t){var e={x:Q.x()(t.point),y:Q.y()(t.point),color:t.point.color};t.point=e,n.data(t).hidden(!1)}),w.dispatch.on("elementMouseout.tooltip",function(t){n.hidden(!0)});var J=null;return Q.dispatch=X,Q.lines=w,Q.legend=C,Q.controls=S,Q.xAxis=M,Q.yAxis=A,Q.interactiveLayer=E,Q.state=H,Q.tooltip=n,Q.options=pt.utils.optionsFunc.bind(Q),Q._options=Object.create({},{width:{get:function(){return D},set:function(t){D=t}},height:{get:function(){return O},set:function(t){O=t}},rescaleY:{get:function(){return z},set:function(t){z=t}},showControls:{get:function(){return P},set:function(t){P=t}},showLegend:{get:function(){return L},set:function(t){L=t}},average:{get:function(){return G},set:function(t){G=t}},defaultState:{get:function(){return Y},set:function(t){Y=t}},noData:{get:function(){return e},set:function(t){e=t}},showXAxis:{get:function(){return _},set:function(t){_=t}},showYAxis:{get:function(){return B},set:function(t){B=t}},noErrorCheck:{get:function(){return R},set:function(t){R=t}},margin:{get:function(){return W},set:function(t){void 0!==t.top&&(W.top=t.top,F=t.top),W.right=void 0!==t.right?t.right:W.right,W.bottom=void 0!==t.bottom?t.bottom:W.bottom,W.left=void 0!==t.left?t.left:W.left}},color:{get:function(){return N},set:function(t){N=pt.utils.getColor(t),C.color(N)}},useInteractiveGuideline:{get:function(){return I},set:function(t){!0===(I=t)&&(Q.interactive(!1),Q.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return T},set:function(t){T=t,A.orient(t?"right":"left")}},duration:{get:function(){return j},set:function(t){j=t,w.duration(j),M.duration(j),A.duration(j),r.reset(j)}}}),pt.utils.inheritOptions(Q,w),pt.utils.initOptions(Q),Q},pt.models.discreteBar=function(){"use strict";var u,c,d,f,p,h,g={top:0,right:0,bottom:0,left:0},v=960,m=500,e=Math.floor(1e4*Math.random()),y=d3.scale.ordinal(),x=d3.scale.linear(),b=function(t){return t.x},k=function(t){return t.y},w=[0],M=pt.utils.defaultColor(),A=!1,C=d3.format(",.2f"),S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),E="discreteBar",n=250,W=pt.utils.renderWatch(S,n);function r(t){return W.reset(),t.each(function(t){var e=v-g.left-g.right,n=m-g.top-g.bottom;u=d3.select(this),pt.utils.initSVG(u),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var r=c&&d?[]:t.map(function(t){return t.values.map(function(t,e){return{x:b(t,e),y:k(t,e),y0:t.y0}})});y.domain(c||d3.merge(r).map(function(t){return t.x})).rangeBands(f||[0,e],.1),x.domain(d||d3.extent(d3.merge(r).map(function(t){return t.y}).concat(w))),A?x.range(p||[n-(x.domain()[0]<0?12:0),0<x.domain()[1]?12:0]):x.range(p||[n,0]),h=h||x.copy().range([x(0),x(0)]);var i=u.selectAll("g.nv-wrap.nv-discretebar").data([t]),o=i.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");i.select("g");o.append("g").attr("class","nv-groups"),i.attr("transform","translate("+g.left+","+g.top+")");var a=i.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});a.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),a.exit().watchTransition(W,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),a.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),a.watchTransition(W,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var s=a.selectAll("g.nv-bar").data(function(t){return t.values});s.exit().remove();var l=s.enter().append("g").attr("transform",function(t,e,n){return"translate("+(y(b(t,e))+.05*y.rangeBand())+", "+x(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),S.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),S.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){S.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){S.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){S.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});l.append("rect").attr("height",0).attr("width",.9*y.rangeBand()/t.length),A?(l.append("text").attr("text-anchor","middle"),s.select("text").text(function(t,e){return C(k(t,e))}).watchTransition(W,"discreteBar: bars text").attr("x",.9*y.rangeBand()/2).attr("y",function(t,e){return k(t,e)<0?x(k(t,e))-x(0)+12:-4})):s.selectAll("text").remove(),s.attr("class",function(t,e){return k(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||M(t,e)}).style("stroke",function(t,e){return t.color||M(t,e)}).select("rect").attr("class",E).watchTransition(W,"discreteBar: bars rect").attr("width",.9*y.rangeBand()/t.length),s.watchTransition(W,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(y(b(t,e))+.05*y.rangeBand())+", "+(k(t,e)<0?x(0):x(0)-x(k(t,e))<1?x(0)-1:x(k(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(x(k(t,e))-x(0)),1)}),y.copy(),h=x.copy()}),W.renderEnd("discreteBar immediate"),r}return r.dispatch=S,r.options=pt.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},forceY:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return b},set:function(t){b=t}},y:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return y},set:function(t){y=t}},yScale:{get:function(){return x},set:function(t){x=t}},xDomain:{get:function(){return c},set:function(t){c=t}},yDomain:{get:function(){return d},set:function(t){d=t}},xRange:{get:function(){return f},set:function(t){f=t}},yRange:{get:function(){return p},set:function(t){p=t}},valueFormat:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return e},set:function(t){e=t}},rectClass:{get:function(){return E},set:function(t){E=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return M},set:function(t){M=pt.utils.getColor(t)}},duration:{get:function(){return n},set:function(t){n=t,W.reset(n)}}}),pt.utils.initOptions(r),r},pt.models.discreteBarChart=function(){"use strict";var u,c,d=pt.models.discreteBar(),f=pt.models.axis(),p=pt.models.axis(),h=pt.models.legend(),e=pt.models.tooltip(),g={top:15,right:10,bottom:50,left:60},v=null,m=null,y=null,n=pt.utils.getColor(),x=!1,b=!0,k=!0,w=!1,M=!1,A=!1,C=0,r=null,S=d3.dispatch("beforeUpdate","renderEnd"),E=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),p.orient(w?"right":"left").tickFormat(d3.format(",.1f")),e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).keyFormatter(function(t,e){return f.tickFormat()(t,e)});var i=pt.utils.renderWatch(S,E);function W(t){return i.reset(),i.models(d),b&&i.models(f),k&&i.models(p),t.each(function(t){var e=d3.select(this);pt.utils.initSVG(e);var n=pt.utils.availableWidth(m,e,g),r=pt.utils.availableHeight(y,e,g);if(W.update=function(){S.beforeUpdate(),e.transition().duration(E).call(W)},W.container=this,!(t&&t.length&&t.filter(function(t){return t.values.length}).length))return pt.utils.noData(W,e),W;e.selectAll(".nv-noData").remove(),u=d.xScale(),c=d.yScale().clamp(!0);var i,o=e.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([t]),a=o.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),s=a.append("defs"),l=o.select("g");a.append("g").attr("class","nv-x nv-axis"),a.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),a.append("g").attr("class","nv-barsWrap"),a.append("g").attr("class","nv-legendWrap"),l.attr("transform","translate("+g.left+","+g.top+")"),x?(h.width(n),l.select(".nv-legendWrap").datum(t).call(h),v||h.height()===g.top||(g.top=h.height(),r=pt.utils.availableHeight(y,e,g)),o.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")")):l.select(".nv-legendWrap").selectAll("*").remove(),w&&l.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),d.width(n).height(r),l.select(".nv-barsWrap").datum(t.filter(function(t){return!t.disabled})).transition().call(d),s.append("clipPath").attr("id","nv-x-label-clip-"+d.id()).append("rect"),l.select("#nv-x-label-clip-"+d.id()+" rect").attr("width",u.rangeBand()*(M?2:1)).attr("height",16).attr("x",-u.rangeBand()/(M?1:2)),b&&(f.scale(u)._ticks(pt.utils.calcTicksX(n/100,t)).tickSize(-r,0),l.select(".nv-x.nv-axis").attr("transform","translate(0,"+(c.range()[0]+(d.showValues()&&c.domain()[0]<0?16:0))+")"),l.select(".nv-x.nv-axis").call(f),i=l.select(".nv-x.nv-axis").selectAll("g"),M&&i.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),C&&i.selectAll(".tick text").attr("transform","rotate("+C+" 0,0)").style("text-anchor",0<C?"start":"end"),A&&l.selectAll(".tick text").call(pt.utils.wrapTicks,W.xAxis.rangeBand())),k&&(p.scale(c)._ticks(pt.utils.calcTicksY(r/36,t)).tickSize(-n,0),l.select(".nv-y.nv-axis").call(p)),l.select(".nv-zeroLine line").attr("x1",0).attr("x2",w?-n:n).attr("y1",c(0)).attr("y2",c(0))}),i.renderEnd("discreteBar chart immediate"),W}return d.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:W.x()(t.data),value:W.y()(t.data),color:t.color},e.data(t).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(t){e()}),W.dispatch=S,W.discretebar=d,W.legend=h,W.xAxis=f,W.yAxis=p,W.tooltip=e,W.options=pt.utils.optionsFunc.bind(W),W._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return y},set:function(t){y=t}},showLegend:{get:function(){return x},set:function(t){x=t}},staggerLabels:{get:function(){return M},set:function(t){M=t}},rotateLabels:{get:function(){return C},set:function(t){C=t}},wrapLabels:{get:function(){return A},set:function(t){A=!!t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return r},set:function(t){r=t}},margin:{get:function(){return g},set:function(t){void 0!==t.top&&(g.top=t.top,v=t.top),g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},duration:{get:function(){return E},set:function(t){E=t,i.reset(E),d.duration(E),f.duration(E),p.duration(E)}},color:{get:function(){return n},set:function(t){n=pt.utils.getColor(t),d.color(n),h.color(n)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,p.orient(t?"right":"left")}}}),pt.utils.inheritOptions(W,d),pt.utils.initOptions(W),W},pt.models.distribution=function(){"use strict";var s,l={top:0,right:0,bottom:0,left:0},e=400,u=8,c="x",d=function(t){return t[c]},f=pt.utils.defaultColor(),p=d3.scale.linear(),n=250,t=d3.dispatch("renderEnd"),h=pt.utils.renderWatch(t,n);function r(t){return h.reset(),t.each(function(t){"x"===c?(l.left,l.right):(l.top,l.bottom);var e="x"==c?"y":"x",n=d3.select(this);pt.utils.initSVG(n),s=s||p;var r=n.selectAll("g.nv-distribution").data([t]),i=(r.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),r.select("g"));r.attr("transform","translate("+l.left+","+l.top+")");var o=i.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});o.enter().append("g"),o.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return f(t,e)});var a=o.selectAll("line.nv-dist"+c).data(function(t){return t.values});a.enter().append("line").attr(c+"1",function(t,e){return s(d(t,e))}).attr(c+"2",function(t,e){return s(d(t,e))}),h.transition(o.exit().selectAll("line.nv-dist"+c),"dist exit").attr(c+"1",function(t,e){return p(d(t,e))}).attr(c+"2",function(t,e){return p(d(t,e))}).style("stroke-opacity",0).remove(),a.attr("class",function(t,e){return"nv-dist"+c+" nv-dist"+c+"-"+e}).attr(e+"1",0).attr(e+"2",u),h.transition(a,"dist").attr(c+"1",function(t,e){return p(d(t,e))}).attr(c+"2",function(t,e){return p(d(t,e))}),s=p.copy()}),h.renderEnd("distribution immediate"),r}return r.options=pt.utils.optionsFunc.bind(r),r.dispatch=t,r.margin=function(t){return arguments.length?(l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left,r):l},r.width=function(t){return arguments.length?(e=t,r):e},r.axis=function(t){return arguments.length?(c=t,r):c},r.size=function(t){return arguments.length?(u=t,r):u},r.getData=function(t){return arguments.length?(d=d3.functor(t),r):d},r.scale=function(t){return arguments.length?(p=t,r):p},r.color=function(t){return arguments.length?(f=pt.utils.getColor(t),r):f},r.duration=function(t){return arguments.length?(n=t,h.reset(n),r):n},r},pt.models.focus=function(f){"use strict";var p,h,f=f||pt.models.line(),g=pt.models.axis(),v=pt.models.axis(),m=d3.svg.brush(),y={top:10,right:0,bottom:30,left:0},x=pt.utils.defaultColor(),b=null,k=70,w=!0,M=!1,A=!1,C=null,S=250,E=d3.dispatch("brush","onBrush","renderEnd"),W=!0;f.interactive(!1),f.pointActive(function(t){return!1});var e=pt.utils.renderWatch(E,S);function F(t){return e.reset(),e.models(f),w&&e.models(g),M&&e.models(v),t.each(function(n){var t=d3.select(this);pt.utils.initSVG(t);var i=pt.utils.availableWidth(b,t,y),o=k-y.top-y.bottom;F.update=function(){0===S?t.call(F):t.transition().duration(S).call(F)},F.container=this,p=f.xScale(),h=f.yScale();var e=t.selectAll("g.nv-focus").data([n]),r=e.enter().append("g").attr("class","nvd3 nv-focus").append("g"),a=e.select("g");e.attr("transform","translate("+y.left+","+y.top+")"),r.append("g").attr("class","nv-background").append("rect"),r.append("g").attr("class","nv-x nv-axis"),r.append("g").attr("class","nv-y nv-axis"),r.append("g").attr("class","nv-contentWrap"),r.append("g").attr("class","nv-brushBackground"),r.append("g").attr("class","nv-x nv-brush"),A&&a.select(".nv-y.nv-axis").attr("transform","translate("+i+",0)"),a.select(".nv-background rect").attr("width",i).attr("height",o),f.width(i).height(o).color(n.map(function(t,e){return t.color||x(t,e)}).filter(function(t,e){return!n[e].disabled}));var s=a.select(".nv-contentWrap").datum(n.filter(function(t){return!t.disabled}));d3.transition(s).call(f),m.x(p).on("brush",function(){d(W)}),m.on("brushend",function(){W||E.onBrush(m.empty()?p.domain():m.extent())}),C&&m.extent(C);var l=a.select(".nv-brushBackground").selectAll("g").data([C||m.extent()]),u=l.enter().append("g");u.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",o),u.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",o);var c=a.select(".nv-x.nv-brush").call(m);function d(t){C=m.empty()?null:m.extent();var e=m.empty()?p.domain():m.extent();E.brush({extent:e,brush:m}),m.empty()||m.extent(C),l.data([m.empty()?p.domain():C]).each(function(t,e){var n=p(t[0])-p.range()[0],r=i-p(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",p(t[1])).attr("width",r<0?0:r)}),t&&E.onBrush(e)}c.selectAll("rect").attr("height",o),c.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=o/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(6+r)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(8+r)+"V"+(2*r-8)+"M"+4.5*n+","+(8+r)+"V"+(2*r-8)}),d(!0),a.select(".nv-background rect").attr("width",i).attr("height",o),w&&(g.scale(p)._ticks(pt.utils.calcTicksX(i/100,n)).tickSize(-o,0),a.select(".nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")"),d3.transition(a.select(".nv-x.nv-axis")).call(g)),M&&(v.scale(h)._ticks(pt.utils.calcTicksY(o/36,n)).tickSize(-i,0),d3.transition(a.select(".nv-y.nv-axis")).call(v)),a.select(".nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")")}),e.renderEnd("focus immediate"),F}return F.dispatch=E,F.content=f,F.brush=m,F.xAxis=g,F.yAxis=v,F.options=pt.utils.optionsFunc.bind(F),F._options=Object.create({},{width:{get:function(){return b},set:function(t){b=t}},height:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return M},set:function(t){M=t}},brushExtent:{get:function(){return C},set:function(t){C=t}},syncBrushing:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return y},set:function(t){y.top=void 0!==t.top?t.top:y.top,y.right=void 0!==t.right?t.right:y.right,y.bottom=void 0!==t.bottom?t.bottom:y.bottom,y.left=void 0!==t.left?t.left:y.left}},duration:{get:function(){return S},set:function(t){S=t,e.reset(S),f.duration(S),g.duration(S),v.duration(S)}},color:{get:function(){return x},set:function(t){x=pt.utils.getColor(t),f.color(x)}},interpolate:{get:function(){return f.interpolate()},set:function(t){f.interpolate(t)}},xTickFormat:{get:function(){return g.tickFormat()},set:function(t){g.tickFormat(t)}},yTickFormat:{get:function(){return v.tickFormat()},set:function(t){v.tickFormat(t)}},x:{get:function(){return f.x()},set:function(t){f.x(t)}},y:{get:function(){return f.y()},set:function(t){f.y(t)}},rightAlignYAxis:{get:function(){return A},set:function(t){A=t,v.orient(A?"right":"left")}}}),pt.utils.inheritOptions(F,f),pt.utils.initOptions(F),F},pt.models.forceDirectedGraph=function(){"use strict";var s={top:2,right:0,bottom:2,left:0},l=400,u=32,c=null,t=d3.dispatch("renderEnd"),d=pt.utils.getColor(["#000"]),f=pt.models.tooltip(),e=null,p=.1,h=.9,g=30,v=-120,m=.1,y=.8,x=.1,b=5,k=function(t){},w=function(t){},n=pt.utils.renderWatch(t);function M(t){return n.reset(),t.each(function(t){c=d3.select(this),pt.utils.initSVG(c);var e=pt.utils.availableWidth(l,c,s),n=pt.utils.availableHeight(u,c,s);if(c.attr("width",e).attr("height",n),!(t&&t.links&&t.nodes))return pt.utils.noData(M,c),M;c.selectAll(".nv-noData").remove(),c.selectAll("*").remove();var r=new Set;t.nodes.forEach(function(t){Object.keys(t).forEach(function(t){r.add(t)})});var i=d3.layout.force().nodes(t.nodes).links(t.links).size([e,n]).linkStrength(p).friction(h).linkDistance(g).charge(v).gravity(m).theta(y).alpha(x).start(),o=c.selectAll(".link").data(t.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(t){return Math.sqrt(t.value)}),a=c.selectAll(".node").data(t.nodes).enter().append("g").attr("class","nv-force-node").call(i.drag);a.append("circle").attr("r",b).style("fill",function(t){return d(t)}).on("mouseover",function(e){c.select(".nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.py),c.select(".nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.px);var n=d(e);e.series=[],r.forEach(function(t){e.series.push({color:n,key:t,value:e[t]})}),f.data(e).hidden(!1)}).on("mouseout",function(t){f.hidden(!0)}),f.headerFormatter(function(t){return"Node"}),w(o),k(a),i.on("tick",function(){o.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),a.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})})}),M}return M.options=pt.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},linkStrength:{get:function(){return p},set:function(t){p=t}},friction:{get:function(){return h},set:function(t){h=t}},linkDist:{get:function(){return g},set:function(t){g=t}},charge:{get:function(){return v},set:function(t){v=t}},gravity:{get:function(){return m},set:function(t){m=t}},theta:{get:function(){return y},set:function(t){y=t}},alpha:{get:function(){return x},set:function(t){x=t}},radius:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return getX},set:function(t){getX=d3.functor(t)}},y:{get:function(){return getY},set:function(t){getY=d3.functor(t)}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return d},set:function(t){d=pt.utils.getColor(t)}},noData:{get:function(){return e},set:function(t){e=t}},nodeExtras:{get:function(){return k},set:function(t){k=t}},linkExtras:{get:function(){return w},set:function(t){w=t}}}),M.dispatch=t,M.tooltip=f,pt.utils.initOptions(M),M},pt.models.furiousLegend=function(){"use strict";var A={top:5,right:0,bottom:5,left:0},C=400,S=20,E=function(t){return t.key},W=function(t){return t},F=pt.utils.getColor(),N=20,D=!0,O=28,L=!0,_=!0,B=!1,T=!1,P=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),I="classic";function e(t){function w(t,e){return"furious"!=I?"#000":T?t.disengaged?F(t,e):"#fff":T?void 0:t.disabled?F(t,e):"#fff"}function M(t,e){return T&&"furious"==I?t.disengaged?"#fff":F(t,e):t.disabled?"#fff":F(t,e)}return t.each(function(t){var e=C-A.left-A.right,n=d3.select(this);pt.utils.initSVG(n);var r=n.selectAll("g.nv-legend").data([t]),i=(r.enter().append("g").attr("class","nvd3 nv-legend").append("g"),r.select("g"));r.attr("transform","translate("+A.left+","+A.top+")");var o,a=i.selectAll(".nv-series").data(function(t){return"furious"!=I?t:t.filter(function(t){return!!T||!t.disengaged})}),s=a.enter().append("g").attr("class","nv-series");"classic"==I?(s.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),o=a.select("circle")):"furious"==I&&(s.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),o=a.select("rect"),s.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),a.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",w(t,e))})),s.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var l,u=a.select("text.nv-legend-text");switch(a.on("mouseover",function(t,e){P.legendMouseover(t,e)}).on("mouseout",function(t,e){P.legendMouseout(t,e)}).on("click",function(t,e){P.legendClick(t,e);var n=a.data();_&&("classic"==I?B?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==I&&(T?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):T||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),P.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){var n;"furious"==I&&T||(P.legendDblclick(t,e),_&&((n=a.data()).forEach(function(t){t.disabled=!0,"furious"==I&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==I&&(t.userDisabled=t.disabled),P.stateChange({disabled:n.map(function(t){return!!t.disabled})})))}),a.classed("nv-disabled",function(t){return t.userDisabled}),a.exit().remove(),u.attr("fill",w).text(function(t){return W(E(t))}),I){case"furious":l=23;break;case"classic":l=20}if(D){var c=[];a.each(function(t,e){var n,r,i;W(E(t))&&W(E(t)).length>N?(n=W(E(t)).substring(0,N),r=d3.select(this).select("text").text(n+"..."),d3.select(this).append("svg:title").text(W(E(t)))):r=d3.select(this).select("text");try{if((i=r.node().getComputedTextLength())<=0)throw Error()}catch(t){i=pt.utils.calcApproxTextWidth(r)}c.push(i+O)});for(var d=0,f=0,p=[];f<e&&d<c.length;)p[d]=c[d],f+=c[d++];for(0===d&&(d=1);e<f&&1<d;){p=[],d--;for(var h=0;h<c.length;h++)c[h]>(p[h%d]||0)&&(p[h%d]=c[h]);f=p.reduce(function(t,e,n,r){return t+e})}for(var g=[],v=0,m=0;v<d;v++)g[v]=m,m+=p[v];a.attr("transform",function(t,e){return"translate("+g[e%d]+","+(5+Math.floor(e/d)*l)+")"}),L?i.attr("transform","translate("+(C-A.right-f)+","+A.top+")"):i.attr("transform","translate(0,"+A.top+")"),S=A.top+A.bottom+Math.ceil(c.length/d)*l}else{var y,x=5,b=5,k=0;a.attr("transform",function(t,e){var n=d3.select(this).select("text").node().getComputedTextLength()+O;return y=b,C<A.left+A.right+y+n&&(b=y=5,x+=l),k<(b+=n)&&(k=b),"translate("+y+","+x+")"}),i.attr("transform","translate("+(C-A.right-k)+","+A.top+")"),S=A.top+A.bottom+x+15}"furious"==I&&o.attr("width",function(t,e){return u[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),o.style("fill",M).style("stroke",function(t,e){return t.color||F(t,e)})}),e}return e.dispatch=P,e.options=pt.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return C},set:function(t){C=t}},height:{get:function(){return S},set:function(t){S=t}},key:{get:function(){return E},set:function(t){E=t}},keyFormatter:{get:function(){return W},set:function(t){W=t}},align:{get:function(){return D},set:function(t){D=t}},rightAlign:{get:function(){return L},set:function(t){L=t}},maxKeyLength:{get:function(){return N},set:function(t){N=t}},padding:{get:function(){return O},set:function(t){O=t}},updateState:{get:function(){return _},set:function(t){_=t}},radioButtonMode:{get:function(){return B},set:function(t){B=t}},expanded:{get:function(){return T},set:function(t){T=t}},vers:{get:function(){return I},set:function(t){I=t}},margin:{get:function(){return A},set:function(t){A.top=void 0!==t.top?t.top:A.top,A.right=void 0!==t.right?t.right:A.right,A.bottom=void 0!==t.bottom?t.bottom:A.bottom,A.left=void 0!==t.left?t.left:A.left}},color:{get:function(){return F},set:function(t){F=pt.utils.getColor(t)}}}),pt.utils.initOptions(e),e},pt.models.historicalBar=function(){"use strict";var u,c,d,f,p={top:0,right:0,bottom:0,left:0},h=null,g=null,v=Math.floor(1e4*Math.random()),m=null,y=d3.scale.linear(),x=d3.scale.linear(),b=function(t){return t.x},k=function(t){return t.y},w=[],M=[0],A=!1,C=!0,S=pt.utils.defaultColor(),E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),W=!0,F=pt.utils.renderWatch(E,0);function e(t){return t.each(function(n){F.reset(),m=d3.select(this);var r=pt.utils.availableWidth(h,m,p),t=pt.utils.availableHeight(g,m,p);pt.utils.initSVG(m),y.domain(u||d3.extent(n[0].values.map(b).concat(w))),A?y.range(d||[.5*r/n[0].values.length,r*(n[0].values.length-.5)/n[0].values.length]):y.range(d||[0,r]),x.domain(c||d3.extent(n[0].values.map(k).concat(M))).range(f||[t,0]),y.domain()[0]===y.domain()[1]&&(y.domain()[0]?y.domain([y.domain()[0]-.01*y.domain()[0],y.domain()[1]+.01*y.domain()[1]]):y.domain([-1,1])),x.domain()[0]===x.domain()[1]&&(x.domain()[0]?x.domain([x.domain()[0]+.01*x.domain()[0],x.domain()[1]-.01*x.domain()[1]]):x.domain([-1,1]));var e=m.selectAll("g.nv-wrap.nv-historicalBar-"+v).data([n[0].values]),i=e.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+v),o=i.append("defs"),a=i.append("g"),s=e.select("g");a.append("g").attr("class","nv-bars"),e.attr("transform","translate("+p.left+","+p.top+")"),m.on("click",function(t,e){E.chartClick({data:t,index:e,pos:d3.event,id:v})}),o.append("clipPath").attr("id","nv-chart-clip-path-"+v).append("rect"),e.select("#nv-chart-clip-path-"+v+" rect").attr("width",r).attr("height",t),s.attr("clip-path",C?"url(#nv-chart-clip-path-"+v+")":"");var l=e.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return b(t,e)});l.exit().remove(),l.enter().append("rect").attr("x",0).attr("y",function(t,e){return pt.utils.NaNtoZero(x(Math.max(0,k(t,e))))}).attr("height",function(t,e){return pt.utils.NaNtoZero(Math.abs(x(k(t,e))-x(0)))}).attr("transform",function(t,e){return"translate("+(y(b(t,e))-r/n[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){W&&(d3.select(this).classed("hover",!0),E.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){W&&(d3.select(this).classed("hover",!1),E.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){W&&E.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){W&&(E.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())}).on("dblclick",function(t,e){W&&(E.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),l.attr("fill",function(t,e){return S(t,e)}).attr("class",function(t,e,n){return(k(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(F,"bars").attr("transform",function(t,e){return"translate("+(y(b(t,e))-r/n[0].values.length*.45)+",0)"}).attr("width",r/n[0].values.length*.9),l.watchTransition(F,"bars").attr("y",function(t,e){var n=k(t,e)<0?x(0):x(0)-x(k(t,e))<1?x(0)-1:x(k(t,e));return pt.utils.NaNtoZero(n)}).attr("height",function(t,e){return pt.utils.NaNtoZero(Math.max(Math.abs(x(k(t,e))-x(0)),1))})}),F.renderEnd("historicalBar immediate"),e}return e.highlightPoint=function(t,e){m.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},e.clearHighlights=function(){m.select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=E,e.options=pt.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},forceX:{get:function(){return w},set:function(t){w=t}},forceY:{get:function(){return M},set:function(t){M=t}},padData:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return b},set:function(t){b=t}},y:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return y},set:function(t){y=t}},yScale:{get:function(){return x},set:function(t){x=t}},xDomain:{get:function(){return u},set:function(t){u=t}},yDomain:{get:function(){return c},set:function(t){c=t}},xRange:{get:function(){return d},set:function(t){d=t}},yRange:{get:function(){return f},set:function(t){f=t}},clipEdge:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return v},set:function(t){v=t}},interactive:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return p},set:function(t){p.top=void 0!==t.top?t.top:p.top,p.right=void 0!==t.right?t.right:p.right,p.bottom=void 0!==t.bottom?t.bottom:p.bottom,p.left=void 0!==t.left?t.left:p.left}},color:{get:function(){return S},set:function(t){S=pt.utils.getColor(t)}}}),pt.utils.initOptions(e),e},pt.models.historicalBarChart=function(t){"use strict";var u,c,d=t||pt.models.historicalBar(),f=pt.models.axis(),p=pt.models.axis(),h=pt.models.legend(),g=pt.interactiveGuideline(),e=pt.models.tooltip(),v={top:30,right:90,bottom:50,left:90},m=null,y=pt.utils.defaultColor(),x=null,b=null,k=!1,w=!0,M=!0,A=!1,C=!1,S={},E=null,n=null,W=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),F=250;f.orient("bottom").tickPadding(7),p.orient(A?"right":"left"),e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).headerFormatter(function(t,e){return f.tickFormat()(t,e)});var N=pt.utils.renderWatch(W,0);function D(s){return s.each(function(l){N.reset(),N.models(d),w&&N.models(f),M&&N.models(p);var t=d3.select(this);pt.utils.initSVG(t);var e,n=pt.utils.availableWidth(x,t,v),r=pt.utils.availableHeight(b,t,v);if(D.update=function(){t.transition().duration(F).call(D)},D.container=this,S.disabled=l.map(function(t){return!!t.disabled}),!E)for(e in E={},S)S[e]instanceof Array?E[e]=S[e].slice(0):E[e]=S[e];if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return pt.utils.noData(D,t),D;t.selectAll(".nv-noData").remove(),u=d.xScale(),c=d.yScale();var i=t.selectAll("g.nv-wrap.nv-historicalBarChart").data([l]),o=i.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),a=i.select("g");o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y nv-axis"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-legendWrap"),o.append("g").attr("class","nv-interactive"),k?(h.width(n),a.select(".nv-legendWrap").datum(l).call(h),m||h.height()===v.top||(v.top=h.height(),r=pt.utils.availableHeight(b,t,v)),i.select(".nv-legendWrap").attr("transform","translate(0,"+-v.top+")")):a.select(".nv-legendWrap").selectAll("*").remove(),i.attr("transform","translate("+v.left+","+v.top+")"),A&&a.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),C&&(g.width(n).height(r).margin({left:v.left,top:v.top}).svgContainer(t).xScale(u),i.select(".nv-interactive").call(g)),d.width(n).height(r).color(l.map(function(t,e){return t.color||y(t,e)}).filter(function(t,e){return!l[e].disabled})),a.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled})).transition().call(d),w&&(f.scale(u)._ticks(pt.utils.calcTicksX(n/100,l)).tickSize(-r,0),a.select(".nv-x.nv-axis").attr("transform","translate(0,"+c.range()[0]+")"),a.select(".nv-x.nv-axis").transition().call(f)),M&&(p.scale(c)._ticks(pt.utils.calcTicksY(r/36,l)).tickSize(-n,0),a.select(".nv-y.nv-axis").transition().call(p)),g.dispatch.on("elementMousemove",function(r){d.clearHighlights();var i,o,a,s=[];l.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){o=pt.interactiveBisect(t.values,r.pointXValue,D.x()),d.highlightPoint(o,!0);var n=t.values[o];void 0!==n&&(void 0===i&&(i=n),void 0===a&&(a=D.xScale()(D.x()(n,o))),s.push({key:t.key,value:D.y()(n,o),color:y(t,t.seriesIndex),data:t.values[o]}))});var t=f.tickFormat()(D.x()(i,o));g.tooltip.valueFormatter(function(t,e){return p.tickFormat()(t)}).data({value:t,index:o,series:s})(),g.renderGuideLine(a)}),g.dispatch.on("elementMouseout",function(t){W.tooltipHide(),d.clearHighlights()}),h.dispatch.on("legendClick",function(t,e){t.disabled=!t.disabled,l.filter(function(t){return!t.disabled}).length||l.map(function(t){return t.disabled=!1,i.selectAll(".nv-series").classed("disabled",!1),t}),S.disabled=l.map(function(t){return!!t.disabled}),W.stateChange(S),s.transition().call(D)}),h.dispatch.on("legendDblclick",function(t){l.forEach(function(t){t.disabled=!0}),t.disabled=!1,S.disabled=l.map(function(t){return!!t.disabled}),W.stateChange(S),D.update()}),W.on("changeState",function(n){void 0!==n.disabled&&(l.forEach(function(t,e){t.disabled=n.disabled[e]}),S.disabled=n.disabled),D.update()})}),N.renderEnd("historicalBarChart immediate"),D}return d.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:D.x()(t.data),value:D.y()(t.data),color:t.color},e.data(t).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(t){e()}),D.dispatch=W,D.bars=d,D.legend=h,D.xAxis=f,D.yAxis=p,D.interactiveLayer=g,D.tooltip=e,D.options=pt.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return x},set:function(t){x=t}},height:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return k},set:function(t){k=t}},showXAxis:{get:function(){return w},set:function(t){w=t}},showYAxis:{get:function(){return M},set:function(t){M=t}},defaultState:{get:function(){return E},set:function(t){E=t}},noData:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return v},set:function(t){void 0!==t.top&&(v.top=t.top,m=t.top),v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},color:{get:function(){return y},set:function(t){y=pt.utils.getColor(t),h.color(y),d.color(y)}},duration:{get:function(){return F},set:function(t){F=t,N.reset(F),p.duration(F),f.duration(F)}},rightAlignYAxis:{get:function(){return A},set:function(t){A=t,p.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return C},set:function(t){!0===(C=t)&&D.interactive(!1)}}}),pt.utils.inheritOptions(D,d),pt.utils.initOptions(D),D},pt.models.ohlcBarChart=function(){var n=pt.models.historicalBarChart(pt.models.ohlcBar());return n.useInteractiveGuideline(!0),n.interactiveLayer.tooltip.contentGenerator(function(t){var e=t.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+n.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+n.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+n.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+n.yAxis.tickFormat()(e.low)+"</td></tr></table>"}),n},pt.models.candlestickBarChart=function(){var n=pt.models.historicalBarChart(pt.models.candlestickBar());return n.useInteractiveGuideline(!0),n.interactiveLayer.tooltip.contentGenerator(function(t){var e=t.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+n.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+n.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+n.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+n.yAxis.tickFormat()(e.low)+"</td></tr></table>"}),n},pt.models.legend=function(){"use strict";var S={top:5,right:0,bottom:5,left:0},E=400,W=20,F=function(t){return t.key},N=function(t){return t},n=pt.utils.getColor(),D=20,O=!0,L=32,_=!0,B=!0,T=!1,P=!1,I=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),z="classic";function e(t){function M(t,e){return"furious"!=z?"#000":P?t.disengaged?"#000":"#fff":P?void 0:(t.color||(t.color=n(t,e)),t.disabled?t.color:"#fff")}function A(t,e){return P&&"furious"==z&&t.disengaged?"#eee":t.color||n(t,e)}function C(t,e){return(!P||"furious"!=z)&&t.disabled?0:1}return t.each(function(t){var e=E-S.left-S.right,n=d3.select(this);pt.utils.initSVG(n);var r=n.selectAll("g.nv-legend").data([t]),i=r.enter().append("g").attr("class","nvd3 nv-legend").append("g"),o=r.select("g");_?r.attr("transform","translate("+-S.right+","+S.top+")"):r.attr("transform","translate("+S.left+","+S.top+")");var a,s,l=o.selectAll(".nv-series").data(function(t){return"furious"!=z?t:t.filter(function(t){return!!P||!t.disengaged})}),u=l.enter().append("g").attr("class","nv-series");switch(z){case"furious":s=23;break;case"classic":s=20}"classic"==z?(u.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),a=l.select(".nv-legend-symbol")):"furious"==z&&(u.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),a=l.select(".nv-legend-symbol"),u.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),l.select(".nv-check-box").each(function(t,e){d3.select(this).selectAll("path").attr("stroke",M(t,e))})),u.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var c=l.select("text.nv-legend-text");l.on("mouseover",function(t,e){I.legendMouseover(t,e)}).on("mouseout",function(t,e){I.legendMouseout(t,e)}).on("click",function(t,e){I.legendClick(t,e);var n=l.data();B&&("classic"==z?T?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1})):"furious"==z&&(P?(t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled):P||(t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter(function(t){return!t.disengaged}).every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1}))),I.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})}))}).on("dblclick",function(t,e){var n;"furious"==z&&P||(I.legendDblclick(t,e),B&&((n=l.data()).forEach(function(t){t.disabled=!0,"furious"==z&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==z&&(t.userDisabled=t.disabled),I.stateChange({disabled:n.map(function(t){return!!t.disabled})})))}),l.classed("nv-disabled",function(t){return t.userDisabled}),l.exit().remove(),c.attr("fill",M).text(function(t){return N(F(t))});var d=0;if(O){var f=[];l.each(function(t,e){var n,r,i;N(F(t))&&N(F(t)).length>D?(n=N(F(t)).substring(0,D),r=d3.select(this).select("text").text(n+"..."),d3.select(this).append("svg:title").text(N(F(t)))):r=d3.select(this).select("text");try{if((i=r.node().getComputedTextLength())<=0)throw Error()}catch(t){i=pt.utils.calcApproxTextWidth(r)}f.push(i+L)});for(var p=0,h=[],d=0;d<e&&p<f.length;)h[p]=f[p],d+=f[p++];for(0===p&&(p=1);e<d&&1<p;){h=[],p--;for(var g=0;g<f.length;g++)f[g]>(h[g%p]||0)&&(h[g%p]=f[g]);d=h.reduce(function(t,e,n,r){return t+e})}for(var v=[],m=0,y=0;m<p;m++)v[m]=y,y+=h[m];l.attr("transform",function(t,e){return"translate("+v[e%p]+","+(5+Math.floor(e/p)*s)+")"}),_?o.attr("transform","translate("+(E-S.right-d)+","+S.top+")"):o.attr("transform","translate(0,"+S.top+")"),W=S.top+S.bottom+Math.ceil(f.length/p)*s}else{var x,b=5,k=5,w=0;l.attr("transform",function(t,e){var n=d3.select(this).select("text").node().getComputedTextLength()+L;return x=k,E<S.left+S.right+x+n&&(k=x=5,b+=s),w<(k+=n)&&(w=k),d<x+w&&(d=x+w),"translate("+x+","+b+")"}),o.attr("transform","translate("+(E-S.right-w)+","+S.top+")"),W=S.top+S.bottom+b+15}"furious"==z&&(a.attr("width",function(t,e){return c[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),i.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),o.select(".nv-legend-bg").transition().duration(300).attr("x",-s).attr("width",d+s-12).attr("height",W+10).attr("y",-S.top-10).attr("opacity",P?1:0)),a.style("fill",A).style("fill-opacity",C).style("stroke",A)}),e}return e.dispatch=I,e.options=pt.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return E},set:function(t){E=t}},height:{get:function(){return W},set:function(t){W=t}},key:{get:function(){return F},set:function(t){F=t}},keyFormatter:{get:function(){return N},set:function(t){N=t}},align:{get:function(){return O},set:function(t){O=t}},maxKeyLength:{get:function(){return D},set:function(t){D=t}},rightAlign:{get:function(){return _},set:function(t){_=t}},padding:{get:function(){return L},set:function(t){L=t}},updateState:{get:function(){return B},set:function(t){B=t}},radioButtonMode:{get:function(){return T},set:function(t){T=t}},expanded:{get:function(){return P},set:function(t){P=t}},vers:{get:function(){return z},set:function(t){z=t}},margin:{get:function(){return S},set:function(t){S.top=void 0!==t.top?t.top:S.top,S.right=void 0!==t.right?t.right:S.right,S.bottom=void 0!==t.bottom?t.bottom:S.bottom,S.left=void 0!==t.left?t.left:S.left}},color:{get:function(){return n},set:function(t){n=pt.utils.getColor(t)}}}),pt.utils.initOptions(e),e},pt.models.line=function(){"use strict";var f,p,h=pt.models.scatter(),g={top:0,right:0,bottom:0,left:0},v=960,m=500,y=null,x=1.5,b=pt.utils.defaultColor(),k=function(t){return t.x},w=function(t){return t.y},M=function(t,e){return!isNaN(w(t,e))&&null!==w(t,e)},A=function(t){return t.area},C=!1,S="linear",e=250,t=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");h.pointSize(16).pointDomain([16,256]);var E,W,F=pt.utils.renderWatch(t,e);function n(t){return F.reset(),F.models(h),t.each(function(t){y=d3.select(this);var e=pt.utils.availableWidth(v,y,g),n=pt.utils.availableHeight(m,y,g);pt.utils.initSVG(y),f=h.xScale(),p=h.yScale(),E=E||f,W=W||p;var r=y.selectAll("g.nv-wrap.nv-line").data([t]),i=r.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),o=i.append("defs"),a=i.append("g"),s=r.select("g");a.append("g").attr("class","nv-groups"),a.append("g").attr("class","nv-scatterWrap"),r.attr("transform","translate("+g.left+","+g.top+")"),h.width(e).height(n);var l=r.select(".nv-scatterWrap");l.call(h),o.append("clipPath").attr("id","nv-edge-clip-"+h.id()).append("rect"),r.select("#nv-edge-clip-"+h.id()+" rect").attr("width",e).attr("height",0<n?n:0),s.attr("clip-path",C?"url(#nv-edge-clip-"+h.id()+")":""),l.attr("clip-path",C?"url(#nv-edge-clip-"+h.id()+")":"");var u=r.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});u.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||x}).style("fill-opacity",1e-6),u.exit().remove(),u.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),u.watchTransition(F,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var c=u.selectAll("path.nv-area").data(function(t){return A(t)?[t]:[]});c.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(S).defined(M).x(function(t,e){return pt.utils.NaNtoZero(E(k(t,e)))}).y0(function(t,e){return pt.utils.NaNtoZero(W(w(t,e)))}).y1(function(t,e){return W(p.domain()[0]<=0?0<=p.domain()[1]?0:p.domain()[1]:p.domain()[0])}).apply(this,[t.values])}),u.exit().selectAll("path.nv-area").remove(),c.watchTransition(F,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(S).defined(M).x(function(t,e){return pt.utils.NaNtoZero(f(k(t,e)))}).y0(function(t,e){return pt.utils.NaNtoZero(p(w(t,e)))}).y1(function(t,e){return p(p.domain()[0]<=0?0<=p.domain()[1]?0:p.domain()[1]:p.domain()[0])}).apply(this,[t.values])});var d=u.selectAll("path.nv-line").data(function(t){return[t.values]});d.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(S).defined(M).x(function(t,e){return pt.utils.NaNtoZero(E(k(t,e)))}).y(function(t,e){return pt.utils.NaNtoZero(W(w(t,e)))})),d.watchTransition(F,"line: linePaths").attr("d",d3.svg.line().interpolate(S).defined(M).x(function(t,e){return pt.utils.NaNtoZero(f(k(t,e)))}).y(function(t,e){return pt.utils.NaNtoZero(p(w(t,e)))})),E=f.copy(),W=p.copy()}),F.renderEnd("line immediate"),n}return n.dispatch=t,(n.scatter=h).dispatch.on("elementClick",function(){t.elementClick.apply(this,arguments)}),h.dispatch.on("elementMouseover",function(){t.elementMouseover.apply(this,arguments)}),h.dispatch.on("elementMouseout",function(){t.elementMouseout.apply(this,arguments)}),n.options=pt.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},defined:{get:function(){return M},set:function(t){M=t}},interpolate:{get:function(){return S},set:function(t){S=t}},clipEdge:{get:function(){return C},set:function(t){C=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},duration:{get:function(){return e},set:function(t){e=t,F.reset(e),h.duration(e)}},isArea:{get:function(){return A},set:function(t){A=d3.functor(t)}},x:{get:function(){return k},set:function(t){k=t,h.x(t)}},y:{get:function(){return w},set:function(t){w=t,h.y(t)}},color:{get:function(){return b},set:function(t){b=pt.utils.getColor(t),h.color(b)}}}),pt.utils.inheritOptions(n,h),pt.utils.initOptions(n),n},pt.models.lineChart=function(){"use strict";var h,g,v=pt.models.line(),m=pt.models.axis(),y=pt.models.axis(),x=pt.models.legend(),b=pt.interactiveGuideline(),e=pt.models.tooltip(),k=pt.models.focus(pt.models.line()),w={top:30,right:20,bottom:50,left:60},M=null,A=pt.utils.defaultColor(),C=null,S=null,E=!0,W="top",F=!0,N=!0,D=!1,O=!1,L=!1,_=pt.utils.state(),B=null,n=null,T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),P=250;m.orient("bottom").tickPadding(7),y.orient(D?"right":"left"),v.clipEdge(!0).duration(0),e.valueFormatter(function(t,e){return y.tickFormat()(t,e)}).headerFormatter(function(t,e){return m.tickFormat()(t,e)}),b.tooltip.valueFormatter(function(t,e){return y.tickFormat()(t,e)}).headerFormatter(function(t,e){return m.tickFormat()(t,e)});var r=pt.utils.renderWatch(T,P),I=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},z=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function V(t){return r.reset(),r.models(v),F&&r.models(m),N&&r.models(y),t.each(function(r){var t=d3.select(this);pt.utils.initSVG(t);var e,n=pt.utils.availableWidth(C,t,w),i=pt.utils.availableHeight(S,t,w)-(L?k.height():0);if(V.update=function(){0===P?t.call(V):t.transition().duration(P).call(V)},V.container=this,_.setter(z(r),V.update).getter(I(r)).update(),_.disabled=r.map(function(t){return!!t.disabled}),!B)for(e in B={},_)_[e]instanceof Array?B[e]=_[e].slice(0):B[e]=_[e];if(!(r&&r.length&&r.filter(function(t){return t.values.length}).length))return pt.utils.noData(V,t),V;t.selectAll(".nv-noData").remove(),k.dispatch.on("onBrush",function(t){p(t)}),h=v.xScale(),g=v.yScale();var o=t.selectAll("g.nv-wrap.nv-lineChart").data([r]),a=o.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),s=o.select("g");a.append("g").attr("class","nv-legendWrap");var l=a.append("g").attr("class","nv-focus");l.append("g").attr("class","nv-background").append("rect"),l.append("g").attr("class","nv-x nv-axis"),l.append("g").attr("class","nv-y nv-axis"),l.append("g").attr("class","nv-linesWrap"),l.append("g").attr("class","nv-interactive");a.append("g").attr("class","nv-focusWrap");E?(x.width(n),s.select(".nv-legendWrap").datum(r).call(x),"bottom"===W?o.select(".nv-legendWrap").attr("transform","translate(0,"+i+")"):"top"===W&&(M||x.height()===w.top||(w.top=x.height(),i=pt.utils.availableHeight(S,t,w)-(L?k.height():0)),o.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")"))):s.select(".nv-legendWrap").selectAll("*").remove(),o.attr("transform","translate("+w.left+","+w.top+")"),D&&s.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),O&&(b.width(n).height(i).margin({left:w.left,top:w.top}).svgContainer(t).xScale(h),o.select(".nv-interactive").call(b)),s.select(".nv-focus .nv-background rect").attr("width",n).attr("height",i),v.width(n).height(i).color(r.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!r[e].disabled}));var u,c=s.select(".nv-linesWrap").datum(r.filter(function(t){return!t.disabled}));function d(){F&&s.select(".nv-focus .nv-x.nv-axis").transition().duration(P).call(m)}function f(){N&&s.select(".nv-focus .nv-y.nv-axis").transition().duration(P).call(y)}function p(n){s.select(".nv-focus .nv-linesWrap").datum(r.filter(function(t){return!t.disabled}).map(function(t,e){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,e){return v.x()(t,e)>=n[0]&&v.x()(t,e)<=n[1]}),disableTooltip:t.disableTooltip}})).transition().duration(P).call(v),d(),f()}F&&m.scale(h)._ticks(pt.utils.calcTicksX(n/100,r)).tickSize(-i,0),N&&y.scale(g)._ticks(pt.utils.calcTicksY(i/36,r)).tickSize(-n,0),s.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i+")"),L?(k.width(n),s.select(".nv-focusWrap").attr("transform","translate(0,"+(i+w.bottom+k.margin().top)+")").datum(r.filter(function(t){return!t.disabled})).call(k),null!==(u=k.brush.empty()?k.xDomain():k.brush.extent())&&p(u)):(c.call(v),d(),f()),x.dispatch.on("stateChange",function(t){for(var e in t)_[e]=t[e];T.stateChange(_),V.update()}),b.dispatch.on("elementMousemove",function(a){v.clearHighlights();var s,l,u,t,e,n,c=[];r.filter(function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip}).forEach(function(t,e){var n=L?k.brush.empty()?k.xScale().domain():k.brush.extent():h.domain(),r=t.values.filter(function(t,e){return n[0]<=n[1]?v.x()(t,e)>=n[0]&&v.x()(t,e)<=n[1]:v.x()(t,e)>=n[1]&&v.x()(t,e)<=n[0]}),i=r[l=pt.interactiveBisect(r,a.pointXValue,v.x())],o=V.y()(i,l);null!==o&&v.highlightPoint(e,l,!0),void 0!==i&&(void 0===s&&(s=i),void 0===u&&(u=V.xScale()(V.x()(i,l))),c.push({key:t.key,value:o,color:A(t,t.seriesIndex),data:i}))}),2<c.length&&(t=V.yScale().invert(a.mouseY),e=.03*Math.abs(V.yScale().domain()[0]-V.yScale().domain()[1]),null!==(n=pt.nearestValueIndex(c.map(function(t){return t.value}),t,e))&&(c[n].highlight=!0));b.tooltip.valueFormatter(b.tooltip.valueFormatter()||function(t,e){return null==t?"N/A":y.tickFormat()(t)}).data({value:V.x()(s,l),index:l,series:c})(),b.renderGuideLine(u)}),b.dispatch.on("elementClick",function(i){var o,a=[];r.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t){var e,n=pt.interactiveBisect(t.values,i.pointXValue,V.x()),r=t.values[n];void 0!==r&&(void 0===o&&(o=V.xScale()(V.x()(r,n))),e=V.yScale()(V.y()(r,n)),a.push({point:r,pointIndex:n,pos:[o,e],seriesIndex:t.seriesIndex,series:t}))}),v.dispatch.elementClick(a)}),b.dispatch.on("elementMouseout",function(t){v.clearHighlights()}),T.on("changeState",function(n){void 0!==n.disabled&&r.length===n.disabled.length&&(r.forEach(function(t,e){t.disabled=n.disabled[e]}),_.disabled=n.disabled),V.update()})}),r.renderEnd("lineChart immediate"),V}return v.dispatch.on("elementMouseover.tooltip",function(t){t.series.disableTooltip||e.data(t).hidden(!1)}),v.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),V.dispatch=T,V.lines=v,V.legend=x,V.focus=k,V.xAxis=m,V.x2Axis=k.xAxis,V.yAxis=y,V.y2Axis=k.yAxis,V.interactiveLayer=b,V.tooltip=e,V.state=_,V.dispatch=T,V.options=pt.utils.optionsFunc.bind(V),V._options=Object.create({},{width:{get:function(){return C},set:function(t){C=t}},height:{get:function(){return S},set:function(t){S=t}},showLegend:{get:function(){return E},set:function(t){E=t}},legendPosition:{get:function(){return W},set:function(t){W=t}},showXAxis:{get:function(){return F},set:function(t){F=t}},showYAxis:{get:function(){return N},set:function(t){N=t}},defaultState:{get:function(){return B},set:function(t){B=t}},noData:{get:function(){return n},set:function(t){n=t}},focusEnable:{get:function(){return L},set:function(t){L=t}},focusHeight:{get:function(){return k.height()},set:function(t){k.height(t)}},focusShowAxisX:{get:function(){return k.showXAxis()},set:function(t){k.showXAxis(t)}},focusShowAxisY:{get:function(){return k.showYAxis()},set:function(t){k.showYAxis(t)}},brushExtent:{get:function(){return k.brushExtent()},set:function(t){k.brushExtent(t)}},focusMargin:{get:function(){return k.margin},set:function(t){void 0!==t.top&&(w.top=t.top,M=t.top),k.margin.right=void 0!==t.right?t.right:k.margin.right,k.margin.bottom=void 0!==t.bottom?t.bottom:k.margin.bottom,k.margin.left=void 0!==t.left?t.left:k.margin.left}},margin:{get:function(){return w},set:function(t){w.top=void 0!==t.top?t.top:w.top,w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},duration:{get:function(){return P},set:function(t){P=t,r.reset(P),v.duration(P),k.duration(P),m.duration(P),y.duration(P)}},color:{get:function(){return A},set:function(t){A=pt.utils.getColor(t),x.color(A),v.color(A),k.color(A)}},interpolate:{get:function(){return v.interpolate()},set:function(t){v.interpolate(t),k.interpolate(t)}},xTickFormat:{get:function(){return m.tickFormat()},set:function(t){m.tickFormat(t),k.xTickFormat(t)}},yTickFormat:{get:function(){return y.tickFormat()},set:function(t){y.tickFormat(t),k.yTickFormat(t)}},x:{get:function(){return v.x()},set:function(t){v.x(t),k.x(t)}},y:{get:function(){return v.y()},set:function(t){v.y(t),k.y(t)}},rightAlignYAxis:{get:function(){return D},set:function(t){D=t,y.orient(D?"right":"left")}},useInteractiveGuideline:{get:function(){return O},set:function(t){(O=t)&&(v.interactive(!1),v.useVoronoi(!1))}}}),pt.utils.inheritOptions(V,v),pt.utils.initOptions(V),V},pt.models.lineWithFocusChart=function(){return pt.models.lineChart().margin({bottom:30}).focusEnable(!0)},pt.models.linePlusBarChart=function(){"use strict";var M,A,C,S,E,W,F,N=pt.models.line(),D=pt.models.line(),O=pt.models.historicalBar(),L=pt.models.historicalBar(),_=pt.models.axis(),B=pt.models.axis(),T=pt.models.axis(),P=pt.models.axis(),I=pt.models.axis(),z=pt.models.axis(),V=pt.models.legend(),H=d3.svg.brush(),e=pt.models.tooltip(),Y={top:30,right:30,bottom:30,left:60},G=null,X={top:0,right:30,bottom:20,left:60},j=null,R=null,Z=function(t){return t.x},q=function(t){return t.y},K=pt.utils.defaultColor(),U=!0,Q=!0,J=!1,$=!0,tt=50,et=null,n=null,nt=d3.dispatch("brush","stateChange","changeState"),rt=0,it=pt.utils.state(),ot=null,at=" (left axis)",st=" (right axis)",lt=!1;N.clipEdge(!0),D.interactive(!1),D.pointActive(function(t){return!1}),_.orient("bottom").tickPadding(5),T.orient("left"),P.orient("right"),B.orient("bottom").tickPadding(5),I.orient("left"),z.orient("right"),e.headerEnabled(!0).headerFormatter(function(t,e){return _.tickFormat()(t,e)});var ut=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},ct=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},dt=function(t){return t.every(function(t){return t.disabled})};function ft(t){return t.each(function(a){var t=d3.select(this);pt.utils.initSVG(t);var e,s=pt.utils.availableWidth(j,t,Y),l=pt.utils.availableHeight(R,t,Y)-(Q?tt:0),i=tt-X.top-X.bottom;if(ft.update=function(){t.transition().duration(rt).call(ft)},ft.container=this,it.setter(ct(a),ft.update).getter(ut(a)).update(),it.disabled=a.map(function(t){return!!t.disabled}),!ot)for(e in ot={},it)it[e]instanceof Array?ot[e]=it[e].slice(0):ot[e]=it[e];if(!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return pt.utils.noData(ft,t),ft;t.selectAll(".nv-noData").remove();var u=a.filter(function(t){return!t.disabled&&t.bar}),c=a.filter(function(t){return!t.bar});A=u.length&&!lt?O.xScale():N.xScale(),C=B.scale(),S=lt?N.yScale():O.yScale(),E=lt?O.yScale():N.yScale(),W=lt?D.yScale():L.yScale(),F=lt?L.yScale():D.yScale();var n=a.filter(function(t){return!t.disabled&&(lt?!t.bar:t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:Z(t,e),y:q(t,e)}})}),r=a.filter(function(t){return!t.disabled&&(lt?t.bar:!t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:Z(t,e),y:q(t,e)}})});A.range([0,s]),C.domain(d3.extent(d3.merge(n.concat(r)),function(t){return t.x})).range([0,s]);var o=t.selectAll("g.nv-wrap.nv-linePlusBar").data([a]),d=o.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),f=o.select("g");d.append("g").attr("class","nv-legendWrap");var p=d.append("g").attr("class","nv-focus");p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y1 nv-axis"),p.append("g").attr("class","nv-y2 nv-axis"),p.append("g").attr("class","nv-barsWrap"),p.append("g").attr("class","nv-linesWrap");var h,g,v=d.append("g").attr("class","nv-context");v.append("g").attr("class","nv-x nv-axis"),v.append("g").attr("class","nv-y1 nv-axis"),v.append("g").attr("class","nv-y2 nv-axis"),v.append("g").attr("class","nv-barsWrap"),v.append("g").attr("class","nv-linesWrap"),v.append("g").attr("class","nv-brushBackground"),v.append("g").attr("class","nv-x nv-brush"),U?(h=V.align()?s/2:s,g=V.align()?h:0,V.width(h),f.select(".nv-legendWrap").datum(a.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=lt?t.originalKey+(t.bar?st:at):t.originalKey+(t.bar?at:st),t})).call(V),G||V.height()===Y.top||(Y.top=V.height(),l=pt.utils.availableHeight(R,t,Y)-tt),f.select(".nv-legendWrap").attr("transform","translate("+g+","+-Y.top+")")):f.select(".nv-legendWrap").selectAll("*").remove(),o.attr("transform","translate("+Y.left+","+Y.top+")"),f.select(".nv-context").style("display",Q?"initial":"none"),L.width(s).height(i).color(a.map(function(t,e){return t.color||K(t,e)}).filter(function(t,e){return!a[e].disabled&&a[e].bar})),D.width(s).height(i).color(a.map(function(t,e){return t.color||K(t,e)}).filter(function(t,e){return!a[e].disabled&&!a[e].bar}));var m=f.select(".nv-context .nv-barsWrap").datum(u.length?u:[{values:[]}]),y=f.select(".nv-context .nv-linesWrap").datum(dt(c)?[{values:[]}]:c.filter(function(t){return!t.disabled}));f.select(".nv-context").attr("transform","translate(0,"+(l+Y.bottom+X.top)+")"),m.transition().call(L),y.transition().call(D),$&&(B._ticks(pt.utils.calcTicksX(s/100,a)).tickSize(-i,0),f.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+W.range()[0]+")"),f.select(".nv-context .nv-x.nv-axis").transition().call(B)),J&&(I.scale(W)._ticks(i/36).tickSize(-s,0),z.scale(F)._ticks(i/36).tickSize(u.length?0:-s,0),f.select(".nv-context .nv-y3.nv-axis").style("opacity",u.length?1:0).attr("transform","translate(0,"+C.range()[0]+")"),f.select(".nv-context .nv-y2.nv-axis").style("opacity",c.length?1:0).attr("transform","translate("+C.range()[1]+",0)"),f.select(".nv-context .nv-y1.nv-axis").transition().call(I),f.select(".nv-context .nv-y2.nv-axis").transition().call(z)),H.x(C).on("brush",w),et&&H.extent(et);var x=f.select(".nv-brushBackground").selectAll("g").data([et||H.extent()]),b=x.enter().append("g");b.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",i),b.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",i);var k=f.select(".nv-x.nv-brush").call(H);function w(){et=H.empty()?null:H.extent(),M=H.empty()?C.domain():H.extent(),nt.brush({extent:M,brush:H}),H.empty()||H.extent(et),x.data([H.empty()?C.domain():et]).each(function(t,e){var n=C(t[0])-C.range()[0],r=C.range()[1]-C(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",C(t[1])).attr("width",r<0?0:r)}),O.width(s).height(l).color(a.map(function(t,e){return t.color||K(t,e)}).filter(function(t,e){return!a[e].disabled&&a[e].bar})),N.width(s).height(l).color(a.map(function(t,e){return t.color||K(t,e)}).filter(function(t,e){return!a[e].disabled&&!a[e].bar}));var t=f.select(".nv-focus .nv-barsWrap").datum(u.length?u.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return O.x()(t,e)>=M[0]&&O.x()(t,e)<=M[1]})}}):[{values:[]}]),e=f.select(".nv-focus .nv-linesWrap").datum(dt(c)?[{values:[]}]:c.filter(function(t){return!t.disabled}).map(function(t,e){return{area:t.area,fillOpacity:t.fillOpacity,strokeWidth:t.strokeWidth,key:t.key,values:t.values.filter(function(t,e){return N.x()(t,e)>=M[0]&&N.x()(t,e)<=M[1]})}}));A=u.length&&!lt?O.xScale():N.xScale(),_.scale(A)._ticks(pt.utils.calcTicksX(s/100,a)).tickSize(-l,0),_.domain([Math.ceil(M[0]),Math.floor(M[1])]),f.select(".nv-x.nv-axis").transition().duration(rt).call(_),t.transition().duration(rt).call(O),e.transition().duration(rt).call(N),f.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")"),T.scale(S)._ticks(pt.utils.calcTicksY(l/36,a)).tickSize(-s,0),P.scale(E)._ticks(pt.utils.calcTicksY(l/36,a)),lt?P.tickSize(c.length?0:-s,0):P.tickSize(u.length?0:-s,0);var n=u.length?1:0,r=c.length&&!dt(c)?1:0,i=lt?r:n,o=lt?n:r;f.select(".nv-focus .nv-y1.nv-axis").style("opacity",i),f.select(".nv-focus .nv-y2.nv-axis").style("opacity",o).attr("transform","translate("+A.range()[1]+",0)"),f.select(".nv-focus .nv-y1.nv-axis").transition().duration(rt).call(T),f.select(".nv-focus .nv-y2.nv-axis").transition().duration(rt).call(P)}k.selectAll("rect").attr("height",i),k.selectAll(".resize").append("path").attr("d",function(t){var e=+("e"==t),n=e?1:-1,r=i/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(6+r)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(8+r)+"V"+(2*r-8)+"M"+4.5*n+","+(8+r)+"V"+(2*r-8)}),V.dispatch.on("stateChange",function(t){for(var e in t)it[e]=t[e];nt.stateChange(it),ft.update()}),nt.on("changeState",function(n){void 0!==n.disabled&&(a.forEach(function(t,e){t.disabled=n.disabled[e]}),it.disabled=n.disabled),ft.update()}),w()}),ft}return N.dispatch.on("elementMouseover.tooltip",function(t){e.duration(100).valueFormatter(function(t,e){return(lt?{main:T,focus:I}:{main:P,focus:z}).main.tickFormat()(t,e)}).data(t).hidden(!1)}),N.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),O.dispatch.on("elementMouseover.tooltip",function(t){t.value=ft.x()(t.data),t.series={value:ft.y()(t.data),color:t.color},e.duration(0).valueFormatter(function(t,e){return(lt?{main:P,focus:z}:{main:T,focus:I}).main.tickFormat()(t,e)}).data(t).hidden(!1)}),O.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),O.dispatch.on("elementMousemove.tooltip",function(t){e()}),ft.dispatch=nt,ft.legend=V,ft.lines=N,ft.lines2=D,ft.bars=O,ft.bars2=L,ft.xAxis=_,ft.x2Axis=B,ft.y1Axis=T,ft.y2Axis=P,ft.y3Axis=I,ft.y4Axis=z,ft.tooltip=e,ft.options=pt.utils.optionsFunc.bind(ft),ft._options=Object.create({},{width:{get:function(){return j},set:function(t){j=t}},height:{get:function(){return R},set:function(t){R=t}},showLegend:{get:function(){return U},set:function(t){U=t}},brushExtent:{get:function(){return et},set:function(t){et=t}},noData:{get:function(){return n},set:function(t){n=t}},focusEnable:{get:function(){return Q},set:function(t){Q=t}},focusHeight:{get:function(){return tt},set:function(t){tt=t}},focusShowAxisX:{get:function(){return $},set:function(t){$=t}},focusShowAxisY:{get:function(){return J},set:function(t){J=t}},legendLeftAxisHint:{get:function(){return at},set:function(t){at=t}},legendRightAxisHint:{get:function(){return st},set:function(t){st=t}},margin:{get:function(){return Y},set:function(t){void 0!==t.top&&(Y.top=t.top,G=t.top),Y.right=void 0!==t.right?t.right:Y.right,Y.bottom=void 0!==t.bottom?t.bottom:Y.bottom,Y.left=void 0!==t.left?t.left:Y.left}},focusMargin:{get:function(){return X},set:function(t){X.top=void 0!==t.top?t.top:X.top,X.right=void 0!==t.right?t.right:X.right,X.bottom=void 0!==t.bottom?t.bottom:X.bottom,X.left=void 0!==t.left?t.left:X.left}},duration:{get:function(){return rt},set:function(t){rt=t}},color:{get:function(){return K},set:function(t){K=pt.utils.getColor(t),V.color(K)}},x:{get:function(){return Z},set:function(t){Z=t,N.x(t),D.x(t),O.x(t),L.x(t)}},y:{get:function(){return q},set:function(t){q=t,N.y(t),D.y(t),O.y(t),L.y(t)}},switchYAxisOrder:{get:function(){return lt},set:function(t){var e,n;lt!==t&&(e=T,T=P,P=e,n=I,I=z,z=n),lt=t,T.orient("left"),P.orient("right"),I.orient("left"),z.orient("right")}}}),pt.utils.inheritOptions(ft,N),pt.utils.initOptions(ft),ft},pt.models.multiBar=function(){"use strict";var g,v,m,y,x,b,k={top:0,right:0,bottom:0,left:0},w=960,M=500,A=d3.scale.ordinal(),C=d3.scale.linear(),S=Math.floor(1e4*Math.random()),E=null,W=function(t){return t.x},F=function(t){return t.y},N=[0],D=!0,O=!1,L="zero",_=pt.utils.defaultColor(),B=!1,T=null,P=500,I=.1,z=.75,V=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),H=pt.utils.renderWatch(V,P),Y=0;function e(t){return H.reset(),t.each(function(a){var t=w-k.left-k.right,e=M-k.top-k.bottom;E=d3.select(this),pt.utils.initSVG(E);var r,i=0;B&&a.length&&(B=[{values:a[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),O&&((r=d3.layout.stack().offset(L).values(function(t){return t.values}).y(F)(!a.length&&B?B:a)).forEach(function(t,n){t.nonStackable?(a[n].nonStackableSeries=i++,r[n]=a[n]):0<n&&r[n-1].nonStackable&&r[n].values.map(function(t,e){t.y0-=r[n-1].values[e].y,t.y1=t.y0+t.y})}),a=r),a.forEach(function(e,n){e.values.forEach(function(t){t.series=n,t.key=e.key})}),O&&0<a.length&&a[0].values.map(function(t,r){var i=0,o=0;a.map(function(t,e){var n;a[e].nonStackable||((n=t.values[r]).size=Math.abs(n.y),n.y<0?(n.y1=o,o-=n.size):(n.y1=n.size+i,i+=n.size))})});var n=v&&m?[]:a.map(function(t,n){return t.values.map(function(t,e){return{x:W(t,e),y:F(t,e),y0:t.y0,y1:t.y1,idx:n}})});A.domain(v||d3.merge(n).map(function(t){return t.x})).rangeBands(y||[0,t],I),C.domain(m||d3.extent(d3.merge(n).map(function(t){var e=t.y;return O&&!a[t.idx].nonStackable&&(e=0<t.y?t.y1:t.y1+t.y),e}).concat(N))).range(x||[e,0]),A.domain()[0]===A.domain()[1]&&(A.domain()[0]?A.domain([A.domain()[0]-.01*A.domain()[0],A.domain()[1]+.01*A.domain()[1]]):A.domain([-1,1])),C.domain()[0]===C.domain()[1]&&(C.domain()[0]?C.domain([C.domain()[0]+.01*C.domain()[0],C.domain()[1]-.01*C.domain()[1]]):C.domain([-1,1])),b=b||C;var o=E.selectAll("g.nv-wrap.nv-multibar").data([a]),s=o.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),l=s.append("defs"),u=s.append("g"),c=o.select("g");u.append("g").attr("class","nv-groups"),o.attr("transform","translate("+k.left+","+k.top+")"),l.append("clipPath").attr("id","nv-edge-clip-"+S).append("rect"),o.select("#nv-edge-clip-"+S+" rect").attr("width",t).attr("height",e),c.attr("clip-path",D?"url(#nv-edge-clip-"+S+")":"");var d=o.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});d.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var f=H.transition(d.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,P)).attr("y",function(t,e,n){var r=b(0)||0;return O&&a[t.series]&&!a[t.series].nonStackable&&(r=b(t.y0)),r}).attr("height",0).remove();f.delay&&f.delay(function(t,e){return e*(P/(Y+1))-e}),d.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return _(t,e)}).style("stroke",function(t,e){return _(t,e)}),d.style("stroke-opacity",1).style("fill-opacity",z);var p=d.selectAll("rect.nv-bar").data(function(t){return B&&!a.length?B.values:t.values});p.exit().remove();p.enter().append("rect").attr("class",function(t,e){return F(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,e,n){return O&&!a[n].nonStackable?0:n*A.rangeBand()/a.length}).attr("y",function(t,e,n){return b(O&&!a[n].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,e,n){return A.rangeBand()/(O&&!a[n].nonStackable?1:a.length)}).attr("transform",function(t,e){return"translate("+A(W(t,e))+",0)"});p.style("fill",function(t,e,n){return _(t,n,e)}).style("stroke",function(t,e,n){return _(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),V.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),V.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){V.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){V.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){V.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),p.attr("class",function(t,e){return F(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+A(W(t,e))+",0)"}),T&&(g=g||a.map(function(){return!0}),p.style("fill",function(t,e,n){return d3.rgb(T(t,e)).darker(g.map(function(t,e){return e}).filter(function(t,e){return!g[e]})[n]).toString()}).style("stroke",function(t,e,n){return d3.rgb(T(t,e)).darker(g.map(function(t,e){return e}).filter(function(t,e){return!g[e]})[n]).toString()}));var h=p.watchTransition(H,"multibar",Math.min(250,P)).delay(function(t,e){return e*P/a[0].values.length});O?h.attr("y",function(t,e,n){return a[n].nonStackable?F(t,e)<0?C(0):C(0)-C(F(t,e))<-1?C(0)-1:C(F(t,e))||0:C(t.y1)}).attr("height",function(t,e,n){return a[n].nonStackable?Math.max(Math.abs(C(F(t,e))-C(0)),0)||0:Math.max(Math.abs(C(t.y+t.y0)-C(t.y0)),0)}).attr("x",function(t,e,n){var r=0;return a[n].nonStackable&&(r=t.series*A.rangeBand()/a.length,a.length!==i&&(r=a[n].nonStackableSeries*A.rangeBand()/(2*i))),r}).attr("width",function(t,e,n){if(a[n].nonStackable){var r=A.rangeBand()/i;return a.length!==i&&(r=A.rangeBand()/(2*i)),r}return A.rangeBand()}):h.attr("x",function(t,e){return t.series*A.rangeBand()/a.length}).attr("width",A.rangeBand()/a.length).attr("y",function(t,e){return F(t,e)<0?C(0):C(0)-C(F(t,e))<1?C(0)-1:C(F(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(C(F(t,e))-C(0)),1)||0}),A.copy(),b=C.copy(),a[0]&&a[0].values&&(Y=a[0].values.length)}),H.renderEnd("multibar immediate"),e}return e.dispatch=V,e.options=pt.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return w},set:function(t){w=t}},height:{get:function(){return M},set:function(t){M=t}},x:{get:function(){return W},set:function(t){W=t}},y:{get:function(){return F},set:function(t){F=t}},xScale:{get:function(){return A},set:function(t){A=t}},yScale:{get:function(){return C},set:function(t){C=t}},xDomain:{get:function(){return v},set:function(t){v=t}},yDomain:{get:function(){return m},set:function(t){m=t}},xRange:{get:function(){return y},set:function(t){y=t}},yRange:{get:function(){return x},set:function(t){x=t}},forceY:{get:function(){return N},set:function(t){N=t}},stacked:{get:function(){return O},set:function(t){O=t}},stackOffset:{get:function(){return L},set:function(t){L=t}},clipEdge:{get:function(){return D},set:function(t){D=t}},disabled:{get:function(){return g},set:function(t){g=t}},id:{get:function(){return S},set:function(t){S=t}},hideable:{get:function(){return B},set:function(t){B=t}},groupSpacing:{get:function(){return I},set:function(t){I=t}},fillOpacity:{get:function(){return z},set:function(t){z=t}},margin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},duration:{get:function(){return P},set:function(t){P=t,H.reset(P)}},color:{get:function(){return _},set:function(t){_=pt.utils.getColor(t)}},barColor:{get:function(){return T},set:function(t){T=t?pt.utils.getColor(t):null}}}),pt.utils.initOptions(e),e},pt.models.multiBarChart=function(){"use strict";var f,p,h=pt.models.multiBar(),g=pt.models.axis(),v=pt.models.axis(),m=pt.interactiveGuideline(),y=pt.models.legend(),x=pt.models.legend(),b=pt.models.tooltip(),k={top:30,right:20,bottom:50,left:60},w=null,M=null,A=null,C=pt.utils.defaultColor(),S=!0,E={},W=!0,F=!0,N=!0,D=!1,O=!0,L=!1,_=!1,B=0,T=pt.utils.state(),P=null,e=null,I=d3.dispatch("stateChange","changeState","renderEnd"),z=function(){return S?180:0},V=250,H=!1;T.stacked=!1,h.stacked(!1),g.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),v.orient(D?"right":"left").tickFormat(d3.format(",.1f")),b.duration(0).valueFormatter(function(t,e){return v.tickFormat()(t,e)}).headerFormatter(function(t,e){return g.tickFormat()(t,e)}),m.tooltip.valueFormatter(function(t,e){return null==t?"N/A":v.tickFormat()(t,e)}).headerFormatter(function(t,e){return g.tickFormat()(t,e)}),m.tooltip.valueFormatter(function(t,e){return null==t?"N/A":v.tickFormat()(t,e)}).headerFormatter(function(t,e){return g.tickFormat()(t,e)}),m.tooltip.duration(0).valueFormatter(function(t,e){return v.tickFormat()(t,e)}).headerFormatter(function(t,e){return g.tickFormat()(t,e)}),x.updateState(!1);var n=pt.utils.renderWatch(I),Y=!1,G=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:Y}}},X=function(t){return function(n){void 0!==n.stacked&&(Y=n.stacked),void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function j(t){return n.reset(),n.models(h),F&&n.models(g),N&&n.models(v),t.each(function(u){var t=d3.select(this);pt.utils.initSVG(t);var e,n=pt.utils.availableWidth(M,t,k),r=pt.utils.availableHeight(A,t,k);if(j.update=function(){0===V?t.call(j):t.transition().duration(V).call(j)},j.container=this,T.setter(X(u),j.update).getter(G(u)).update(),T.disabled=u.map(function(t){return!!t.disabled}),!P)for(e in P={},T)T[e]instanceof Array?P[e]=T[e].slice(0):P[e]=T[e];if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return pt.utils.noData(j,t),j;t.selectAll(".nv-noData").remove(),f=h.xScale(),p=h.yScale();var i,o,a,s,l=t.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([u]),c=l.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),d=l.select("g");c.append("g").attr("class","nv-x nv-axis"),c.append("g").attr("class","nv-y nv-axis"),c.append("g").attr("class","nv-barsWrap"),c.append("g").attr("class","nv-legendWrap"),c.append("g").attr("class","nv-controlsWrap"),c.append("g").attr("class","nv-interactive"),W?(y.width(n-z()),d.select(".nv-legendWrap").datum(u).call(y),w||y.height()===k.top||(k.top=y.height(),r=pt.utils.availableHeight(A,t,k)),d.select(".nv-legendWrap").attr("transform","translate("+z()+","+-k.top+")")):d.select(".nv-legendWrap").selectAll("*").remove(),S?(i=[{key:E.grouped||"Grouped",disabled:h.stacked()},{key:E.stacked||"Stacked",disabled:!h.stacked()}],x.width(z()).color(["#444","#444","#444"]),d.select(".nv-controlsWrap").datum(i).attr("transform","translate(0,"+-k.top+")").call(x)):d.select(".nv-controlsWrap").selectAll("*").remove(),l.attr("transform","translate("+k.left+","+k.top+")"),D&&d.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),h.disabled(u.map(function(t){return t.disabled})).width(n).height(r).color(u.map(function(t,e){return t.color||C(t,e)}).filter(function(t,e){return!u[e].disabled})),d.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled})).call(h),F&&(g.scale(f)._ticks(pt.utils.calcTicksX(n/100,u)).tickSize(-r,0),d.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")"),d.select(".nv-x.nv-axis").call(g),(o=d.select(".nv-x.nv-axis > g").selectAll("g")).selectAll("line, text").style("opacity",1),L&&(a=function(t,e){return"translate("+t+","+e+")"},o.selectAll("text").attr("transform",function(t,e,n){return a(0,n%2==0?5:17)}),s=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length,d.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return a(0,0===e||s%2!=0?17:5)})),_&&d.selectAll(".tick text").call(pt.utils.wrapTicks,j.xAxis.rangeBand()),O&&o.filter(function(t,e){return e%Math.ceil(u[0].values.length/(n/100))!=0}).selectAll("text, line").style("opacity",0),B&&o.selectAll(".tick text").attr("transform","rotate("+B+" 0,0)").style("text-anchor",0<B?"start":"end"),d.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)),N&&(v.scale(p)._ticks(pt.utils.calcTicksY(r/36,u)).tickSize(-n,0),d.select(".nv-y.nv-axis").call(v)),H&&(m.width(n).height(r).margin({left:k.left,top:k.top}).svgContainer(t).xScale(f),l.select(".nv-interactive").call(m)),y.dispatch.on("stateChange",function(t){for(var e in t)T[e]=t[e];I.stateChange(T),j.update()}),x.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(i=i.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case E.grouped:h.stacked(!1);break;case"Stacked":case E.stacked:h.stacked(!0)}T.stacked=h.stacked(),I.stateChange(T),j.update()}}),I.on("changeState",function(n){void 0!==n.disabled&&(u.forEach(function(t,e){t.disabled=n.disabled[e]}),T.disabled=n.disabled),void 0!==n.stacked&&(h.stacked(n.stacked),T.stacked=n.stacked,Y=n.stacked),j.update()}),H?(m.dispatch.on("elementMousemove",function(r){var i,o,a,s,l;null!=r.pointXValue&&(l=[],u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){o=f.domain().indexOf(r.pointXValue);var n=t.values[o];void 0!==n&&(s=n.x,void 0===i&&(i=n),void 0===a&&(a=r.mouseX),l.push({key:t.key,value:j.y()(n,o),color:C(t,t.seriesIndex),data:t.values[o]}))}),m.tooltip.data({value:s,index:o,series:l})(),m.renderGuideLine(a))}),m.dispatch.on("elementMouseout",function(t){m.tooltip.hidden(!0)})):(h.dispatch.on("elementMouseover.tooltip",function(t){t.value=j.x()(t.data),t.series={key:t.data.key,value:j.y()(t.data),color:t.color},b.data(t).hidden(!1)}),h.dispatch.on("elementMouseout.tooltip",function(t){b.hidden(!0)}),h.dispatch.on("elementMousemove.tooltip",function(t){b()}))}),n.renderEnd("multibarchart immediate"),j}return j.dispatch=I,j.multibar=h,j.legend=y,j.controls=x,j.xAxis=g,j.yAxis=v,j.state=T,j.tooltip=b,j.interactiveLayer=m,j.options=pt.utils.optionsFunc.bind(j),j._options=Object.create({},{width:{get:function(){return M},set:function(t){M=t}},height:{get:function(){return A},set:function(t){A=t}},showLegend:{get:function(){return W},set:function(t){W=t}},showControls:{get:function(){return S},set:function(t){S=t}},controlLabels:{get:function(){return E},set:function(t){E=t}},showXAxis:{get:function(){return F},set:function(t){F=t}},showYAxis:{get:function(){return N},set:function(t){N=t}},defaultState:{get:function(){return P},set:function(t){P=t}},noData:{get:function(){return e},set:function(t){e=t}},reduceXTicks:{get:function(){return O},set:function(t){O=t}},rotateLabels:{get:function(){return B},set:function(t){B=t}},staggerLabels:{get:function(){return L},set:function(t){L=t}},wrapLabels:{get:function(){return _},set:function(t){_=!!t}},margin:{get:function(){return k},set:function(t){void 0!==t.top&&(k.top=t.top,w=t.top),k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},duration:{get:function(){return V},set:function(t){V=t,h.duration(V),g.duration(V),v.duration(V),n.reset(V)}},color:{get:function(){return C},set:function(t){C=pt.utils.getColor(t),y.color(C)}},rightAlignYAxis:{get:function(){return D},set:function(t){D=t,v.orient(D?"right":"left")}},useInteractiveGuideline:{get:function(){return H},set:function(t){H=t}},barColor:{get:function(){return h.barColor},set:function(t){h.barColor(t),y.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),pt.utils.inheritOptions(j,h),pt.utils.initOptions(j),j},pt.models.multiBarHorizontal=function(){"use strict";var c,d,f,p,h,g,v={top:0,right:0,bottom:0,left:0},m=960,y=500,e=Math.floor(1e4*Math.random()),x=null,b=d3.scale.ordinal(),k=d3.scale.linear(),w=function(t){return t.x},M=function(t){return t.y},A=function(t){return t.yErr},C=[0],S=pt.utils.defaultColor(),E=null,W=!1,F=!1,N=!1,D=60,O=.1,L=.75,_=d3.format(",.2f"),n=250,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=pt.utils.renderWatch(B,n);function r(t){return T.reset(),t.each(function(o){var t=m-v.left-v.right,e=y-v.top-v.bottom;x=d3.select(this),pt.utils.initSVG(x),W&&(o=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(M)(o)),o.forEach(function(e,n){e.values.forEach(function(t){t.series=n,t.key=e.key})}),W&&o[0].values.map(function(t,n){var r=0,i=0;o.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i-e.size,i-=e.size):(e.y1=r,r+=e.size)})});var n=d&&f?[]:o.map(function(t){return t.values.map(function(t,e){return{x:w(t,e),y:M(t,e),y0:t.y0,y1:t.y1}})});b.domain(d||d3.merge(n).map(function(t){return t.x})).rangeBands(p||[0,e],O),k.domain(f||d3.extent(d3.merge(n).map(function(t){return W?0<t.y?t.y1+t.y:t.y1:t.y}).concat(C))),F&&!W?k.range(h||[k.domain()[0]<0?D:0,t-(0<k.domain()[1]?D:0)]):k.range(h||[0,t]),g=g||d3.scale.linear().domain(k.domain()).range([k(0),k(0)]);var r=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([o]),i=r.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),a=(i.append("defs"),i.append("g"));r.select("g");a.append("g").attr("class","nv-groups"),r.attr("transform","translate("+v.left+","+v.top+")");var s=r.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});s.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),s.exit().watchTransition(T,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),s.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return S(t,e)}).style("stroke",function(t,e){return S(t,e)}),s.watchTransition(T,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",L);var l=s.selectAll("g.nv-bar").data(function(t){return t.values});l.exit().remove();var u=l.enter().append("g").attr("transform",function(t,e,n){return"translate("+g(W?t.y0:0)+","+(W?0:n*b.rangeBand()/o.length+b(w(t,e)))+")"});u.append("rect").attr("width",0).attr("height",b.rangeBand()/(W?1:o.length)),l.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),B.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),B.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){B.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){B.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){B.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}).on("dblclick",function(t,e){B.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),A(o[0],0)&&(u.append("polyline"),l.select("polyline").attr("fill","none").attr("points",function(t,e){var n=A(t,e),r=.8*b.rangeBand()/(2*(W?1:o.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map(function(t){return k(t)-k(0)}))[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]].map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,e){var n=b.rangeBand()/(2*(W?1:o.length));return"translate("+(M(t,e)<0?0:k(M(t,e))-k(0))+", "+n+")"})),u.append("text"),F&&!W?(l.select("text").attr("text-anchor",function(t,e){return M(t,e)<0?"end":"start"}).attr("y",b.rangeBand()/(2*o.length)).attr("dy",".32em").text(function(t,e){var n=_(M(t,e)),r=A(t,e);return void 0===r?n:r.length?n+"+"+_(Math.abs(r[1]))+"-"+_(Math.abs(r[0])):n+"±"+_(Math.abs(r))}),l.watchTransition(T,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return M(t,e)<0?-4:k(M(t,e))-k(0)+4})):l.selectAll("text").text(""),N&&!W?(u.append("text").classed("nv-bar-label",!0),l.select("text.nv-bar-label").attr("text-anchor",function(t,e){return M(t,e)<0?"start":"end"}).attr("y",b.rangeBand()/(2*o.length)).attr("dy",".32em").text(function(t,e){return w(t,e)}),l.watchTransition(T,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return M(t,e)<0?k(0)-k(M(t,e))+4:-4})):l.selectAll("text.nv-bar-label").text(""),l.attr("class",function(t,e){return M(t,e)<0?"nv-bar negative":"nv-bar positive"}),E&&(c=c||o.map(function(){return!0}),l.style("fill",function(t,e,n){return d3.rgb(E(t,e)).darker(c.map(function(t,e){return e}).filter(function(t,e){return!c[e]})[n]).toString()}).style("stroke",function(t,e,n){return d3.rgb(E(t,e)).darker(c.map(function(t,e){return e}).filter(function(t,e){return!c[e]})[n]).toString()})),W?l.watchTransition(T,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+k(t.y1)+","+b(w(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(k(M(t,e)+t.y0)-k(t.y0))||0}).attr("height",b.rangeBand()):l.watchTransition(T,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+(M(t,e)<0?k(M(t,e)):k(0))+","+(t.series*b.rangeBand()/o.length+b(w(t,e)))+")"}).select("rect").attr("height",b.rangeBand()/o.length).attr("width",function(t,e){return Math.max(Math.abs(k(M(t,e))-k(0)),1)||0}),b.copy(),g=k.copy()}),T.renderEnd("multibarHorizontal immediate"),r}return r.dispatch=B,r.options=pt.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return w},set:function(t){w=t}},y:{get:function(){return M},set:function(t){M=t}},yErr:{get:function(){return A},set:function(t){A=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return k},set:function(t){k=t}},xDomain:{get:function(){return d},set:function(t){d=t}},yDomain:{get:function(){return f},set:function(t){f=t}},xRange:{get:function(){return p},set:function(t){p=t}},yRange:{get:function(){return h},set:function(t){h=t}},forceY:{get:function(){return C},set:function(t){C=t}},stacked:{get:function(){return W},set:function(t){W=t}},showValues:{get:function(){return F},set:function(t){F=t}},disabled:{get:function(){return c},set:function(t){c=t}},id:{get:function(){return e},set:function(t){e=t}},valueFormat:{get:function(){return _},set:function(t){_=t}},valuePadding:{get:function(){return D},set:function(t){D=t}},groupSpacing:{get:function(){return O},set:function(t){O=t}},fillOpacity:{get:function(){return L},set:function(t){L=t}},margin:{get:function(){return v},set:function(t){v.top=void 0!==t.top?t.top:v.top,v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},duration:{get:function(){return n},set:function(t){n=t,T.reset(n)}},color:{get:function(){return S},set:function(t){S=pt.utils.getColor(t)}},barColor:{get:function(){return E},set:function(t){E=t?pt.utils.getColor(t):null}}}),pt.utils.initOptions(r),r},pt.models.multiBarHorizontalChart=function(){"use strict";var u,c,d=pt.models.multiBarHorizontal(),f=pt.models.axis(),p=pt.models.axis(),h=pt.models.legend().height(30),g=pt.models.legend().height(30),e=pt.models.tooltip(),v={top:30,right:20,bottom:50,left:60},m=null,y=null,x=null,b=pt.utils.defaultColor(),k=!0,w={},M=!0,A=!0,C=!0,S=!1,E=pt.utils.state(),W=null,n=null,F=d3.dispatch("stateChange","changeState","renderEnd"),N=function(){return k?180:0},D=250;E.stacked=!1,d.stacked(S),f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),p.orient("bottom").tickFormat(d3.format(",.1f")),e.duration(0).valueFormatter(function(t,e){return p.tickFormat()(t,e)}).headerFormatter(function(t,e){return f.tickFormat()(t,e)}),g.updateState(!1);var O=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:S}}},L=function(t){return function(n){void 0!==n.stacked&&(S=n.stacked),void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},r=pt.utils.renderWatch(F,D);function _(t){return r.reset(),r.models(d),A&&r.models(f),C&&r.models(p),t.each(function(r){var t=d3.select(this);pt.utils.initSVG(t);var e,n=pt.utils.availableWidth(y,t,v),i=pt.utils.availableHeight(x,t,v);if(_.update=function(){t.transition().duration(D).call(_)},_.container=this,S=d.stacked(),E.setter(L(r),_.update).getter(O(r)).update(),E.disabled=r.map(function(t){return!!t.disabled}),!W)for(e in W={},E)E[e]instanceof Array?W[e]=E[e].slice(0):W[e]=E[e];if(!(r&&r.length&&r.filter(function(t){return t.values.length}).length))return pt.utils.noData(_,t),_;t.selectAll(".nv-noData").remove(),u=d.xScale(),c=d.yScale().clamp(!0);var o,a=t.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([r]),s=a.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),l=a.select("g");s.append("g").attr("class","nv-x nv-axis"),s.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),s.append("g").attr("class","nv-barsWrap"),s.append("g").attr("class","nv-legendWrap"),s.append("g").attr("class","nv-controlsWrap"),M?(h.width(n-N()),l.select(".nv-legendWrap").datum(r).call(h),m||h.height()===v.top||(v.top=h.height(),i=pt.utils.availableHeight(x,t,v)),l.select(".nv-legendWrap").attr("transform","translate("+N()+","+-v.top+")")):l.select(".nv-legendWrap").selectAll("*").remove(),k?(o=[{key:w.grouped||"Grouped",disabled:d.stacked()},{key:w.stacked||"Stacked",disabled:!d.stacked()}],g.width(N()).color(["#444","#444","#444"]),l.select(".nv-controlsWrap").datum(o).attr("transform","translate(0,"+-v.top+")").call(g)):l.select(".nv-controlsWrap").selectAll("*").remove(),a.attr("transform","translate("+v.left+","+v.top+")"),d.disabled(r.map(function(t){return t.disabled})).width(n).height(i).color(r.map(function(t,e){return t.color||b(t,e)}).filter(function(t,e){return!r[e].disabled})),l.select(".nv-barsWrap").datum(r.filter(function(t){return!t.disabled})).transition().call(d),A&&(f.scale(u)._ticks(pt.utils.calcTicksY(i/24,r)).tickSize(-n,0),l.select(".nv-x.nv-axis").call(f),l.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),C&&(p.scale(c)._ticks(pt.utils.calcTicksX(n/100,r)).tickSize(-i,0),l.select(".nv-y.nv-axis").attr("transform","translate(0,"+i+")"),l.select(".nv-y.nv-axis").call(p)),l.select(".nv-zeroLine line").attr("x1",c(0)).attr("x2",c(0)).attr("y1",0).attr("y2",-i),h.dispatch.on("stateChange",function(t){for(var e in t)E[e]=t[e];F.stateChange(E),_.update()}),g.dispatch.on("legendClick",function(t,e){if(t.disabled){switch(o=o.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case w.grouped:d.stacked(!1);break;case"Stacked":case w.stacked:d.stacked(!0)}E.stacked=d.stacked(),F.stateChange(E),S=d.stacked(),_.update()}}),F.on("changeState",function(n){void 0!==n.disabled&&(r.forEach(function(t,e){t.disabled=n.disabled[e]}),E.disabled=n.disabled),void 0!==n.stacked&&(d.stacked(n.stacked),E.stacked=n.stacked,S=n.stacked),_.update()})}),r.renderEnd("multibar horizontal chart immediate"),_}return d.dispatch.on("elementMouseover.tooltip",function(t){t.value=_.x()(t.data),t.series={key:t.data.key,value:_.y()(t.data),color:t.color},e.data(t).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(t){e()}),_.dispatch=F,_.multibar=d,_.legend=h,_.controls=g,_.xAxis=f,_.yAxis=p,_.state=E,_.tooltip=e,_.options=pt.utils.optionsFunc.bind(_),_._options=Object.create({},{width:{get:function(){return y},set:function(t){y=t}},height:{get:function(){return x},set:function(t){x=t}},showLegend:{get:function(){return M},set:function(t){M=t}},showControls:{get:function(){return k},set:function(t){k=t}},controlLabels:{get:function(){return w},set:function(t){w=t}},showXAxis:{get:function(){return A},set:function(t){A=t}},showYAxis:{get:function(){return C},set:function(t){C=t}},defaultState:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return v},set:function(t){void 0!==t.top&&(v.top=t.top,m=t.top),v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},duration:{get:function(){return D},set:function(t){D=t,r.reset(D),d.duration(D),f.duration(D),p.duration(D)}},color:{get:function(){return b},set:function(t){b=pt.utils.getColor(t),h.color(b)}},barColor:{get:function(){return d.barColor},set:function(t){d.barColor(t),h.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),pt.utils.inheritOptions(_,d),pt.utils.initOptions(_),_},pt.models.multiChart=function(){"use strict";var B,T,P={top:30,right:20,bottom:50,left:60},I=null,z=pt.utils.defaultColor(),V=null,H=null,Y=!0,e=null,G=function(t){return t.x},X=function(t){return t.y},j="linear",n=!0,R=pt.interactiveGuideline(),Z=!1,q=" (right axis)",r=250,K=d3.scale.linear(),U=d3.scale.linear(),Q=d3.scale.linear(),J=pt.models.line().yScale(U).duration(r),$=pt.models.line().yScale(Q).duration(r),tt=pt.models.scatter().yScale(U).duration(r),et=pt.models.scatter().yScale(Q).duration(r),nt=pt.models.multiBar().stacked(!1).yScale(U).duration(r),rt=pt.models.multiBar().stacked(!1).yScale(Q).duration(r),it=pt.models.stackedArea().yScale(U).duration(r),ot=pt.models.stackedArea().yScale(Q).duration(r),at=pt.models.axis().scale(K).orient("bottom").tickPadding(5).duration(r),st=pt.models.axis().scale(U).orient("left").duration(r),lt=pt.models.axis().scale(Q).orient("right").duration(r),ut=pt.models.legend().height(30),ct=pt.models.tooltip(),t=d3.dispatch(),dt=[J,$,tt,et,nt,rt,it,ot];function ft(t){return t.each(function(r){var t=d3.select(this);pt.utils.initSVG(t),ft.update=function(){t.transition().call(ft)},ft.container=this;var e=pt.utils.availableWidth(V,t,P),n=pt.utils.availableHeight(H,t,P),i=r.filter(function(t){return"line"==t.type&&1==t.yAxis}),o=r.filter(function(t){return"line"==t.type&&2==t.yAxis}),a=r.filter(function(t){return"scatter"==t.type&&1==t.yAxis}),s=r.filter(function(t){return"scatter"==t.type&&2==t.yAxis}),l=r.filter(function(t){return"bar"==t.type&&1==t.yAxis}),u=r.filter(function(t){return"bar"==t.type&&2==t.yAxis}),c=r.filter(function(t){return"area"==t.type&&1==t.yAxis}),d=r.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(r&&r.length&&r.filter(function(t){return t.values.length}).length))return pt.utils.noData(ft,t),ft;t.selectAll(".nv-noData").remove();var f=r.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:G(t),y:X(t)}})}),p=r.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:G(t),y:X(t)}})});K.domain(d3.extent(d3.merge(f.concat(p)),function(t){return t.x})).range([0,e]);var h=t.selectAll("g.wrap.multiChart").data([r]),g=h.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");g.append("g").attr("class","nv-x nv-axis"),g.append("g").attr("class","nv-y1 nv-axis"),g.append("g").attr("class","nv-y2 nv-axis"),g.append("g").attr("class","stack1Wrap"),g.append("g").attr("class","stack2Wrap"),g.append("g").attr("class","bars1Wrap"),g.append("g").attr("class","bars2Wrap"),g.append("g").attr("class","scatters1Wrap"),g.append("g").attr("class","scatters2Wrap"),g.append("g").attr("class","lines1Wrap"),g.append("g").attr("class","lines2Wrap"),g.append("g").attr("class","legendWrap"),g.append("g").attr("class","nv-interactive");var v,m,y=h.select("g"),x=r.map(function(t,e){return r[e].color||z(t,e)});Y?(v=ut.align()?e/2:e,m=ut.align()?v:0,ut.width(v),ut.color(x),y.select(".legendWrap").datum(r.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":q),t})).call(ut),I||ut.height()===P.top||(P.top=ut.height(),n=pt.utils.availableHeight(H,t,P)),y.select(".legendWrap").attr("transform","translate("+m+","+-P.top+")")):y.select(".legendWrap").selectAll("*").remove(),J.width(e).height(n).interpolate(j).color(x.filter(function(t,e){return!r[e].disabled&&1==r[e].yAxis&&"line"==r[e].type})),$.width(e).height(n).interpolate(j).color(x.filter(function(t,e){return!r[e].disabled&&2==r[e].yAxis&&"line"==r[e].type})),tt.width(e).height(n).color(x.filter(function(t,e){return!r[e].disabled&&1==r[e].yAxis&&"scatter"==r[e].type})),et.width(e).height(n).color(x.filter(function(t,e){return!r[e].disabled&&2==r[e].yAxis&&"scatter"==r[e].type})),nt.width(e).height(n).color(x.filter(function(t,e){return!r[e].disabled&&1==r[e].yAxis&&"bar"==r[e].type})),rt.width(e).height(n).color(x.filter(function(t,e){return!r[e].disabled&&2==r[e].yAxis&&"bar"==r[e].type})),it.width(e).height(n).interpolate(j).color(x.filter(function(t,e){return!r[e].disabled&&1==r[e].yAxis&&"area"==r[e].type})),ot.width(e).height(n).interpolate(j).color(x.filter(function(t,e){return!r[e].disabled&&2==r[e].yAxis&&"area"==r[e].type})),y.attr("transform","translate("+P.left+","+P.top+")");var b=y.select(".lines1Wrap").datum(i.filter(function(t){return!t.disabled})),k=y.select(".scatters1Wrap").datum(a.filter(function(t){return!t.disabled})),w=y.select(".bars1Wrap").datum(l.filter(function(t){return!t.disabled})),M=y.select(".stack1Wrap").datum(c.filter(function(t){return!t.disabled})),A=y.select(".lines2Wrap").datum(o.filter(function(t){return!t.disabled})),C=y.select(".scatters2Wrap").datum(s.filter(function(t){return!t.disabled})),S=y.select(".bars2Wrap").datum(u.filter(function(t){return!t.disabled})),E=y.select(".stack2Wrap").datum(d.filter(function(t){return!t.disabled})),W=c.length?c.map(function(t){return t.values}).reduce(function(t,n){return t.map(function(t,e){return{x:t.x,y:t.y+n[e].y}})}).concat([{x:0,y:0}]):[],F=d.length?d.map(function(t){return t.values}).reduce(function(t,n){return t.map(function(t,e){return{x:t.x,y:t.y+n[e].y}})}).concat([{x:0,y:0}]):[];function N(t){var n=2===r[t.seriesIndex].yAxis?lt:st;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},ct.duration(0).headerFormatter(function(t,e){return at.tickFormat()(t,e)}).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function D(t){var n=2===r[t.seriesIndex].yAxis?lt:st;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},ct.duration(100).headerFormatter(function(t,e){return at.tickFormat()(t,e)}).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function O(t){var n=2===r[t.seriesIndex].yAxis?lt:st;t.point.x=it.x()(t.point),t.point.y=it.y()(t.point),ct.duration(0).headerFormatter(function(t,e){return at.tickFormat()(t,e)}).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function L(t){var n=2===r[t.data.series].yAxis?lt:st;t.value=nt.x()(t.data),t.series={value:nt.y()(t.data),color:t.color,key:t.data.key},ct.duration(0).headerFormatter(function(t,e){return at.tickFormat()(t,e)}).valueFormatter(function(t,e){return n.tickFormat()(t,e)}).data(t).hidden(!1)}function _(){for(var t=0,e=dt.length;t<e;t++){var n=dt[t];try{n.clearHighlights()}catch(t){}}}U.domain(B||d3.extent(d3.merge(f).concat(W),function(t){return t.y})).range([0,n]),Q.domain(T||d3.extent(d3.merge(p).concat(F),function(t){return t.y})).range([0,n]),J.yDomain(U.domain()),tt.yDomain(U.domain()),nt.yDomain(U.domain()),it.yDomain(U.domain()),$.yDomain(Q.domain()),et.yDomain(Q.domain()),rt.yDomain(Q.domain()),ot.yDomain(Q.domain()),c.length&&d3.transition(M).call(it),d.length&&d3.transition(E).call(ot),l.length&&d3.transition(w).call(nt),u.length&&d3.transition(S).call(rt),i.length&&d3.transition(b).call(J),o.length&&d3.transition(A).call($),a.length&&d3.transition(k).call(tt),s.length&&d3.transition(C).call(et),at._ticks(pt.utils.calcTicksX(e/100,r)).tickSize(-n,0),y.select(".nv-x.nv-axis").attr("transform","translate(0,"+n+")"),d3.transition(y.select(".nv-x.nv-axis")).call(at),st._ticks(pt.utils.calcTicksY(n/36,r)).tickSize(-e,0),d3.transition(y.select(".nv-y1.nv-axis")).call(st),lt._ticks(pt.utils.calcTicksY(n/36,r)).tickSize(-e,0),d3.transition(y.select(".nv-y2.nv-axis")).call(lt),y.select(".nv-y1.nv-axis").classed("nv-disabled",!f.length).attr("transform","translate("+K.range()[0]+",0)"),y.select(".nv-y2.nv-axis").classed("nv-disabled",!p.length).attr("transform","translate("+K.range()[1]+",0)"),ut.dispatch.on("stateChange",function(t){ft.update()}),Z&&(R.width(e).height(n).margin({left:P.left,top:P.top}).svgContainer(t).xScale(K),h.select(".nv-interactive").call(R)),Z?(R.dispatch.on("elementMousemove",function(a){_();var s,l,u,c=[];r.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){var n=K.domain(),r=t.values.filter(function(t,e){return ft.x()(t,e)>=n[0]&&ft.x()(t,e)<=n[1]}),i=r[l=pt.interactiveBisect(r,a.pointXValue,ft.x())],o=ft.y()(i,l);null!==o&&function(t,e,n){for(var r=0,i=dt.length;r<i;r++){var o=dt[r];try{o.highlightPoint(t,e,n)}catch(t){}}}(e,l,!0),void 0!==i&&(void 0===s&&(s=i),void 0===u&&(u=K(ft.x()(i,l))),c.push({key:t.key,value:o,color:z(t,t.seriesIndex),data:i,yAxis:2==t.yAxis?lt:st}))});R.tooltip.headerFormatter(function(t,e){return at.tickFormat()(t,e)}).valueFormatter(R.tooltip.valueFormatter()||function(t,e){var n=c[e].yAxis;return null==t?"N/A":n.tickFormat()(t)}).data({value:ft.x()(s,l),index:l,series:c})(),R.renderGuideLine(u)}),R.dispatch.on("elementMouseout",function(t){_()})):(J.dispatch.on("elementMouseover.tooltip",N),$.dispatch.on("elementMouseover.tooltip",N),J.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),$.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),tt.dispatch.on("elementMouseover.tooltip",D),et.dispatch.on("elementMouseover.tooltip",D),tt.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),et.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),it.dispatch.on("elementMouseover.tooltip",O),ot.dispatch.on("elementMouseover.tooltip",O),it.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),ot.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),nt.dispatch.on("elementMouseover.tooltip",L),rt.dispatch.on("elementMouseover.tooltip",L),nt.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),rt.dispatch.on("elementMouseout.tooltip",function(t){ct.hidden(!0)}),nt.dispatch.on("elementMousemove.tooltip",function(t){ct()}),rt.dispatch.on("elementMousemove.tooltip",function(t){ct()}))}),ft}return ft.dispatch=t,ft.legend=ut,ft.lines1=J,ft.lines2=$,ft.scatters1=tt,ft.scatters2=et,ft.bars1=nt,ft.bars2=rt,ft.stack1=it,ft.stack2=ot,ft.xAxis=at,ft.yAxis1=st,ft.yAxis2=lt,ft.tooltip=ct,ft.interactiveLayer=R,ft.options=pt.utils.optionsFunc.bind(ft),ft._options=Object.create({},{width:{get:function(){return V},set:function(t){V=t}},height:{get:function(){return H},set:function(t){H=t}},showLegend:{get:function(){return Y},set:function(t){Y=t}},yDomain1:{get:function(){return B},set:function(t){B=t}},yDomain2:{get:function(){return T},set:function(t){T=t}},noData:{get:function(){return e},set:function(t){e=t}},interpolate:{get:function(){return j},set:function(t){j=t}},legendRightAxisHint:{get:function(){return q},set:function(t){q=t}},margin:{get:function(){return P},set:function(t){void 0!==t.top&&(P.top=t.top,I=t.top),P.right=void 0!==t.right?t.right:P.right,P.bottom=void 0!==t.bottom?t.bottom:P.bottom,P.left=void 0!==t.left?t.left:P.left}},color:{get:function(){return z},set:function(t){z=pt.utils.getColor(t)}},x:{get:function(){return G},set:function(t){G=t,J.x(t),$.x(t),tt.x(t),et.x(t),nt.x(t),rt.x(t),it.x(t),ot.x(t)}},y:{get:function(){return X},set:function(t){X=t,J.y(t),$.y(t),tt.y(t),et.y(t),it.y(t),ot.y(t),nt.y(t),rt.y(t)}},useVoronoi:{get:function(){return n},set:function(t){n=t,J.useVoronoi(t),$.useVoronoi(t),it.useVoronoi(t),ot.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return Z},set:function(t){(Z=t)&&(J.interactive(!1),J.useVoronoi(!1),$.interactive(!1),$.useVoronoi(!1),it.interactive(!1),it.useVoronoi(!1),ot.interactive(!1),ot.useVoronoi(!1),tt.interactive(!1),et.interactive(!1))}},duration:{get:function(){return r},set:function(t){r=t,[J,$,it,ot,tt,et,at,st,lt].forEach(function(t){t.duration(r)})}}}),pt.utils.initOptions(ft),ft},pt.models.ohlcBar=function(){"use strict";var c,d,f,p,h={top:0,right:0,bottom:0,left:0},g=null,v=null,m=Math.floor(1e4*Math.random()),y=null,x=d3.scale.linear(),b=d3.scale.linear(),k=function(t){return t.x},w=function(t){return t.y},M=function(t){return t.open},A=function(t){return t.close},C=function(t){return t.high},S=function(t){return t.low},E=[],W=[],F=!1,N=!0,D=pt.utils.defaultColor(),e=!1,O=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function n(t){return t.each(function(r){y=d3.select(this);var i=pt.utils.availableWidth(g,y,h),t=pt.utils.availableHeight(v,y,h);pt.utils.initSVG(y);var n=i/r[0].values.length*.9;x.domain(c||d3.extent(r[0].values.map(k).concat(E))),F?x.range(f||[.5*i/r[0].values.length,i*(r[0].values.length-.5)/r[0].values.length]):x.range(f||[5+n/2,i-n/2-5]),b.domain(d||[d3.min(r[0].values.map(S).concat(W)),d3.max(r[0].values.map(C).concat(W))]).range(p||[t,0]),x.domain()[0]===x.domain()[1]&&(x.domain()[0]?x.domain([x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]):x.domain([-1,1])),b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]+.01*b.domain()[0],b.domain()[1]-.01*b.domain()[1]]):b.domain([-1,1]));var e=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([r[0].values]),o=e.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),a=o.append("defs"),s=o.append("g"),l=e.select("g");s.append("g").attr("class","nv-ticks"),e.attr("transform","translate("+h.left+","+h.top+")"),y.on("click",function(t,e){O.chartClick({data:t,index:e,pos:d3.event,id:m})}),a.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect"),e.select("#nv-chart-clip-path-"+m+" rect").attr("width",i).attr("height",t),l.attr("clip-path",N?"url(#nv-chart-clip-path-"+m+")":"");var u=e.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});u.exit().remove(),u.enter().append("path").attr("class",function(t,e,n){return(M(t,e)>A(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(b(M(t,e))-b(C(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(b(S(t,e))-b(M(t,e)))+"l0,"+(b(A(t,e))-b(S(t,e)))+"l"+n/2+",0l"+-n/2+",0z"}).attr("transform",function(t,e){return"translate("+x(k(t,e))+","+b(C(t,e))+")"}).attr("fill",function(t,e){return D[0]}).attr("stroke",function(t,e){return D[0]}).attr("x",0).attr("y",function(t,e){return b(Math.max(0,w(t,e)))}).attr("height",function(t,e){return Math.abs(b(w(t,e))-b(0))}),u.attr("class",function(t,e,n){return(M(t,e)>A(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(u).attr("transform",function(t,e){return"translate("+x(k(t,e))+","+b(C(t,e))+")"}).attr("d",function(t,e){var n=i/r[0].values.length*.9;return"m0,0l0,"+(b(M(t,e))-b(C(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(b(S(t,e))-b(M(t,e)))+"l0,"+(b(A(t,e))-b(S(t,e)))+"l"+n/2+",0l"+-n/2+",0z"})}),n}return n.highlightPoint=function(t,e){n.clearHighlights(),y.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},n.clearHighlights=function(){y.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},n.dispatch=O,n.options=pt.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return x},set:function(t){x=t}},yScale:{get:function(){return b},set:function(t){b=t}},xDomain:{get:function(){return c},set:function(t){c=t}},yDomain:{get:function(){return d},set:function(t){d=t}},xRange:{get:function(){return f},set:function(t){f=t}},yRange:{get:function(){return p},set:function(t){p=t}},forceX:{get:function(){return E},set:function(t){E=t}},forceY:{get:function(){return W},set:function(t){W=t}},padData:{get:function(){return F},set:function(t){F=t}},clipEdge:{get:function(){return N},set:function(t){N=t}},id:{get:function(){return m},set:function(t){m=t}},interactive:{get:function(){return e},set:function(t){e=t}},x:{get:function(){return k},set:function(t){k=t}},y:{get:function(){return w},set:function(t){w=t}},open:{get:function(){return M()},set:function(t){M=t}},close:{get:function(){return A()},set:function(t){A=t}},high:{get:function(){return C},set:function(t){C=t}},low:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return h},set:function(t){h.top=null!=t.top?t.top:h.top,h.right=null!=t.right?t.right:h.right,h.bottom=null!=t.bottom?t.bottom:h.bottom,h.left=null!=t.left?t.left:h.left}},color:{get:function(){return D},set:function(t){D=pt.utils.getColor(t)}}}),pt.utils.initOptions(n),n},pt.models.parallelCoordinates=function(){"use strict";var S,E,W,F={top:30,right:0,bottom:10,left:0},N=null,D=null,O=null,L=null,_=d3.scale.ordinal(),B={},T="undefined values",P=[],I=[],z=[],V=!0,H=pt.utils.defaultColor(),Y=[],G=[],X=[],j=[],R=1,Z=d3.svg.line(),q=d3.svg.axis(),K=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),e=pt.utils.renderWatch(K);function n(t){return e.reset(),t.each(function(t){var r,e=d3.select(this);O=pt.utils.availableWidth(N,e,F),L=pt.utils.availableHeight(D,e,F),pt.utils.initSVG(e),void 0===t[0].values&&(r=[],t.forEach(function(e){var n={};Object.keys(e).forEach(function(t){"name"!==t&&(n[t]=e[t])}),r.push({key:e.name,values:n})}),t=r);var a=t.map(function(t){return t.values});0===G.length&&(G=t),z=P.sort(function(t,e){return t.currentPosition-e.currentPosition}).map(function(t){return t.key}),I=P.filter(function(t){return!t.disabled}),_.rangePoints([0,O],1).domain(I.map(function(t){return t.key}));var s={},l=!1,i=[];z.forEach(function(e){var t=d3.extent(a,function(t){return+t[e]}),n=t[0],r=t[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,r=n=0),n===r&&(--n,r+=1);var o=Y.filter(function(t){return t.dimension==e});0!==o.length&&(i?(n=B[e].domain()[0],r=B[e].domain()[1]):!o[0].hasOnlyNaN&&V?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,s[e]=B[e].domain()[1],l=!0)),B[e]=d3.scale.linear().domain([n,r]).range([.9*(L-12),0]),j=[],B[e].brush=d3.svg.brush().y(B[e]).on("brushstart",k).on("brush",w).on("brushend",M)});var n=e.selectAll("g.nv-wrap.nv-parallelCoordinates").data([t]),o=n.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),u=n.select("g");o.append("g").attr("class","nv-parallelCoordinates background"),o.append("g").attr("class","nv-parallelCoordinates foreground"),o.append("g").attr("class","nv-parallelCoordinates missingValuesline"),n.attr("transform","translate("+F.left+","+F.top+")"),Z.interpolate("cardinal").tension(R),q.orient("left");var c,d,f,p=d3.behavior.drag().on("dragstart",function(t){X[t.key]=this.parentNode.__origin__=_(t.key),E.attr("visibility","hidden")}).on("drag",function(t){X[t.key]=Math.min(O,Math.max(0,this.parentNode.__origin__+=d3.event.x)),S.attr("d",x),I.sort(function(t,e){return C(t.key)-C(e.key)}),I.forEach(function(t,e){return t.currentPosition=e}),_.domain(I.map(function(t){return t.key})),W.attr("transform",function(t){return"translate("+C(t.key)+")"})}).on("dragend",function(t,e){delete this.parentNode.__origin__,delete X[t.key],d3.select(this.parentNode).attr("transform","translate("+_(t.key)+")"),S.attr("d",x),E.attr("d",x).attr("visibility",null),K.dimensionsOrder(I)}),h=_.range()[1]-_.range()[0],h=isNaN(h)?_.range()[0]:h;isNaN(h)||(d=[0+h/2,L-12,O-h/2,L-12],(f=n.select(".missingValuesline").selectAll("line").data([d])).enter().append("line"),f.exit().remove(),f.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),(c=n.select(".missingValuesline").selectAll("text").data([T])).append("text").data([T]),c.enter().append("text"),c.exit().remove(),c.attr("y",L).attr("x",O-92-h/2).text(function(t){return t})),(E=n.select(".background").selectAll("path").data(t)).enter().append("path"),E.exit().remove(),E.attr("d",x),(S=n.select(".foreground").selectAll("path").data(t)).enter().append("path"),S.exit().remove(),S.attr("d",x).style("stroke-width",function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth}).attr("stroke",function(t,e){return t.color||H(t,e)}),S.on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),K.elementMouseover({label:t.name,color:t.color||H(t,e),values:t.values,dimensions:I})}),S.on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),K.elementMouseout({label:t.name,index:e})}),S.on("mousemove",function(t,e){K.elementMousemove()}),S.on("click",function(t){K.elementClick({id:t.id})});var g=(W=u.selectAll(".dimension").data(I)).enter().append("g").attr("class","nv-parallelCoordinates dimension");W.attr("transform",function(t){return"translate("+_(t.key)+",0)"}),g.append("g").attr("class","nv-axis"),g.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(t,e){K.elementMouseover({label:t.tooltip||t.key,color:t.color})}).on("mouseout",function(t,e){K.elementMouseout({label:t.tooltip})}).on("mousemove",function(t,e){K.elementMousemove()}).call(p),g.append("g").attr("class","nv-brushBackground"),W.exit().remove(),W.select(".nv-label").text(function(t){return t.key}),b(V);var v=z.filter(function(t){return!B[t].brush.empty()}),m=v.map(function(t){return B[t].brush.extent()}),y=G.slice(0);function x(o){return Z(I.map(function(t){if(isNaN(o.values[t.key])||isNaN(parseFloat(o.values[t.key]))||l){var e,n=B[t.key].domain(),r=B[t.key].range(),i=n[0]-(n[1]-n[0])/9;if(j.indexOf(t.key)<0&&(e=d3.scale.linear().domain([i,n[1]]).range([L-12,r[1]]),B[t.key].brush.y(e),j.push(t.key)),isNaN(o.values[t.key])||isNaN(parseFloat(o.values[t.key])))return[_(t.key),B[t.key](i)]}return void 0!==f&&(0<j.length||l?(f.style("display","inline"),c.style("display","inline")):(f.style("display","none"),c.style("display","none"))),[_(t.key),B[t.key](o.values[t.key])]}))}function b(n){Y.forEach(function(t){var e=B[t.dimension].brush.y().domain();t.hasOnlyNaN&&(t.extent[1]=(B[t.dimension].domain()[1]-e[0])*(t.extent[1]-t.extent[0])/(s[t.dimension]-t.extent[0])+e[0]),t.hasNaN&&(t.extent[0]=e[0]),n&&B[t.dimension].brush.extent(t.extent)}),W.select(".nv-brushBackground").each(function(t){d3.select(this).call(B[t.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16),A()}function k(){!1===V&&b(V=!0)}function w(){v=z.filter(function(t){return!B[t].brush.empty()}),m=v.map(function(t){return B[t].brush.extent()}),Y=[],v.forEach(function(t,e){Y[e]={dimension:t,extent:m[e],hasNaN:!1,hasOnlyNaN:!1}}),G=[],S.style("display",function(n){var t=v.every(function(t,e){return!(!isNaN(n.values[t])&&!isNaN(parseFloat(n.values[t]))||m[e][0]!=B[t].brush.y().domain()[0])||m[e][0]<=n.values[t]&&n.values[t]<=m[e][1]&&!isNaN(parseFloat(n.values[t]))});return t&&G.push(n),t?null:"none"}),A(),K.brush({filters:Y,active:G})}function M(){var t=0<v.length;Y.forEach(function(t){t.extent[0]===B[t.dimension].brush.y().domain()[0]&&0<=j.indexOf(t.dimension)&&(t.hasNaN=!0),t.extent[1]<B[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)}),K.brushEnd(G,t)}function A(){W.select(".nv-axis").each(function(e,t){var n=Y.filter(function(t){return t.dimension==e.key});i[e.key]=B[e.key].domain(),0!=n.length&&V&&(i[e.key]=[],n[0].extent[1]>B[e.key].domain()[0]&&(i[e.key]=[n[0].extent[1]]),n[0].extent[0]>=B[e.key].domain()[0]&&i[e.key].push(n[0].extent[0])),d3.select(this).call(q.scale(B[e.key]).tickFormat(e.format).tickValues(i[e.key]))})}function C(t){var e=X[t];return null==e?_(t):e}G=[],S.style("display",function(n){var t=v.every(function(t,e){return!(!isNaN(n.values[t])&&!isNaN(parseFloat(n.values[t]))||m[e][0]!=B[t].brush.y().domain()[0])||m[e][0]<=n.values[t]&&n.values[t]<=m[e][1]&&!isNaN(parseFloat(n.values[t]))});return t&&G.push(n),t?null:"none"}),(0<Y.length||!pt.utils.arrayEquals(G,y))&&K.activeChanged(G)}),n}return n.dispatch=K,n.options=pt.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return N},set:function(t){N=t}},height:{get:function(){return D},set:function(t){D=t}},dimensionData:{get:function(){return P},set:function(t){P=t}},displayBrush:{get:function(){return V},set:function(t){V=t}},filters:{get:function(){return Y},set:function(t){Y=t}},active:{get:function(){return G},set:function(t){G=t}},lineTension:{get:function(){return R},set:function(t){R=t}},undefinedValuesLabel:{get:function(){return T},set:function(t){T=t}},dimensions:{get:function(){return P.map(function(t){return t.key})},set:function(t){pt.deprecated("dimensions","use dimensionData instead"),0===P.length?t.forEach(function(t){P.push({key:t})}):t.forEach(function(t,e){P[e].key=t})}},dimensionNames:{get:function(){return P.map(function(t){return t.key})},set:function(t){pt.deprecated("dimensionNames","use dimensionData instead"),z=[],0===P.length?t.forEach(function(t){P.push({key:t})}):t.forEach(function(t,e){P[e].key=t})}},dimensionFormats:{get:function(){return P.map(function(t){return t.format})},set:function(t){pt.deprecated("dimensionFormats","use dimensionData instead"),0===P.length?t.forEach(function(t){P.push({format:t})}):t.forEach(function(t,e){P[e].format=t})}},margin:{get:function(){return F},set:function(t){F.top=void 0!==t.top?t.top:F.top,F.right=void 0!==t.right?t.right:F.right,F.bottom=void 0!==t.bottom?t.bottom:F.bottom,F.left=void 0!==t.left?t.left:F.left}},color:{get:function(){return H},set:function(t){H=pt.utils.getColor(t)}}}),pt.utils.initOptions(n),n},pt.models.parallelCoordinatesChart=function(){"use strict";var l=pt.models.parallelCoordinates(),u=pt.models.legend(),e=pt.models.tooltip(),c=(pt.models.tooltip(),{top:0,right:0,bottom:0,left:0}),d=null,f=null,p=null,h=!0,n=pt.utils.defaultColor(),g=pt.utils.state(),v=[],m=!0,y=null,r=null,o="undefined",x=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),i=pt.utils.renderWatch(x),b=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},k=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function w(t){return i.reset(),i.models(l),t.each(function(t){var e=d3.select(this);pt.utils.initSVG(e);var n,r=pt.utils.availableWidth(f,e,c),i=pt.utils.availableHeight(p,e,c);if(w.update=function(){e.call(w)},w.container=this,g.setter(k(v),w.update).getter(b(v)).update(),g.disabled=v.map(function(t){return!!t.disabled}),(v=v.map(function(t){return t.disabled=!!t.disabled,t})).forEach(function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition}),!y)for(n in y={},g)g[n]instanceof Array?y[n]=g[n].slice(0):y[n]=g[n];if(!t||!t.length)return pt.utils.noData(w,e),w;e.selectAll(".nv-noData").remove();var o=e.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([t]),a=o.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),s=o.select("g");a.append("g").attr("class","nv-parallelCoordinatesWrap"),a.append("g").attr("class","nv-legendWrap"),s.select("rect").attr("width",r).attr("height",0<i?i:0),h?(u.width(r).color(function(t){return"rgb(188,190,192)"}),s.select(".nv-legendWrap").datum(v.sort(function(t,e){return t.originalPosition-e.originalPosition})).call(u),d||u.height()===c.top||(c.top=u.height(),i=pt.utils.availableHeight(p,e,c)),o.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-c.top+")")):s.select(".nv-legendWrap").selectAll("*").remove(),o.attr("transform","translate("+c.left+","+c.top+")"),l.width(r).height(i).dimensionData(v).displayBrush(m),s.select(".nv-parallelCoordinatesWrap ").datum(t).transition().call(l),l.dispatch.on("brushEnd",function(t,e){e?(m=!0,x.brushEnd(t)):m=!1}),u.dispatch.on("stateChange",function(t){for(var e in t)g[e]=t[e];x.stateChange(g),w.update()}),l.dispatch.on("dimensionsOrder",function(t){v.sort(function(t,e){return t.currentPosition-e.currentPosition});var n=!1;v.forEach(function(t,e){t.currentPosition=e,t.currentPosition!==t.originalPosition&&(n=!0)}),x.dimensionsOrder(v,n)}),x.on("changeState",function(n){void 0!==n.disabled&&(v.forEach(function(t,e){t.disabled=n.disabled[e]}),g.disabled=n.disabled),w.update()})}),i.renderEnd("parraleleCoordinateChart immediate"),w}return e.contentGenerator(function(t){var e='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td><strong>'+t.key+"</strong></td></tr></thead>";return 0!==t.series.length&&(e+='<tbody><tr><td height ="10px"></td></tr>',t.series.forEach(function(t){e=e+'<tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td class="key">'+t.key+'</td><td class="value">'+t.value+"</td></tr>"}),e+="</tbody>"),e+="</table>"}),l.dispatch.on("elementMouseover.tooltip",function(r){var i={key:r.label,color:r.color,series:[]};r.values&&(Object.keys(r.values).forEach(function(e){var t,n=r.dimensions.filter(function(t){return t.key===e})[0];n&&(t=isNaN(r.values[e])||isNaN(parseFloat(r.values[e]))?o:n.format(r.values[e]),i.series.push({idx:n.currentPosition,key:e,value:t,color:n.color}))}),i.series.sort(function(t,e){return t.idx-e.idx})),e.data(i).hidden(!1)}),l.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),l.dispatch.on("elementMousemove.tooltip",function(){e()}),w.dispatch=x,w.parallelCoordinates=l,w.legend=u,w.tooltip=e,w.options=pt.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return h},set:function(t){h=t}},defaultState:{get:function(){return y},set:function(t){y=t}},dimensionData:{get:function(){return v},set:function(t){v=t}},displayBrush:{get:function(){return m},set:function(t){m=t}},noData:{get:function(){return r},set:function(t){r=t}},nanValue:{get:function(){return o},set:function(t){o=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,d=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return n},set:function(t){n=pt.utils.getColor(t),u.color(n),l.color(n)}}}),pt.utils.inheritOptions(w,l),pt.utils.initOptions(w),w},pt.models.pie=function(){"use strict";var M={top:0,right:0,bottom:0,left:0},A=500,C=500,S=function(t){return t.x},E=function(t){return t.y},W=Math.floor(1e4*Math.random()),F=null,N=pt.utils.defaultColor(),D=d3.format(",.2f"),O=!0,L=!1,_="key",B=.02,T=!1,P=!1,I=!0,z=0,V=!1,H=!1,Y=!1,G=!1,X=0,j=.5,R=250,Z=[],q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K=[],U=[],Q=pt.utils.renderWatch(q);function e(t){return Q.reset(),t.each(function(t){var e=A-M.left-M.right,n=C-M.top-M.bottom,a=Math.min(e,n)/2,s=[],r=[];if(F=d3.select(this),0===Z.length)for(var i=a-a/5,o=j*a,l=0;l<t[0].length;l++)s.push(i),r.push(o);else j=I?(s=Z.map(function(t){return(t.outer-t.outer/5)*a}),r=Z.map(function(t){return(t.inner-t.inner/5)*a}),d3.min(Z.map(function(t){return t.inner-t.inner/5}))):(s=Z.map(function(t){return t.outer*a}),r=Z.map(function(t){return t.inner*a}),d3.min(Z.map(function(t){return t.inner})));pt.utils.initSVG(F);var u=F.selectAll(".nv-wrap.nv-pie").data(t),c=u.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+W).append("g"),d=u.select("g"),f=c.append("g").attr("class","nv-pie");c.append("g").attr("class","nv-pieLabels"),u.attr("transform","translate("+M.left+","+M.top+")"),d.select(".nv-pie").attr("transform","translate("+e/2+","+n/2+")"),d.select(".nv-pieLabels").attr("transform","translate("+e/2+","+n/2+")"),F.on("click",function(t,e){q.chartClick({data:t,index:e,pos:d3.event,id:W})}),K=[],U=[];for(l=0;l<t[0].length;l++){var p=d3.svg.arc().outerRadius(s[l]),h=d3.svg.arc().outerRadius(s[l]+5);!1!==H&&(p.startAngle(H),h.startAngle(H)),!1!==G&&(p.endAngle(G),h.endAngle(G)),T&&(p.innerRadius(r[l]),h.innerRadius(r[l])),p.cornerRadius&&X&&(p.cornerRadius(X),h.cornerRadius(X)),K.push(p),U.push(h)}var g=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:E(t)});g.padAngle&&Y&&g.padAngle(Y),T&&P&&(f.append("text").attr("class","nv-pie-title"),u.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return P}).style("font-size",Math.min(e,n)*j*2/(P.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+z+")"}));var v=u.select(".nv-pie").selectAll(".nv-slice").data(g),m=u.select(".nv-pieLabels").selectAll(".nv-label").data(g);v.exit().remove(),m.exit().remove();var y=v.enter().append("g");y.attr("class","nv-slice"),y.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),I&&d3.select(this).select("path").transition().duration(70).attr("d",U[e]),q.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill"),percent:(t.endAngle-t.startAngle)/(2*Math.PI)})}),y.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),I&&d3.select(this).select("path").transition().duration(50).attr("d",K[e]),q.elementMouseout({data:t.data,index:e})}),y.on("mousemove",function(t,e){q.elementMousemove({data:t.data,index:e})}),y.on("click",function(t,e){q.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this})}),y.on("dblclick",function(t,e){q.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),v.attr("fill",function(t,e){return N(t.data,e)}),v.attr("stroke",function(t,e){return N(t.data,e)});y.append("path").each(function(t){this._current=t});if(v.select("path").transition().duration(R).attr("d",function(t,e){return K[e](t)}).attrTween("d",function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,T||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return K[e](n(t))}}),O){for(var x=[],l=0;l<t[0].length;l++)x.push(K[l]),L?T&&(x[l]=d3.svg.arc().outerRadius(K[l].outerRadius()),!1!==H&&x[l].startAngle(H),!1!==G&&x[l].endAngle(G)):T||x[l].innerRadius(0);m.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(V){t.outerRadius=s[e]+10,t.innerRadius=s[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+x[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=10+a,t.innerRadius=15+a,"translate("+x[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",V?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var b={},k=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)},w=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};m.watchTransition(Q,"pie labels").attr("transform",function(t,e){if(V){t.outerRadius=s[e]+10,t.innerRadius=s[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+x[e].centroid(t)+") rotate("+n+")"}t.outerRadius=10+a,t.innerRadius=15+a;var r,i=x[e].centroid(t),o=w(t);return t.value&&B<=o&&(r=k(i),b[r]&&(i[1]-=14),b[k(i)]=!0),"translate("+i+")"}),m.select(".nv-label text").style("text-anchor",function(t,e){return V?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=w(t),r="";if(!t.value||n<B)return"";if("function"==typeof _)r=_(t,e,{key:S(t.data),value:E(t.data),percent:D(n)});else switch(_){case"key":r=S(t.data);break;case"value":r=D(E(t.data));break;case"percent":r=d3.format("%")(n)}return r})}}),Q.renderEnd("pie immediate"),e}return e.dispatch=q,e.options=pt.utils.optionsFunc.bind(e),e._options=Object.create({},{arcsRadius:{get:function(){return Z},set:function(t){Z=t}},width:{get:function(){return A},set:function(t){A=t}},height:{get:function(){return C},set:function(t){C=t}},showLabels:{get:function(){return O},set:function(t){O=t}},title:{get:function(){return P},set:function(t){P=t}},titleOffset:{get:function(){return z},set:function(t){z=t}},labelThreshold:{get:function(){return B},set:function(t){B=t}},valueFormat:{get:function(){return D},set:function(t){D=t}},x:{get:function(){return S},set:function(t){S=t}},id:{get:function(){return W},set:function(t){W=t}},endAngle:{get:function(){return G},set:function(t){G=t}},startAngle:{get:function(){return H},set:function(t){H=t}},padAngle:{get:function(){return Y},set:function(t){Y=t}},cornerRadius:{get:function(){return X},set:function(t){X=t}},donutRatio:{get:function(){return j},set:function(t){j=t}},labelsOutside:{get:function(){return L},set:function(t){L=t}},labelSunbeamLayout:{get:function(){return V},set:function(t){V=t}},donut:{get:function(){return T},set:function(t){T=t}},growOnHover:{get:function(){return I},set:function(t){I=t}},pieLabelsOutside:{get:function(){return L},set:function(t){L=t,pt.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return L},set:function(t){L=t,pt.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return D},set:function(t){D=t,pt.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return M},set:function(t){M.top=void 0!==t.top?t.top:M.top,M.right=void 0!==t.right?t.right:M.right,M.bottom=void 0!==t.bottom?t.bottom:M.bottom,M.left=void 0!==t.left?t.left:M.left}},duration:{get:function(){return R},set:function(t){R=t,Q.reset(R)}},y:{get:function(){return E},set:function(t){E=d3.functor(t)}},color:{get:function(){return N},set:function(t){N=pt.utils.getColor(t)}},labelType:{get:function(){return _},set:function(t){_=t||"key"}}}),pt.utils.initOptions(e),e},pt.models.pieChart=function(){"use strict";var c=pt.models.pie(),d=pt.models.legend(),e=pt.models.tooltip(),f={top:30,right:20,bottom:20,left:20},p=null,h=null,g=null,n=!1,v=!0,m="top",r=pt.utils.defaultColor(),y=pt.utils.state(),x=null,i=null,o=250,b=d3.dispatch("stateChange","changeState","renderEnd");e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return c.valueFormat()(t,e)});var a=pt.utils.renderWatch(b),k=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},w=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function M(t){return a.reset(),a.models(c),t.each(function(t){var e=d3.select(this);pt.utils.initSVG(e);var n,r=pt.utils.availableWidth(h,e,f),i=pt.utils.availableHeight(g,e,f);if(M.update=function(){e.transition().call(M)},M.container=this,y.setter(w(t),M.update).getter(k(t)).update(),y.disabled=t.map(function(t){return!!t.disabled}),!x)for(n in x={},y)y[n]instanceof Array?x[n]=y[n].slice(0):x[n]=y[n];if(!t||!t.length)return pt.utils.noData(M,e),M;e.selectAll(".nv-noData").remove();var o,a=e.selectAll("g.nv-wrap.nv-pieChart").data([t]),s=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),l=a.select("g");s.append("g").attr("class","nv-pieWrap"),s.append("g").attr("class","nv-legendWrap"),v?"top"===m?(d.width(r).key(c.x()),a.select(".nv-legendWrap").datum(t).call(d),p||d.height()===f.top||(f.top=d.height(),i=pt.utils.availableHeight(g,e,f)),a.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")):"right"===m&&(r/2<(o=pt.models.legend().width())&&(o=r/2),d.height(i).key(c.x()),d.width(o),r-=d.width(),a.select(".nv-legendWrap").datum(t).call(d).attr("transform","translate("+r+",0)")):l.select(".nv-legendWrap").selectAll("*").remove(),a.attr("transform","translate("+f.left+","+f.top+")"),c.width(r).height(i);var u=l.select(".nv-pieWrap").datum([t]);d3.transition(u).call(c),d.dispatch.on("stateChange",function(t){for(var e in t)y[e]=t[e];b.stateChange(y),M.update()}),b.on("changeState",function(n){void 0!==n.disabled&&(t.forEach(function(t,e){t.disabled=n.disabled[e]}),y.disabled=n.disabled),M.update()})}),a.renderEnd("pieChart immediate"),M}return c.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:M.x()(t.data),value:M.y()(t.data),color:t.color,percent:t.percent},n||(delete t.percent,delete t.series.percent),e.data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(t){e()}),M.legend=d,M.dispatch=b,M.pie=c,M.tooltip=e,M.options=pt.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return i},set:function(t){i=t}},showTooltipPercent:{get:function(){return n},set:function(t){n=t}},showLegend:{get:function(){return v},set:function(t){v=t}},legendPosition:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return x},set:function(t){x=t}},color:{get:function(){return r},set:function(t){r=t,d.color(r),c.color(r)}},duration:{get:function(){return o},set:function(t){o=t,a.reset(o),c.duration(o)}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,p=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}}}),pt.utils.inheritOptions(M,c),pt.utils.initOptions(M),M},pt.models.sankey=function(){"use strict";function e(t){i.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),o.forEach(function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=i[t.source]),"number"==typeof n&&(n=t.target=i[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)}),i.forEach(function(t){t.value=Math.max(d3.sum(t.sourceLinks,d),d3.sum(t.targetLinks,d))}),function(){var e,t=i,n=0;for(;t.length&&n<i.length;)e=[],t.forEach(function(t){t.x=n,t.dx=r,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;a&&function(e){i.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})}(n);!function(e){i.forEach(function(t){t.x*=e})}((l[0]-r)/(n-1))}(),function(t){var e=d3.nest().key(function(t){return t.x}).sortKeys(d3.ascending).entries(i).map(function(t){return t.values});(function(){var n=d3.min(e,function(t){return(l[1]-(t.length-1)*s)/d3.sum(t,d)});e.forEach(function(t){t.forEach(function(t,e){t.y=e,t.dy=t.value*n})}),o.forEach(function(t){t.dy=t.value*n})})(),r(),c();for(var n=1;0<t;--t)!function(n){function r(t){return(t.target.y+t.ty+t.dy/2)*t.value}e.slice().reverse().forEach(function(t){t.forEach(function(t){var e;t.sourceLinks.length&&(e=d3.sum(t.sourceLinks,r)/d3.sum(t.sourceLinks,d),t.y+=(e-u(t))*n)})})}(n*=.99),r(),c(),function(n){function r(t){return(t.source.y+t.sy+t.dy/2)*t.value}e.forEach(function(t,e){t.forEach(function(t){var e;t.targetLinks.length&&(e=d3.sum(t.targetLinks,r)/d3.sum(t.targetLinks,d),t.y+=(e-u(t))*n)})})}(n),r(),c();function r(){e.forEach(function(t){var e,n,r,i=0,o=t.length;for(t.sort(a),r=0;r<o;++r)0<(n=i-(e=t[r]).y)&&(e.y+=n),i=e.y+e.dy+s;if(0<(n=i-s-l[1]))for(i=e.y-=n,r=o-2;0<=r;--r)0<(n=(e=t[r]).y+e.dy+s-i)&&(e.y-=n),i=e.y})}function a(t,e){return t.y-e.y}}(t)}var t={},r=24,s=8,l=[1,1],i=[],o=[],a=!0,n=function(){var l=.5;function e(t){var e=t.source.x+t.source.dx,n=t.target.x,r=d3.interpolateNumber(e,n),i=r(l),o=r(1-l),a=t.source.y+t.sy+t.dy/2,s=t.target.y+t.ty+t.dy/2;return"M"+e+","+a+"C"+i+","+a+" "+o+","+s+" "+n+","+s}return e.curvature=function(t){return arguments.length?(l=+t,e):l},e},u=function(t){return t.y+t.dy/2};function c(){function e(t,e){return t.source.y-e.source.y}function n(t,e){return t.target.y-e.target.y}i.forEach(function(t){t.sourceLinks.sort(n),t.targetLinks.sort(e)}),i.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}function d(t){return t.value}return t.options=pt.utils.optionsFunc.bind(t),t._options=Object.create({},{nodeWidth:{get:function(){return r},set:function(t){r=+t}},nodePadding:{get:function(){return s},set:function(t){s=t}},nodes:{get:function(){return i},set:function(t){i=t}},links:{get:function(){return o},set:function(t){o=t}},size:{get:function(){return l},set:function(t){l=t}},sinksRight:{get:function(){return a},set:function(t){a=t}},layout:{get:function(){e(32)},set:function(t){e(t)}},relayout:{get:function(){c()},set:function(t){}},center:{get:function(){return u()},set:function(t){"function"==typeof t&&(u=t)}},link:{get:function(){return n()},set:function(t){return"function"==typeof t&&(n=t),n()}}}),pt.utils.initOptions(t),t},pt.models.sankeyChart=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},u=pt.models.sankey(),c=600,d=400,f=36,p=40,n="units",h=void 0,r=d3.format(",.0f"),i=function(t){return r(t)+" "+n},o=d3.scale.category20(),g=function(t){return t.source.name+" → "+t.target.name+"\n"+i(t.value)},v=function(t){return t.color=o(t.name.replace(/ .*/,""))},m=function(t){return d3.rgb(t.color).darker(2)},y=function(t){return t.name+"\n"+i(t.value)},x=function(t,e){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(e)};function t(l){return l.each(function(t){var e={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},n=!1,r=!1;if(0<=("object"==typeof t.nodes&&t.nodes.length)&&0<=("object"==typeof t.links&&t.links.length)&&(n=!0),t.nodes&&0<t.nodes.length&&t.links&&0<t.links.length&&(r=!0),!n)return console.error("NVD3 Sankey chart error:","invalid data format for",t),console.info("Valid data format is: ",e,JSON.stringify(e)),x(l,"Error loading chart, data is invalid"),!1;if(!r)return x(l,"No data available"),!1;var i=l.append("svg").attr("width",c).attr("height",d).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");u.nodeWidth(f).nodePadding(p).size([c,d]);var o=u.link();u.nodes(t.nodes).links(t.links).layout(32).center(h);var a=i.append("g").selectAll(".link").data(t.links).enter().append("path").attr("class","link").attr("d",o).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy});a.append("title").text(g);var s=i.append("g").selectAll(".node").data(t.nodes).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).call(d3.behavior.drag().origin(function(t){return t}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(d-t.dy,d3.event.y)))+")"),u.relayout(),a.attr("d",o)}));s.append("rect").attr("height",function(t){return t.dy}).attr("width",u.nodeWidth()).style("fill",v).style("stroke",m).append("title").text(y),s.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<c/2}).attr("x",6+u.nodeWidth()).attr("text-anchor","start")}),t}return t.options=pt.utils.optionsFunc.bind(t),t._options=Object.create({},{units:{get:function(){return n},set:function(t){n=t}},width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},format:{get:function(){return i},set:function(t){i=t}},linkTitle:{get:function(){return g},set:function(t){g=t}},nodeWidth:{get:function(){return f},set:function(t){f=t}},nodePadding:{get:function(){return p},set:function(t){p=t}},center:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},nodeStyle:{get:function(){return{}},set:function(t){v=void 0!==t.fillColor?t.fillColor:v,m=void 0!==t.strokeColor?t.strokeColor:m,y=void 0!==t.title?t.title:y}}}),pt.utils.initOptions(t),t},pt.models.scatter=function(){"use strict";var m,y,x,b,k,w,M={top:0,right:0,bottom:0,left:0},A=null,C=null,S=pt.utils.defaultColor(),E=null,W=Math.floor(1e5*Math.random()),F=null,N=d3.scale.linear(),D=d3.scale.linear(),O=d3.scale.linear(),L=function(t){return t.x},_=function(t){return t.y},B=function(t){return t.size||1},T=function(t){return t.shape||"circle"},P=[],I=[],z=[],V=!0,H=function(t){return!t.notActive},Y=!1,G=.1,X=!1,j=!0,R=!1,Z=function(){return 25},q=null,K=null,U=null,Q=null,J=null,$=null,tt=!1,et=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),nt=!0,e=250,rt=300,it=!1,ot=!1,at=pt.utils.renderWatch(et,e),st=[16,256],l={};function lt(t){var e=t[0].series+":"+t[1];delete l[e]}function ut(t){for(var e,n,r,i,o=(i=(r=t)[0].series+":"+r[1],l[i]=l[i]||{}),a=!1,s=1;s<arguments.length;s+=2)e=arguments[s],n=arguments[s+1](t[0],t[1]),o[e]===n&&o.hasOwnProperty(e)||(o[e]=n,a=!0);return a}function ct(t){return at.reset(),t.each(function(l){F=d3.select(this);var t=pt.utils.availableWidth(A,F,M),e=pt.utils.availableHeight(C,F,M);pt.utils.initSVG(F),l.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var n,r=ct.yScale().name===d3.scale.log().name,i=q&&K&&J?[]:d3.merge(l.map(function(t){return t.values.map(function(t,e){return{x:L(t,e),y:_(t,e),size:B(t,e)}})}));N.domain(q||d3.extent(i.map(function(t){return t.x}).concat(P))),Y&&l[0]?N.range(U||[(t*G+t)/(2*l[0].values.length),t-t*(1+G)/(2*l[0].values.length)]):N.range(U||[0,t]),r?(n=d3.min(i.map(function(t){if(0!==t.y)return t.y})),D.clamp(!0).domain(K||d3.extent(i.map(function(t){return 0!==t.y?t.y:.1*n}).concat(I))).range(Q||[e,0])):D.domain(K||d3.extent(i.map(function(t){return t.y}).concat(I))).range(Q||[e,0]),O.domain(J||d3.extent(i.map(function(t){return t.size}).concat(z))).range($||st),tt=N.domain()[0]===N.domain()[1]||D.domain()[0]===D.domain()[1],N.domain()[0]===N.domain()[1]&&(N.domain()[0]?N.domain([N.domain()[0]-.01*N.domain()[0],N.domain()[1]+.01*N.domain()[1]]):N.domain([-1,1])),D.domain()[0]===D.domain()[1]&&(D.domain()[0]?D.domain([D.domain()[0]-.01*D.domain()[0],D.domain()[1]+.01*D.domain()[1]]):D.domain([-1,1])),isNaN(N.domain()[0])&&N.domain([-1,1]),isNaN(D.domain()[0])&&D.domain([-1,1]),m=m||N,y=y||D,x=x||O;var o=N(1)!==m(1)||D(1)!==y(1)||O(1)!==x(1);k=k||C;var a=(b=b||A)!==A||k!==C,s=F.selectAll("g.nv-wrap.nv-scatter").data([l]),u=s.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+W),c=u.append("defs"),d=u.append("g"),f=s.select("g");function p(){if(ot=!1,!V)return!1;if(!0===nt){var n=d3.merge(l.map(function(t,i){return t.values.map(function(t,e){var n=L(t,e),r=_(t,e);return[pt.utils.NaNtoZero(N(n))+1e-4*Math.random(),pt.utils.NaNtoZero(D(r))+1e-4*Math.random(),i,e,t]}).filter(function(t,e){return H(t[4],e)})}));if(0==n.length)return!1;n.length<3&&(n.push([N.range()[0]-20,D.range()[0]-20,null,null]),n.push([N.range()[1]+20,D.range()[1]+20,null,null]),n.push([N.range()[0]-20,D.range()[0]+20,null,null]),n.push([N.range()[1]+20,D.range()[1]-20,null,null]));var r=d3.geom.polygon([[-10,-10],[-10,C+10],[A+10,C+10],[A+10,-10]]),t=d3.geom.voronoi(n).map(function(t,e){return{data:r.clip(t),series:n[e][2],point:n[e][3]}});s.select(".nv-point-paths").selectAll("path").remove();var e=s.select(".nv-point-paths").selectAll("path").data(t),i=e.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+W+"-"+e+")"});R&&i.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),j&&(s.select(".nv-point-clips").selectAll("*").remove(),s.select(".nv-point-clips").selectAll("clipPath").data(n).enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+W+"-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",Z));var o=function(t,e,n){if(ot)return 0;var r,i,o,a,s=l[e.series];void 0!==s&&((r=s.values[e.point]).color=S(s,e.series),r.x=L(r),r.y=_(r),i=F.node().getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,a=window.pageXOffset||document.documentElement.scrollLeft,n({point:r,series:s,pos:{left:N(L(r,e.point))+i.left+a+M.left+10,top:D(_(r,e.point))+i.top+o+M.top+10},relativePos:[N(L(r,e.point))+M.left,D(_(r,e.point))+M.top],seriesIndex:e.series,pointIndex:e.point,event:d3.event,element:t}))};e.on("click",function(t){o(this,t,et.elementClick)}).on("dblclick",function(t){o(this,t,et.elementDblClick)}).on("mouseover",function(t){o(this,t,et.elementMouseover)}).on("mouseout",function(t,e){o(this,t,et.elementMouseout)})}else s.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,e){if(ot||!l[t.series])return 0;var n=l[t.series],r=n.values[e];et.elementClick({point:r,series:n,pos:[N(L(r,e))+M.left,D(_(r,e))+M.top],relativePos:[N(L(r,e))+M.left,D(_(r,e))+M.top],seriesIndex:t.series,pointIndex:e,event:d3.event,element:this})}).on("dblclick",function(t,e){if(ot||!l[t.series])return 0;var n=l[t.series],r=n.values[e];et.elementDblClick({point:r,series:n,pos:[N(L(r,e))+M.left,D(_(r,e))+M.top],relativePos:[N(L(r,e))+M.left,D(_(r,e))+M.top],seriesIndex:t.series,pointIndex:e})}).on("mouseover",function(t,e){if(ot||!l[t.series])return 0;var n=l[t.series],r=n.values[e];et.elementMouseover({point:r,series:n,pos:[N(L(r,e))+M.left,D(_(r,e))+M.top],relativePos:[N(L(r,e))+M.left,D(_(r,e))+M.top],seriesIndex:t.series,pointIndex:e,color:S(t,e)})}).on("mouseout",function(t,e){if(ot||!l[t.series])return 0;var n=l[t.series],r=n.values[e];et.elementMouseout({point:r,series:n,pos:[N(L(r,e))+M.left,D(_(r,e))+M.top],relativePos:[N(L(r,e))+M.left,D(_(r,e))+M.top],seriesIndex:t.series,pointIndex:e,color:S(t,e)})})}s.classed("nv-single-point",tt),d.append("g").attr("class","nv-groups"),d.append("g").attr("class","nv-point-paths"),u.append("g").attr("class","nv-point-clips"),s.attr("transform","translate("+M.left+","+M.top+")"),c.append("clipPath").attr("id","nv-edge-clip-"+W).append("rect").attr("transform","translate( -10, -10)"),s.select("#nv-edge-clip-"+W+" rect").attr("width",t+20).attr("height",0<e?e+20:0),f.attr("clip-path",X?"url(#nv-edge-clip-"+W+")":""),ot=!0;var h=s.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});h.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),h.exit().remove(),h.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("nv-noninteractive",!V).classed("hover",function(t){return t.hover}),h.watchTransition(at,"scatter: groups").style("fill",function(t,e){return S(t,e)}).style("stroke",function(t,e){return t.pointBorderColor||E||S(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var g,v=h.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return H(t[0],e)})});v.enter().append("path").attr("class",function(t){return"nv-point nv-point-"+t[1]}).style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+pt.utils.NaNtoZero(m(L(t[0],t[1])))+","+pt.utils.NaNtoZero(y(_(t[0],t[1])))+")"}).attr("d",pt.utils.symbol().type(function(t){return T(t[0])}).size(function(t){return O(B(t[0],t[1]))})),v.exit().each(lt).remove(),h.exit().selectAll("path.nv-point").watchTransition(at,"scatter exit").attr("transform",function(t){return"translate("+pt.utils.NaNtoZero(N(L(t[0],t[1])))+","+pt.utils.NaNtoZero(D(_(t[0],t[1])))+")"}).remove(),v.filter(function(t){return o||a||ut(t,"x",L,"y",_)}).watchTransition(at,"scatter points").attr("transform",function(t){return"translate("+pt.utils.NaNtoZero(N(L(t[0],t[1])))+","+pt.utils.NaNtoZero(D(_(t[0],t[1])))+")"}),v.filter(function(t){return o||a||ut(t,"shape",T,"size",B)}).watchTransition(at,"scatter points").attr("d",pt.utils.symbol().type(function(t){return T(t[0])}).size(function(t){return O(B(t[0],t[1]))})),it&&((g=h.selectAll(".nv-label").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return H(t[0],e)})})).enter().append("text").style("fill",function(t,e){return t.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(t){return"translate("+(pt.utils.NaNtoZero(m(L(t[0],t[1])))+Math.sqrt(O(B(t[0],t[1]))/Math.PI)+2)+","+pt.utils.NaNtoZero(y(_(t[0],t[1])))+")"}).text(function(t,e){return t[0].label}),g.exit().remove(),h.exit().selectAll("path.nv-label").watchTransition(at,"scatter exit").attr("transform",function(t){return"translate("+(pt.utils.NaNtoZero(N(L(t[0],t[1])))+Math.sqrt(O(B(t[0],t[1]))/Math.PI)+2)+","+pt.utils.NaNtoZero(D(_(t[0],t[1])))+")"}).remove(),g.each(function(t){d3.select(this).classed("nv-label",!0).classed("nv-label-"+t[1],!1).classed("hover",!1)}),g.watchTransition(at,"scatter labels").attr("transform",function(t){return"translate("+(pt.utils.NaNtoZero(N(L(t[0],t[1])))+Math.sqrt(O(B(t[0],t[1]))/Math.PI)+2)+","+pt.utils.NaNtoZero(D(_(t[0],t[1])))+")"})),rt?(clearTimeout(w),w=setTimeout(p,rt)):p(),m=N.copy(),y=D.copy(),x=O.copy(),b=A,k=C}),at.renderEnd("scatter immediate"),ct}return ct.dispatch=et,ct.options=pt.utils.optionsFunc.bind(ct),ct._calls=new function(){this.clearHighlights=function(){return pt.dom.write(function(){F.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,e,n){pt.dom.write(function(){F.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+e).classed("hover",n)})}},et.on("elementMouseover.point",function(t){V&&ct._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),et.on("elementMouseout.point",function(t){V&&ct._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),ct._options=Object.create({},{width:{get:function(){return A},set:function(t){A=t}},height:{get:function(){return C},set:function(t){C=t}},xScale:{get:function(){return N},set:function(t){N=t}},yScale:{get:function(){return D},set:function(t){D=t}},pointScale:{get:function(){return O},set:function(t){O=t}},xDomain:{get:function(){return q},set:function(t){q=t}},yDomain:{get:function(){return K},set:function(t){K=t}},pointDomain:{get:function(){return J},set:function(t){J=t}},xRange:{get:function(){return U},set:function(t){U=t}},yRange:{get:function(){return Q},set:function(t){Q=t}},pointRange:{get:function(){return $},set:function(t){$=t}},forceX:{get:function(){return P},set:function(t){P=t}},forceY:{get:function(){return I},set:function(t){I=t}},forcePoint:{get:function(){return z},set:function(t){z=t}},interactive:{get:function(){return V},set:function(t){V=t}},pointActive:{get:function(){return H},set:function(t){H=t}},padDataOuter:{get:function(){return G},set:function(t){G=t}},padData:{get:function(){return Y},set:function(t){Y=t}},clipEdge:{get:function(){return X},set:function(t){X=t}},clipVoronoi:{get:function(){return j},set:function(t){j=t}},clipRadius:{get:function(){return Z},set:function(t){Z=t}},showVoronoi:{get:function(){return R},set:function(t){R=t}},id:{get:function(){return W},set:function(t){W=t}},interactiveUpdateDelay:{get:function(){return rt},set:function(t){rt=t}},showLabels:{get:function(){return it},set:function(t){it=t}},pointBorderColor:{get:function(){return E},set:function(t){E=t}},x:{get:function(){return L},set:function(t){L=d3.functor(t)}},y:{get:function(){return _},set:function(t){_=d3.functor(t)}},pointSize:{get:function(){return B},set:function(t){B=d3.functor(t)}},pointShape:{get:function(){return T},set:function(t){T=d3.functor(t)}},margin:{get:function(){return M},set:function(t){M.top=void 0!==t.top?t.top:M.top,M.right=void 0!==t.right?t.right:M.right,M.bottom=void 0!==t.bottom?t.bottom:M.bottom,M.left=void 0!==t.left?t.left:M.left}},duration:{get:function(){return e},set:function(t){e=t,at.reset(e)}},color:{get:function(){return S},set:function(t){S=pt.utils.getColor(t)}},useVoronoi:{get:function(){return nt},set:function(t){!1===(nt=t)&&(j=!1)}}}),pt.utils.initOptions(ct),ct},pt.models.scatterChart=function(){"use strict";var u=pt.models.scatter(),c=pt.models.axis(),d=pt.models.axis(),f=pt.models.legend(),p=pt.models.distribution(),h=pt.models.distribution(),g=pt.models.tooltip(),v={top:30,right:20,bottom:50,left:75},m=null,y=null,x=null,b=null,k=pt.utils.defaultColor(),w=u.xScale(),M=u.yScale(),A=!1,C=!1,S=!0,E=!0,W=!0,F=!1,N=pt.utils.state(),D=null,O=d3.dispatch("stateChange","changeState","renderEnd"),e=null,L=250,_=!1;u.xScale(w).yScale(M),c.orient("bottom").tickPadding(10),d.orient(F?"right":"left").tickPadding(10),p.axis("x"),h.axis("y"),g.headerFormatter(function(t,e){return c.tickFormat()(t,e)}).valueFormatter(function(t,e){return d.tickFormat()(t,e)});var B=pt.utils.renderWatch(O,L),T=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},P=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};function I(t){return B.reset(),B.models(u),E&&B.models(c),W&&B.models(d),A&&B.models(p),C&&B.models(h),t.each(function(r){b=d3.select(this),pt.utils.initSVG(b);var t,e=pt.utils.availableWidth(y,b,v),n=pt.utils.availableHeight(x,b,v);if(I.update=function(){0===L?b.call(I):b.transition().duration(L).call(I)},I.container=this,N.setter(P(r),I.update).getter(T(r)).update(),N.disabled=r.map(function(t){return!!t.disabled}),!D)for(t in D={},N)N[t]instanceof Array?D[t]=N[t].slice(0):D[t]=N[t];if(!(r&&r.length&&r.filter(function(t){return t.values.length}).length))return pt.utils.noData(I,b),B.renderEnd("scatter immediate"),I;b.selectAll(".nv-noData").remove(),w=u.xScale(),M=u.yScale();var i=b.selectAll("g.nv-wrap.nv-scatterChart").data([r]),o=i.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+u.id()).append("g"),a=i.select("g");o.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y nv-axis"),o.append("g").attr("class","nv-scatterWrap"),o.append("g").attr("class","nv-regressionLinesWrap"),o.append("g").attr("class","nv-distWrap"),o.append("g").attr("class","nv-legendWrap"),F&&a.select(".nv-y.nv-axis").attr("transform","translate("+e+",0)"),S?(f.width(e),i.select(".nv-legendWrap").datum(r).call(f),m||f.height()===v.top||(v.top=f.height(),n=pt.utils.availableHeight(x,b,v)),i.select(".nv-legendWrap").attr("transform","translate(0,"+-v.top+")")):a.select(".nv-legendWrap").selectAll("*").remove(),i.attr("transform","translate("+v.left+","+v.top+")"),u.width(e).height(n).color(r.map(function(t,e){return t.color=t.color||k(t,e),t.color}).filter(function(t,e){return!r[e].disabled})).showLabels(_),i.select(".nv-scatterWrap").datum(r.filter(function(t){return!t.disabled})).call(u),i.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+u.id()+")");var s=i.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});s.enter().append("g").attr("class","nv-regLines");var l=s.selectAll(".nv-regLine").data(function(t){return[t]});l.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),l.filter(function(t){return t.intercept&&t.slope}).watchTransition(B,"scatterPlusLineChart: regline").attr("x1",w.range()[0]).attr("x2",w.range()[1]).attr("y1",function(t,e){return M(w.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return M(w.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return k(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1}),E&&(c.scale(w)._ticks(pt.utils.calcTicksX(e/100,r)).tickSize(-n,0),a.select(".nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")").call(c)),W&&(d.scale(M)._ticks(pt.utils.calcTicksY(n/36,r)).tickSize(-e,0),a.select(".nv-y.nv-axis").call(d)),A&&(p.getData(u.x()).scale(w).width(e).color(r.map(function(t,e){return t.color||k(t,e)}).filter(function(t,e){return!r[e].disabled})),o.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),a.select(".nv-distributionX").attr("transform","translate(0,"+M.range()[0]+")").datum(r.filter(function(t){return!t.disabled})).call(p)),C&&(h.getData(u.y()).scale(M).width(n).color(r.map(function(t,e){return t.color||k(t,e)}).filter(function(t,e){return!r[e].disabled})),o.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),a.select(".nv-distributionY").attr("transform","translate("+(F?e:-h.size())+",0)").datum(r.filter(function(t){return!t.disabled})).call(h)),f.dispatch.on("stateChange",function(t){for(var e in t)N[e]=t[e];O.stateChange(N),I.update()}),O.on("changeState",function(n){void 0!==n.disabled&&(r.forEach(function(t,e){t.disabled=n.disabled[e]}),N.disabled=n.disabled),I.update()}),u.dispatch.on("elementMouseout.tooltip",function(t){g.hidden(!0),b.select(".nv-chart-"+u.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),b.select(".nv-chart-"+u.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",h.size())}),u.dispatch.on("elementMouseover.tooltip",function(t){b.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-n),b.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+p.size()),g.data(t).hidden(!1)}),w.copy(),M.copy()}),B.renderEnd("scatter with line immediate"),I}return I.dispatch=O,I.scatter=u,I.legend=f,I.xAxis=c,I.yAxis=d,I.distX=p,I.distY=h,I.tooltip=g,I.options=pt.utils.optionsFunc.bind(I),I._options=Object.create({},{width:{get:function(){return y},set:function(t){y=t}},height:{get:function(){return x},set:function(t){x=t}},container:{get:function(){return b},set:function(t){b=t}},showDistX:{get:function(){return A},set:function(t){A=t}},showDistY:{get:function(){return C},set:function(t){C=t}},showLegend:{get:function(){return S},set:function(t){S=t}},showXAxis:{get:function(){return E},set:function(t){E=t}},showYAxis:{get:function(){return W},set:function(t){W=t}},defaultState:{get:function(){return D},set:function(t){D=t}},noData:{get:function(){return e},set:function(t){e=t}},duration:{get:function(){return L},set:function(t){L=t}},showLabels:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return v},set:function(t){void 0!==t.top&&(v.top=t.top,m=t.top),v.right=void 0!==t.right?t.right:v.right,v.bottom=void 0!==t.bottom?t.bottom:v.bottom,v.left=void 0!==t.left?t.left:v.left}},rightAlignYAxis:{get:function(){return F},set:function(t){F=t,d.orient(t?"right":"left")}},color:{get:function(){return k},set:function(t){k=pt.utils.getColor(t),f.color(k),p.color(k),h.color(k)}}}),pt.utils.inheritOptions(I,u),pt.utils.initOptions(I),I},pt.models.sparkline=function(){"use strict";var a,s,l,u,c={top:2,right:0,bottom:2,left:0},d=400,f=32,p=null,e=!0,h=d3.scale.linear(),g=d3.scale.linear(),v=function(t){return t.x},m=function(t){return t.y},y=pt.utils.getColor(["#000"]),x=!0,b=!0,t=d3.dispatch("renderEnd"),n=pt.utils.renderWatch(t);function r(t){return n.reset(),t.each(function(t){var e=d-c.left-c.right,n=f-c.top-c.bottom;p=d3.select(this),pt.utils.initSVG(p),h.domain(a||d3.extent(t,v)).range(l||[0,e]),g.domain(s||d3.extent(t,m)).range(u||[n,0]);var r=p.selectAll("g.nv-wrap.nv-sparkline").data([t]);r.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),r.select("g");r.attr("transform","translate("+c.left+","+c.top+")");var i=r.selectAll("path").data(function(t){return[t]});i.enter().append("path"),i.exit().remove(),i.style("stroke",function(t,e){return t.color||y(t,e)}).attr("d",d3.svg.line().x(function(t,e){return h(v(t,e))}).y(function(t,e){return g(m(t,e))}));var o=r.selectAll("circle.nv-point").data(function(n){var t=n.map(function(t,e){return m(t,e)});function e(t){if(-1==t)return null;var e=n[t];return e.pointIndex=t,e}var r=e(t.lastIndexOf(g.domain()[1])),i=e(t.indexOf(g.domain()[0])),o=e(t.length-1);return[x?i:null,x?r:null,b?o:null].filter(function(t){return null!=t})});o.enter().append("circle"),o.exit().remove(),o.attr("cx",function(t,e){return h(v(t,t.pointIndex))}).attr("cy",function(t,e){return g(m(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return v(t,t.pointIndex)==h.domain()[1]?"nv-point nv-currentValue":m(t,t.pointIndex)==g.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),n.renderEnd("sparkline immediate"),r}return r.options=pt.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return a},set:function(t){a=t}},yDomain:{get:function(){return s},set:function(t){s=t}},xRange:{get:function(){return l},set:function(t){l=t}},yRange:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return g},set:function(t){g=t}},animate:{get:function(){return e},set:function(t){e=t}},showMinMaxPoints:{get:function(){return x},set:function(t){x=t}},showCurrentPoint:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return v},set:function(t){v=d3.functor(t)}},y:{get:function(){return m},set:function(t){m=d3.functor(t)}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return y},set:function(t){y=pt.utils.getColor(t)}}}),r.dispatch=t,pt.utils.initOptions(r),r},pt.models.sparklinePlus=function(){"use strict";var d,f,p=pt.models.sparkline(),h={top:15,right:100,bottom:10,left:50},g=null,v=null,m=[],y=!1,x=d3.format(",r"),b=d3.format(",.2f"),k=!0,w=!0,M=!1,e=null,t=d3.dispatch("renderEnd"),n=pt.utils.renderWatch(t);function A(t){return n.reset(),n.models(p),t.each(function(n){var t=d3.select(this);pt.utils.initSVG(t);var e=pt.utils.availableWidth(g,t,h),r=pt.utils.availableHeight(v,t,h);if(A.update=function(){t.call(A)},A.container=this,!n||!n.length)return pt.utils.noData(A,t),A;t.selectAll(".nv-noData").remove();var i=p.y()(n[n.length-1],n.length-1);d=p.xScale(),f=p.yScale();var o=t.selectAll("g.nv-wrap.nv-sparklineplus").data([n]),a=o.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),s=o.select("g");a.append("g").attr("class","nv-sparklineWrap"),a.append("g").attr("class","nv-valueWrap"),a.append("g").attr("class","nv-hoverArea"),o.attr("transform","translate("+h.left+","+h.top+")");var l,u=s.select(".nv-sparklineWrap");function c(){var t,e;y||(e=(t=s.selectAll(".nv-hoverValue").data(m)).enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0),t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+d(p.x()(n[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),m.length&&(e.append("line").attr("x1",0).attr("y1",-h.top).attr("x2",0).attr("y2",r),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-h.top).attr("text-anchor","end").attr("dy",".9em"),s.select(".nv-hoverValue .nv-xValue").text(x(p.x()(n[m[0]],m[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-h.top).attr("text-anchor","start").attr("dy",".9em"),s.select(".nv-hoverValue .nv-yValue").text(b(p.y()(n[m[0]],m[0])))))}p.width(e).height(r),u.call(p),k&&((l=s.select(".nv-valueWrap").selectAll(".nv-currentValue").data([i])).enter().append("text").attr("class","nv-currentValue").attr("dx",M?-8:8).attr("dy",".9em").style("text-anchor",M?"end":"start"),l.attr("x",e+(M?h.right:0)).attr("y",w?function(t){return f(t)}:0).style("fill",p.color()(n[n.length-1],n.length-1)).text(b(i))),a.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(y)return;var t=d3.mouse(this)[0]-h.left;m=[function(t,e){for(var n=Math.abs(p.x()(t[0],0)-e),r=0,i=0;i<t.length;i++)Math.abs(p.x()(t[i],i)-e)<n&&(n=Math.abs(p.x()(t[i],i)-e),r=i);return r}(n,Math.round(d.invert(t)))],c()}).on("click",function(){y=!y}).on("mouseout",function(){m=[],c()}),s.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-h.left+","+-h.top+")"}).attr("width",e+h.left+h.right).attr("height",r+h.top)}),n.renderEnd("sparklinePlus immediate"),A}return A.dispatch=t,A.sparkline=p,A.options=pt.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},xTickFormat:{get:function(){return x},set:function(t){x=t}},yTickFormat:{get:function(){return b},set:function(t){b=t}},showLastValue:{get:function(){return k},set:function(t){k=t}},alignValue:{get:function(){return w},set:function(t){w=t}},rightAlignValue:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return e},set:function(t){e=t}},margin:{get:function(){return h},set:function(t){h.top=void 0!==t.top?t.top:h.top,h.right=void 0!==t.right?t.right:h.right,h.bottom=void 0!==t.bottom?t.bottom:h.bottom,h.left=void 0!==t.left?t.left:h.left}}}),pt.utils.inheritOptions(A,p),pt.utils.initOptions(A),A},pt.models.stackedArea=function(){"use strict";var p,h,g={top:0,right:0,bottom:0,left:0},v=960,m=500,y=pt.utils.defaultColor(),x=Math.floor(1e5*Math.random()),b=null,k=function(t){return t.x},w=function(t){return t.y},M=function(t,e){return!isNaN(w(t,e))&&null!==w(t,e)},e="stack",A="zero",C="default",S="linear",E=!1,W=pt.models.scatter(),n=250,F=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");W.pointSize(2.2).pointDomain([2.2,2.2]);var N=pt.utils.renderWatch(F,n);function D(t){return N.reset(),N.models(W),t.each(function(t){var e=v-g.left-g.right,n=m-g.top-g.bottom;b=d3.select(this),pt.utils.initSVG(b),p=W.xScale(),h=W.yScale();var s=t;t.forEach(function(t,n){t.seriesIndex=n,t.values=t.values.map(function(t,e){return t.index=e,t.seriesIndex=n,t})});var r=t.filter(function(t){return!t.disabled});t=d3.layout.stack().order(C).offset(A).values(function(t){return t.values}).x(k).y(w).out(function(t,e,n){t.display={y:n,y0:e}})(r);var i=b.selectAll("g.nv-wrap.nv-stackedarea").data([t]),o=i.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),a=o.append("defs"),l=o.append("g"),u=i.select("g");l.append("g").attr("class","nv-areaWrap"),l.append("g").attr("class","nv-scatterWrap"),i.attr("transform","translate("+g.left+","+g.top+")"),0==W.forceY().length&&W.forceY().push(0),W.width(e).height(n).x(k).y(function(t){if(void 0!==t.display)return t.display.y+t.display.y0}).color(t.map(function(t,e){return t.color=t.color||y(t,t.seriesIndex),t.color})),u.select(".nv-scatterWrap").datum(t).call(W),a.append("clipPath").attr("id","nv-edge-clip-"+x).append("rect"),i.select("#nv-edge-clip-"+x+" rect").attr("width",e).attr("height",n),u.attr("clip-path",E?"url(#nv-edge-clip-"+x+")":"");var c=d3.svg.area().defined(M).x(function(t,e){return p(k(t,e))}).y0(function(t){return h(t.display.y0)}).y1(function(t){return h(t.display.y+t.display.y0)}).interpolate(S),d=d3.svg.area().defined(M).x(function(t,e){return p(k(t,e))}).y0(function(t){return h(t.display.y0)}).y1(function(t){return h(t.display.y0)}),f=u.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});f.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return d(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),F.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),F.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),F.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),f.exit().remove(),f.style("fill",function(t,e){return t.color||y(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||y(t,t.seriesIndex)}),f.watchTransition(N,"stackedArea path").attr("d",function(t,e){return c(t.values,e)}),W.dispatch.on("elementMouseover.area",function(t){u.select(".nv-chart-"+x+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),W.dispatch.on("elementMouseout.area",function(t){u.select(".nv-chart-"+x+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),D.d3_stackedOffset_stackPercent=function(t){for(var e,n,r=t.length,i=t[0].length,o=[],a=0;a<i;++a){for(n=e=0;e<s.length;e++)n+=w(s[e].values[a]);if(n)for(e=0;e<r;e++)t[e][a][1]/=n;else for(e=0;e<r;e++)t[e][a][1]=0}for(a=0;a<i;++a)o[a]=0;return o}}),N.renderEnd("stackedArea immediate"),D}return D.dispatch=F,(D.scatter=W).dispatch.on("elementClick",function(){F.elementClick.apply(this,arguments)}),W.dispatch.on("elementMouseover",function(){F.elementMouseover.apply(this,arguments)}),W.dispatch.on("elementMouseout",function(){F.elementMouseout.apply(this,arguments)}),D.interpolate=function(t){return arguments.length?(S=t,D):S},D.duration=function(t){return arguments.length?(n=t,N.reset(n),W.duration(n),D):n},D.dispatch=F,D.scatter=W,D.options=pt.utils.optionsFunc.bind(D),D._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},defined:{get:function(){return M},set:function(t){M=t}},clipEdge:{get:function(){return E},set:function(t){E=t}},offset:{get:function(){return A},set:function(t){A=t}},order:{get:function(){return C},set:function(t){C=t}},interpolate:{get:function(){return S},set:function(t){S=t}},x:{get:function(){return k},set:function(t){k=d3.functor(t)}},y:{get:function(){return w},set:function(t){w=d3.functor(t)}},margin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return y},set:function(t){y=pt.utils.getColor(t)}},style:{get:function(){return e},set:function(t){switch(e=t){case"stack":D.offset("zero"),D.order("default");break;case"stream":D.offset("wiggle"),D.order("inside-out");break;case"stream-center":D.offset("silhouette"),D.order("inside-out");break;case"expand":D.offset("expand"),D.order("default");break;case"stack_percent":D.offset(D.d3_stackedOffset_stackPercent),D.order("default")}}},duration:{get:function(){return n},set:function(t){n=t,N.reset(n),W.duration(n)}}}),pt.utils.inheritOptions(D,W),pt.utils.initOptions(D),D},pt.models.stackedAreaChart=function(){"use strict";var b,k,w=pt.models.stackedArea(),M=pt.models.axis(),A=pt.models.axis(),C=pt.models.legend(),S=pt.models.legend(),E=pt.interactiveGuideline(),e=pt.models.tooltip(),W=pt.models.focus(pt.models.stackedArea()),F={top:10,right:25,bottom:50,left:60},N=null,D=null,O=null,L=pt.utils.defaultColor(),_=!0,B=!0,T="top",P=!0,I=!0,z=!1,V=!1,H=!1,Y=!0,G="TOTAL",X=pt.utils.state(),j=null,n=null,R=d3.dispatch("stateChange","changeState","renderEnd"),Z=250,q=["Stacked","Stream","Expanded"],K={},U=250;X.style=w.style(),M.orient("bottom").tickPadding(7),A.orient(z?"right":"left"),e.headerFormatter(function(t,e){return M.tickFormat()(t,e)}).valueFormatter(function(t,e){return A.tickFormat()(t,e)}),E.tooltip.headerFormatter(function(t,e){return M.tickFormat()(t,e)}).valueFormatter(function(t,e){return null==t?"N/A":A.tickFormat()(t,e)});var Q=null,J=null;S.updateState(!1);var r=pt.utils.renderWatch(R),$=(w.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:w.style()}}}),tt=function(t){return function(n){void 0!==n.style&&n.style,void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},et=d3.format("%");function nt(t){return r.reset(),r.models(w),P&&r.models(M),I&&r.models(A),t.each(function(r){var t=d3.select(this);pt.utils.initSVG(t);var e,n=pt.utils.availableWidth(D,t,F),i=pt.utils.availableHeight(O,t,F)-(V?W.height():0);if(nt.update=function(){t.transition().duration(U).call(nt)},nt.container=this,X.setter(tt(r),nt.update).getter($(r)).update(),X.disabled=r.map(function(t){return!!t.disabled}),!j)for(e in j={},X)X[e]instanceof Array?j[e]=X[e].slice(0):j[e]=X[e];if(!(r&&r.length&&r.filter(function(t){return t.values.length}).length))return pt.utils.noData(nt,t),nt;t.selectAll(".nv-noData").remove(),b=w.xScale(),k=w.yScale();var o=t.selectAll("g.nv-wrap.nv-stackedAreaChart").data([r]),a=o.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),s=o.select("g");a.append("g").attr("class","nv-legendWrap"),a.append("g").attr("class","nv-controlsWrap");var l=a.append("g").attr("class","nv-focus");l.append("g").attr("class","nv-background").append("rect"),l.append("g").attr("class","nv-x nv-axis"),l.append("g").attr("class","nv-y nv-axis"),l.append("g").attr("class","nv-stackedWrap"),l.append("g").attr("class","nv-interactive");var u,c,d,f,p;a.append("g").attr("class","nv-focusWrap");B?(u=_&&"top"===T?n-Z:n,C.width(u),s.select(".nv-legendWrap").datum(r).call(C),"bottom"===T?(c=10+(P?12:0),F.bottom=Math.max(C.height()+c,F.bottom),d=(i=pt.utils.availableHeight(O,t,F)-(V?W.height():0))+c,s.select(".nv-legendWrap").attr("transform","translate(0,"+d+")")):"top"===T&&(N||F.top==C.height()||(F.top=C.height(),i=pt.utils.availableHeight(O,t,F)-(V?W.height():0)),s.select(".nv-legendWrap").attr("transform","translate("+(n-u)+","+-F.top+")"))):s.select(".nv-legendWrap").selectAll("*").remove(),_?(f=[{key:K.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=w.style(),style:"stack"},{key:K.stream||"Stream",metaKey:"Stream",disabled:"stream"!=w.style(),style:"stream"},{key:K.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=w.style(),style:"expand"},{key:K.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=w.style(),style:"stack_percent"}],Z=q.length/3*260,f=f.filter(function(t){return-1!==q.indexOf(t.metaKey)}),S.width(Z).color(["#444","#444","#444"]),s.select(".nv-controlsWrap").datum(f).call(S),p=Math.max(S.height(),B&&"top"===T?C.height():0),F.top!=p&&(F.top=p,i=pt.utils.availableHeight(O,t,F)-(V?W.height():0)),s.select(".nv-controlsWrap").attr("transform","translate(0,"+-F.top+")")):s.select(".nv-controlsWrap").selectAll("*").remove(),o.attr("transform","translate("+F.left+","+F.top+")"),z&&s.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)"),H&&(E.width(n).height(i).margin({left:F.left,top:F.top}).svgContainer(t).xScale(b),o.select(".nv-interactive").call(E)),s.select(".nv-focus .nv-background rect").attr("width",n).attr("height",i),w.width(n).height(i).color(r.map(function(t,e){return t.color||L(t,e)}).filter(function(t,e){return!r[e].disabled}));var h,g,v=s.select(".nv-focus .nv-stackedWrap").datum(r.filter(function(t){return!t.disabled}));function m(){P&&s.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i+")").transition().duration(U).call(M)}function y(){var t;I&&("expand"===w.style()||"stack_percent"===w.style()?(t=A.tickFormat(),Q&&t===et||(Q=t),A.tickFormat(et)):Q&&(A.tickFormat(Q),Q=null),s.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(A))}function x(n){s.select(".nv-focus .nv-stackedWrap").datum(r.filter(function(t){return!t.disabled}).map(function(t,e){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,e){return w.x()(t,e)>=n[0]&&w.x()(t,e)<=n[1]}),disableTooltip:t.disableTooltip}})).transition().duration(U).call(w),m(),y()}P&&M.scale(b)._ticks(pt.utils.calcTicksX(n/100,r)).tickSize(-i,0),I&&(h="wiggle"===w.offset()?0:pt.utils.calcTicksY(i/36,r),A.scale(k)._ticks(h).tickSize(-n,0)),V?(W.width(n),s.select(".nv-focusWrap").attr("transform","translate(0,"+(i+F.bottom+W.margin().top)+")").datum(r.filter(function(t){return!t.disabled})).call(W),null!==(g=W.brush.empty()?W.xDomain():W.brush.extent())&&x(g)):(v.transition().call(w),m(),y()),w.dispatch.on("areaClick.toggle",function(n){1===r.filter(function(t){return!t.disabled}).length?r.forEach(function(t){t.disabled=!1}):r.forEach(function(t,e){t.disabled=e!=n.seriesIndex}),X.disabled=r.map(function(t){return!!t.disabled}),R.stateChange(X),nt.update()}),C.dispatch.on("stateChange",function(t){for(var e in t)X[e]=t[e];R.stateChange(X),nt.update()}),S.dispatch.on("legendClick",function(t,e){t.disabled&&(f=f.map(function(t){return t.disabled=!0,t}),t.disabled=!1,w.style(t.style),X.style=w.style(),R.stateChange(X),nt.update())}),E.dispatch.on("elementMousemove",function(i){w.clearHighlights();var o,a,s,l,u,c=[],d=0,f=!0;r.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){a=pt.interactiveBisect(t.values,i.pointXValue,nt.x());var n,r=t.values[a];null!=nt.y()(r,a)&&w.highlightPoint(e,a,!0),void 0!==r&&(void 0===o&&(o=r),void 0===s&&(s=nt.xScale()(nt.x()(r,a))),n="expand"==w.style()?r.display.y:nt.y()(r,a),c.push({key:t.key,value:n,color:L(t,t.seriesIndex),point:r}),Y&&"expand"!=w.style()&&null!=n&&(d+=n,f=!1))}),c.reverse(),2<c.length&&(l=nt.yScale().invert(i.mouseY),u=null,c.forEach(function(t,e){l=Math.abs(l);var n=Math.abs(t.point.display.y0),r=Math.abs(t.point.display.y);n<=l&&l<=r+n&&(u=e)}),null!=u&&(c[u].highlight=!0)),Y&&"expand"!=w.style()&&2<=c.length&&!f&&c.push({key:G,value:d,total:!0});var t=nt.x()(o,a),e=E.tooltip.valueFormatter();"expand"===w.style()||"stack_percent"===w.style()?(J=J||e,e=d3.format(".1%")):J&&(e=J,J=null),E.tooltip.valueFormatter(e).data({value:t,series:c})(),E.renderGuideLine(s)}),E.dispatch.on("elementMouseout",function(t){w.clearHighlights()}),W.dispatch.on("onBrush",function(t){x(t)}),R.on("changeState",function(n){void 0!==n.disabled&&r.length===n.disabled.length&&(r.forEach(function(t,e){t.disabled=n.disabled[e]}),X.disabled=n.disabled),void 0!==n.style&&(w.style(n.style),n.style),nt.update()})}),r.renderEnd("stacked Area chart immediate"),nt}return w.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=w.x()(t.point),t.point.y=w.y()(t.point),e.data(t).hidden(!1)}),w.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),nt.dispatch=R,nt.stacked=w,nt.legend=C,nt.controls=S,nt.xAxis=M,nt.x2Axis=W.xAxis,nt.yAxis=A,nt.y2Axis=W.yAxis,nt.interactiveLayer=E,nt.tooltip=e,nt.focus=W,nt.dispatch=R,nt.options=pt.utils.optionsFunc.bind(nt),nt._options=Object.create({},{width:{get:function(){return D},set:function(t){D=t}},height:{get:function(){return O},set:function(t){O=t}},showLegend:{get:function(){return B},set:function(t){B=t}},legendPosition:{get:function(){return T},set:function(t){T=t}},showXAxis:{get:function(){return P},set:function(t){P=t}},showYAxis:{get:function(){return I},set:function(t){I=t}},defaultState:{get:function(){return j},set:function(t){j=t}},noData:{get:function(){return n},set:function(t){n=t}},showControls:{get:function(){return _},set:function(t){_=t}},controlLabels:{get:function(){return K},set:function(t){K=t}},controlOptions:{get:function(){return q},set:function(t){q=t}},showTotalInTooltip:{get:function(){return Y},set:function(t){Y=t}},totalLabel:{get:function(){return G},set:function(t){G=t}},focusEnable:{get:function(){return V},set:function(t){V=t}},focusHeight:{get:function(){return W.height()},set:function(t){W.height(t)}},brushExtent:{get:function(){return W.brushExtent()},set:function(t){W.brushExtent(t)}},margin:{get:function(){return F},set:function(t){void 0!==t.top&&(F.top=t.top,N=t.top),F.right=void 0!==t.right?t.right:F.right,F.bottom=void 0!==t.bottom?t.bottom:F.bottom,F.left=void 0!==t.left?t.left:F.left}},focusMargin:{get:function(){return W.margin},set:function(t){W.margin.top=void 0!==t.top?t.top:W.margin.top,W.margin.right=void 0!==t.right?t.right:W.margin.right,W.margin.bottom=void 0!==t.bottom?t.bottom:W.margin.bottom,W.margin.left=void 0!==t.left?t.left:W.margin.left}},duration:{get:function(){return U},set:function(t){U=t,r.reset(U),w.duration(U),M.duration(U),A.duration(U)}},color:{get:function(){return L},set:function(t){L=pt.utils.getColor(t),C.color(L),w.color(L),W.color(L)}},x:{get:function(){return w.x()},set:function(t){w.x(t),W.x(t)}},y:{get:function(){return w.y()},set:function(t){w.y(t),W.y(t)}},rightAlignYAxis:{get:function(){return z},set:function(t){z=t,A.orient(z?"right":"left")}},useInteractiveGuideline:{get:function(){return H},set:function(t){H=!!t,nt.interactive(!t),nt.useVoronoi(!t),w.scatter.interactive(!t)}}}),pt.utils.inheritOptions(nt,w),pt.utils.initOptions(nt),nt},pt.models.stackedAreaWithFocusChart=function(){return pt.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},pt.models.sunburst=function(){"use strict";var o,i,a,s,l={top:0,right:0,bottom:0,left:0},u=600,c=600,d="count",f={count:function(t){return 1},value:function(t){return t.value||t.size},size:function(t){return t.value||t.size}},p=Math.floor(1e4*Math.random()),h=null,g=pt.utils.defaultColor(),v=!1,m=function(t){return"count"===d?t.name+" #"+t.value:t.name+" "+(t.value||t.size)},r=.02,e=function(t,e){return t.name>e.name},y=function(t,e){return t.name},x=!0,b=500,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),w=d3.scale.linear().range([0,2*Math.PI]),M=d3.scale.sqrt(),A=d3.layout.partition().sort(e),C={},S=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,w(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,M(t.y))}).outerRadius(function(t){return Math.max(0,M(t.y+t.dy))});function E(t){return 90<W(t)?180:0}function W(t){return(Math.max(0,Math.min(2*Math.PI,w(t.x)))+Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx))))/2*(180/Math.PI)-90}function F(t){var e=Math.max(0,Math.min(2*Math.PI,w(t.x))),n=Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx)));return r<n-e}function n(e,t){var n=d3.interpolate(w.domain(),[o.x,o.x+o.dx]),r=d3.interpolate(M.domain(),[o.y,1]),i=d3.interpolate(M.range(),[o.y?20:0,s]);return 0===t?function(){return S(e)}:function(t){return w.domain(n(t)),M.domain(r(t)).range(i(t)),S(e)}}function N(n){var r=d3.interpolate({x:n.x0,dx:n.dx0,y:n.y0,dy:n.dy0},n);return function(t){var e=r(t);return n.x0=e.x,n.dx0=e.dx,n.y0=e.y,n.dy0=e.dy,S(e)}}function D(t){t.forEach(function(t){var e=y(t),n=C[e];n?(t.dx0=n.dx,t.x0=n.x,t.dy0=n.dy,t.y0=n.y):(t.dx0=t.dx,t.x0=t.x,t.dy0=t.dy,t.y0=t.y),function(t){var e=y(t);C[e]||(C[e]={});var n=C[e];n.dx=t.dx,n.x=t.x,n.dy=t.dy,n.y=t.y}(t)})}function O(i){var t=h.selectAll("text"),e=h.selectAll("path");t.transition().attr("opacity",0),o=i,e.transition().duration(b).attrTween("d",n).each("end",function(r){r.x>=i.x&&r.x<i.x+i.dx&&r.depth>=i.depth&&d3.select(this.parentNode).select("text").transition().duration(b).text(function(t){return m(t)}).attr("opacity",function(t){return F(t)?1:0}).attr("transform",function(){var t=this.getBBox().width;if(0===r.depth)return"translate("+t/2*-1+",0)";if(r.depth===i.depth)return"translate("+(M(r.y)+5)+",0)";var e=W(r),n=E(r);return 0===n?"rotate("+e+")translate("+(M(r.y)+5)+",0)":"rotate("+e+")translate("+(M(r.y)+t+5)+",0)rotate("+n+")"})})}var L=pt.utils.renderWatch(k);function _(t){return L.reset(),t.each(function(t){h=d3.select(this),i=pt.utils.availableWidth(u,h,l),a=pt.utils.availableHeight(c,h,l),s=Math.min(i,a)/2,M.range([0,s]);var e=h.select("g.nvd3.nv-wrap.nv-sunburst");e[0][0]?e.attr("transform","translate("+(i/2+l.left+l.right)+","+(a/2+l.top+l.bottom)+")"):e=h.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+p).attr("transform","translate("+(i/2+l.left+l.right)+","+(a/2+l.top+l.bottom)+")"),h.on("click",function(t,e){k.chartClick({data:t,index:e,pos:d3.event,id:p})}),A.value(f[d]||f.count);var n=A.nodes(t[0]).reverse();D(n);var r=e.selectAll(".arc-container").data(n,y);r.enter().append("g").attr("class","arc-container").append("path").attr("d",S).style("fill",function(t){return t.color?t.color:g(x?(t.children?t:t.parent).name:t.name)}).style("stroke","#FFF").on("click",function(t,e){O(t),k.elementClick({data:t,index:e})}).on("mouseover",function(t,e){var n,r;d3.select(this).classed("hover",!0).style("opacity",.8),k.elementMouseover({data:t,color:d3.select(this).style("fill"),percent:(n=t,r=Math.max(0,Math.min(2*Math.PI,w(n.x))),(Math.max(0,Math.min(2*Math.PI,w(n.x+n.dx)))-r)/(2*Math.PI))})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),k.elementMouseout({data:t})}).on("mousemove",function(t,e){k.elementMousemove({data:t})}),r.each(function(t){d3.select(this).select("path").transition().duration(b).attrTween("d",N)}),v&&(r.selectAll("text").remove(),r.append("text").text(function(t){return m(t)}).transition().duration(b).attr("opacity",function(t){return F(t)?1:0}).attr("transform",function(t){var e=this.getBBox().width;if(0===t.depth)return"rotate(0)translate("+e/2*-1+",0)";var n=W(t),r=E(t);return 0===r?"rotate("+n+")translate("+(M(t.y)+5)+",0)":"rotate("+n+")translate("+(M(t.y)+e+5)+",0)rotate("+r+")"})),O(n[n.length-1]),r.exit().transition().duration(b).attr("opacity",0).each("end",function(t){var e=y(t);C[e]=void 0}).remove()}),L.renderEnd("sunburst immediate"),_}return _.dispatch=k,_.options=pt.utils.optionsFunc.bind(_),_._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},mode:{get:function(){return d},set:function(t){d=t}},id:{get:function(){return p},set:function(t){p=t}},duration:{get:function(){return b},set:function(t){b=t}},groupColorByParent:{get:function(){return x},set:function(t){x=!!t}},showLabels:{get:function(){return v},set:function(t){v=!!t}},labelFormat:{get:function(){return m},set:function(t){m=t}},labelThreshold:{get:function(){return r},set:function(t){r=t}},sort:{get:function(){return e},set:function(t){e=t}},key:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return l},set:function(t){l.top=null!=t.top?t.top:l.top,l.right=null!=t.right?t.right:l.right,l.bottom=null!=t.bottom?t.bottom:l.bottom,l.left=null!=t.left?t.left:l.left}},color:{get:function(){return g},set:function(t){g=pt.utils.getColor(t)}}}),pt.utils.initOptions(_),_},pt.models.sunburstChart=function(){"use strict";var i=pt.models.sunburst(),e=pt.models.tooltip(),o={top:30,right:20,bottom:20,left:20},a=null,s=null,n=pt.utils.defaultColor(),r=!1,l=(Math.round(1e5*Math.random()),null),u=null,c=250,t=d3.dispatch("stateChange","changeState","renderEnd"),d=pt.utils.renderWatch(t);function f(t){return d.reset(),d.models(i),t.each(function(t){var e=d3.select(this);pt.utils.initSVG(e);var n=pt.utils.availableWidth(a,e,o),r=pt.utils.availableHeight(s,e,o);if(f.update=function(){0===c?e.call(f):e.transition().duration(c).call(f)},f.container=e,!t||!t.length)return pt.utils.noData(f,e),f;e.selectAll(".nv-noData").remove(),i.width(n).height(r).margin(o),e.call(i)}),d.renderEnd("sunburstChart immediate"),f}return e.duration(0).headerEnabled(!1).valueFormatter(function(t){return t}),i.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.value||t.data.size,color:t.color,percent:t.percent},r||(delete t.percent,delete t.series.percent),e.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){e.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){e()}),f.dispatch=t,f.sunburst=i,f.tooltip=e,f.options=pt.utils.optionsFunc.bind(f),f._options=Object.create({},{noData:{get:function(){return u},set:function(t){u=t}},defaultState:{get:function(){return l},set:function(t){l=t}},showTooltipPercent:{get:function(){return r},set:function(t){r=t}},color:{get:function(){return n},set:function(t){n=t,i.color(n)}},duration:{get:function(){return c},set:function(t){c=t,d.reset(c),i.duration(c)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left,i.margin(o)}}}),pt.utils.inheritOptions(f,i),pt.utils.initOptions(f),f},pt.version="1.8.5"}();